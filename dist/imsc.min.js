var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(g,t){return Object.prototype.hasOwnProperty.call(g,t)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(g,t){for(var p=1;p<arguments.length;p++){var f=arguments[p];if(f)for(var A in f)$jscomp.owns(f,A)&&(g[A]=f[A])}return g};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(g,t,p){g!=Array.prototype&&g!=Object.prototype&&(g[t]=p.value)};$jscomp.getGlobal=function(g){return"undefined"!=typeof window&&window===g?g:"undefined"!=typeof global&&null!=global?global:g};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(g,t,p,f){if(t){p=$jscomp.global;g=g.split(".");for(f=0;f<g.length-1;f++){var A=g[f];A in p||(p[A]={});p=p[A]}g=g[g.length-1];f=p[g];t=t(f);t!=f&&null!=t&&$jscomp.defineProperty(p,g,{configurable:!0,writable:!0,value:t})}};$jscomp.polyfill("Object.assign",function(g){return g||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.entries",function(g){return g?g:function(g){var p=[],f;for(f in g)$jscomp.owns(g,f)&&p.push([f,g[f]]);return p}},"es8","es3");
$jscomp.polyfill("Object.is",function(g){return g?g:function(g,p){return g===p?0!==g||1/g===1/p:g!==g&&p!==p}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(g){return g?g:function(g,p){var f=this;f instanceof String&&(f=String(f));var A=f.length;p=p||0;for(0>p&&(p=Math.max(p+A,0));p<A;p++){var n=f[p];if(n===g||Object.is(n,g))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(g,t,p){if(null==g)throw new TypeError("The 'this' value for String.prototype."+p+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+p+" must not be a regular expression");return g+""};$jscomp.polyfill("String.prototype.includes",function(g){return g?g:function(g,p){return-1!==$jscomp.checkStringArgs(this,g,"includes").indexOf(g,p||0)}},"es6","es3");
$jscomp.polyfill("Math.sign",function(g){return g?g:function(g){g=Number(g);return 0===g||isNaN(g)?g:0<g?1:-1}},"es6","es3");
(function(g){"object"===typeof exports&&"undefined"!==typeof module?module.exports=g():"function"===typeof define&&define.amd?define([],g):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=g()})(function(){return function(){function g(t,p,f){function A(l,I){if(!p[l]){if(!t[l]){var a="function"==typeof require&&require;if(!I&&a)return a(l,!0);if(n)return n(l,!0);I=Error("Cannot find module '"+l+"'");throw I.code="MODULE_NOT_FOUND",I;}I=
p[l]={exports:{}};t[l][0].call(I.exports,function(a){return A(t[l][1][a]||a)},I,I.exports,g,t,p,f)}return p[l].exports}for(var n="function"==typeof require&&require,l=0;l<f.length;l++)A(f[l]);return A}return g}()({1:[function(g,t,p){(function(g,p,n,l,t){function f(b,d){var a=b.styleAttrs&&b.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===b.kind)!a&&d&&(b.styleAttrs||(b.styleAttrs={}),b.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=d);else if(a&&delete b.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],
b.contents)for(var e=0;e<b.contents.length;e++)f(b.contents[e],a||d)}function a(b){if("contents"in b){var d="styleAttrs"in b?b.styleAttrs[l.byName.ruby.qname]:null;d="span"===b.kind&&("container"===d||"textContainer"===d||"baseContainer"===d);for(var e=b.contents.length-1;0<=e;e--)!d||"styleAttrs"in b.contents[e]&&l.byName.ruby.qname in b.contents[e].styleAttrs?a(b.contents[e]):delete b.contents[e]}}function c(b,d,a,e){var m=e&&"seq"===e.timeContainer,F=0;e&&(F=m&&a?a.end:e.begin);d.begin=d.explicit_begin?
d.explicit_begin+F:F;a=d.begin;e=null;for(var h in d.sets)d.sets.hasOwnProperty(h)&&(c(b,d.sets[h],e,d),a="seq"===d.timeContainer?d.sets[h].end:Math.max(a,d.sets[h].end),e=d.sets[h]);if("contents"in d)for(var x in d.contents)d.contents.hasOwnProperty(x)&&(c(b,d.contents[x],e,d),a="seq"===d.timeContainer?d.contents[x].end:Math.max(a,d.contents[x].end),e=d.contents[x]);else a=m?d.begin:Number.POSITIVE_INFINITY;d.end=null!==d.explicit_end&&null!==d.explicit_dur?Math.min(d.begin+d.explicit_dur,F+d.explicit_end):
null===d.explicit_end&&null!==d.explicit_dur?d.begin+d.explicit_dur:null!==d.explicit_end&&null===d.explicit_dur?F+d.explicit_end:a;delete d.explicit_begin;delete d.explicit_dur;delete d.explicit_end;b._registerEvent(d)}function D(b){this.node=b}function h(){this.events=[];this.head=new M;this.body=null}function M(){this.styling=new k;this.layout=new z}function k(){this.styles={};this.initials={}}function A(){this.styleRefs=this.styleAttrs=this.id=null}function V(){this.styleAttrs=null}function z(){this.regions=
{}}function C(b,d){this.kind="image";this.src=b;this.type=d}function J(b){this.id=b}function y(b){this.regionID=b}function d(b){this.styleAttrs=b}function m(b){this.sets=b}function b(b){this.contents=b}function e(b,d,a){this.explicit_begin=b;this.explicit_end=d;this.explicit_dur=a}function v(){this.kind="body"}function Q(){this.kind="div"}function P(){this.kind="p"}function r(){this.kind="span"}function u(){this.kind="span"}function S(){this.kind="br"}function K(){}function W(){}function H(b){var d=
null;b&&(b=b.attributes["xml:id"]||b.attributes.id)&&(d=b.value||null);return d}function G(b){return b&&"style"in b.attributes?b.attributes.style.value.split(" "):[]}function R(b,d){var a={};if(null!==b)for(var e in b.attributes)if(b.attributes.hasOwnProperty(e)){var m=b.attributes[e].uri+" "+b.attributes[e].local,c=l.byQName[m];if(void 0!==c){var h=c.parse(b.attributes[e].value);null!==h?(a[m]=h,c===l.byName.zIndex&&N(d,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):
L(d,"Cannot parse styling attribute "+m+" --\x3e "+b.attributes[e].value)}}return a}function O(b,d,a){for(var e in b.attributes)if(b.attributes.hasOwnProperty(e)&&b.attributes[e].uri===d&&b.attributes[e].local===a)return b.attributes[e].value;return null}function aa(b,d){b=O(b,n.ns_tts,"extent");if(null===b)return null;var a=b.split(" ");if(2!==a.length)return N(d,"Malformed extent (ignoring)"),null;b=t.parseLength(a[0]);a=t.parseLength(a[1]);return a&&b?{h:a,w:b}:(N(d,"Malformed extent values (ignoring)"),
null)}function T(b,d,a){var e=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,m=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,c=/^(\d+(?:\.\d+)?)t$/,h=/^(\d+(?:\.\d+)?)ms$/,F=/^(\d+(?:\.\d+)?)s$/,k=/^(\d+(?:\.\d+)?)h$/,n=/^(\d+(?:\.\d+)?)m$/,x,v=null;null!==(x=/^(\d+(?:\.\d+)?)f$/.exec(a))?null!==d&&(v=parseFloat(x[1])/d):null!==(x=c.exec(a))?null!==b&&(v=parseFloat(x[1])/b):null!==(x=h.exec(a))?v=parseFloat(x[1])/1E3:null!==(x=F.exec(a))?v=parseFloat(x[1]):null!==(x=k.exec(a))?v=3600*parseFloat(x[1]):null!==(x=n.exec(a))?
v=60*parseFloat(x[1]):null!==(x=e.exec(a))?v=3600*parseInt(x[1])+60*parseInt(x[2])+parseFloat(x[3]):null!==(x=m.exec(a))&&null!==d&&(v=3600*parseInt(x[1])+60*parseInt(x[2])+parseInt(x[3])+(null===x[4]?0:parseInt(x[4])/d));return v}function X(b,d,a){for(;0<d.styleRefs.length;){var e=d.styleRefs.pop();e in b.styles?(X(b,b.styles[e],a),U(b.styles[e].styleAttrs,d.styleAttrs)):L(a,"Non-existant style id referenced")}}function Y(b,d,a,e){for(var m=d.length-1;0<=m;m--){var c=d[m];c in b.styles?U(b.styles[c].styleAttrs,
a):L(e,"Non-existant style id referenced")}}function U(b,d){for(var a in b)!b.hasOwnProperty(a)||a in d||(d[a]=b[a])}function N(b,d){if(b&&b.warn&&b.warn(d))throw d;}function L(b,d){if(b&&b.error&&b.error(d))throw d;}function E(b,d){b&&b.fatal&&b.fatal(d);throw d;}function Z(b,d){for(var a=0,e=b.length-1,m;a<=e;){m=Math.floor((a+e)/2);var c=b[m];if(c<d)a=m+1;else if(c>d)e=m-1;else return{found:!0,index:m}}return{found:!1,index:a}}g.fromXML=function(b,d,e){var m=p.parser(!0,{xmlns:!0}),q=[],g=[],F=
[],x=0,w=null;m.onclosetag=function(b){if(q[0]instanceof K)null!==w.head&&null!==w.head.styling&&Y(w.head.styling,q[0].styleRefs,q[0].styleAttrs,d),delete q[0].styleRefs;else if(q[0]instanceof k)for(var a in q[0].styles)q[0].styles.hasOwnProperty(a)&&X(q[0],q[0].styles[a],d);else if(q[0]instanceof P||q[0]instanceof r){if(1<q[0].contents.length){b=[q[0].contents[0]];for(a=1;a<q[0].contents.length;a++)q[0].contents[a]instanceof u&&b[b.length-1]instanceof u?b[b.length-1].text+=q[0].contents[a].text:
b.push(q[0].contents[a]);q[0].contents=b}q[0]instanceof r&&1===q[0].contents.length&&q[0].contents[0]instanceof u&&(q[0].text=q[0].contents[0].text,delete q[0].contents)}else if(q[0]instanceof D)if(q[0].node.uri===n.ns_tt&&"metadata"===q[0].node.local)x--;else if(0<x&&e&&"onCloseTag"in e)e.onCloseTag();F.shift();g.shift();q.shift()};m.ontext=function(b){if(void 0!==q[0])if(q[0]instanceof r||q[0]instanceof P){if(q[0]instanceof r){var a=q[0].styleAttrs[l.byName.ruby.qname];if("container"===a||"textContainer"===
a||"baseContainer"===a)return}a=new u;a.initFromText(w,q[0],b,g[0],F[0],d);q[0].contents.push(a)}else if(q[0]instanceof D&&0<x&&e&&"onText"in e)e.onText(b)};m.onopentag=function(b){function a(b){n.ttaf_map[b.uri]&&(b.uri=n.ttaf_map[b.uri])}var m=b.attributes["xml:space"];m?F.unshift(m.value):0===F.length?F.unshift("default"):F.unshift(F[0]);(m=b.attributes["xml:lang"])?g.unshift(m.value):0===g.length?g.unshift(""):g.unshift(g[0]);a(b);if(b.attributes)for(var c in b.attributes)b.attributes.hasOwnProperty(c)&&
a(b.attributes[c]);if(b.uri===n.ns_tt)if("tt"===b.local)null!==w&&E(d,"Two <tt> elements at ("+this.line+","+this.column+")"),w=new h,w.initFromNode(b,g[0],d),q.unshift(w);else if("head"===b.local)q[0]instanceof h||E(d,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),q.unshift(w.head);else if("styling"===b.local)q[0]instanceof M||E(d,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),q.unshift(w.head.styling);else if("style"===b.local)if(q[0]instanceof
k){var f=new A;f.initFromNode(b,d);f.id?w.head.styling.styles[f.id]=f:L(d,"<style> element missing @id attribute");q.unshift(f)}else q[0]instanceof K?(f=new A,f.initFromNode(b,d),U(f.styleAttrs,q[0].styleAttrs),q.unshift(f)):E(d,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===b.local)if(q[0]instanceof k){c=new V;c.initFromNode(b,d);for(f in c.styleAttrs)c.styleAttrs.hasOwnProperty(f)&&(w.head.styling.initials[f]=c.styleAttrs[f]);q.unshift(c)}else E(d,
"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===b.local)q[0]instanceof M||E(d,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),q.unshift(w.head.layout);else if("region"===b.local)q[0]instanceof z||E(d,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),f=new K,f.initFromNode(w,b,g[0],d),!f.id||f.id in w.head.layout.regions?L(d,"Ignoring <region> with duplicate or missing @id at "+this.line+
","+this.column+")"):w.head.layout.regions[f.id]=f,q.unshift(f);else if("body"===b.local)q[0]instanceof h||E(d,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==w.body&&E(d,"Second <body> element at "+this.line+","+this.column+")"),f=new v,f.initFromNode(w,b,g[0],d),w.body=f,q.unshift(f);else if("div"===b.local){q[0]instanceof Q||q[0]instanceof v||E(d,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");f=new Q;f.initFromNode(w,q[0],b,
g[0],d);if(c=f.styleAttrs[l.byName.backgroundImage.qname])f.contents.push(new C(c)),delete f.styleAttrs[l.byName.backgroundImage.qname];q[0].contents.push(f);q.unshift(f)}else"image"===b.local?(q[0]instanceof Q||E(d,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),f=new C,f.initFromNode(w,q[0],b,g[0],d),q[0].contents.push(f),q.unshift(f)):"p"===b.local?(q[0]instanceof Q||E(d,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),f=new P,f.initFromNode(w,
q[0],b,g[0],d),q[0].contents.push(f),q.unshift(f)):"span"===b.local?(q[0]instanceof r||q[0]instanceof P||E(d,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),f=new r,f.initFromNode(w,q[0],b,g[0],F[0],d),q[0].contents.push(f),q.unshift(f)):"br"===b.local?(q[0]instanceof r||q[0]instanceof P||E(d,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),f=new S,f.initFromNode(w,q[0],b,g[0],d),q[0].contents.push(f),q.unshift(f)):"set"===b.local?
(q[0]instanceof r||q[0]instanceof P||q[0]instanceof Q||q[0]instanceof v||q[0]instanceof K||q[0]instanceof S||E(d,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),f=new W,f.initFromNode(w,q[0],b,d),q[0].sets.push(f),q.unshift(f)):q.unshift(new D(b));else q.unshift(new D(b));if(q[0]instanceof D)if(b.uri===n.ns_tt&&"metadata"===b.local)x++;else if(0<x&&e&&"onOpenTag"in e){f=[];for(var u in b.attributes)b.attributes.hasOwnProperty(u)&&(f[b.attributes[u].uri+
" "+b.attributes[u].local]={uri:b.attributes[u].uri,local:b.attributes[u].local,value:b.attributes[u].value});e.onOpenTag(b.uri,b.local,f)}};m.write(b).close();delete w.head.styling.styles;b=!1;for(var B in w.head.layout.regions)if(w.head.layout.regions.hasOwnProperty(B)){b=!0;break}b||(B=K.prototype.createDefaultRegion(w,d),w.head.layout.regions[B.id]=B);for(var y in w.head.layout.regions)w.head.layout.regions.hasOwnProperty(y)&&c(w,w.head.layout.regions[y],null,null);w.body&&c(w,w.body,null,null);
w.body&&a(w.body);w.body&&f(w.body);return w};h.prototype.initFromNode=function(b,d,a){var e=O(b,n.ns_ttp,"cellResolution"),m=15;var c=32;null!==e&&(e=/(\d+) (\d+)/.exec(e),null!==e?(c=parseInt(e[1]),m=parseInt(e[2])):N(a,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new t.ComputedLength(0,1/m),w:new t.ComputedLength(1/c,0)};m=O(b,n.ns_ttp,"frameRate");e=30;null!==m&&(c=/(\d+)/.exec(m),null!==c?e=parseInt(c[1]):N(a,"Malformed frame rate attribute (using initial value instead)"));
c=O(b,n.ns_ttp,"frameRateMultiplier");var h=1;null!==c&&(c=/(\d+) (\d+)/.exec(c),null!==c?h=parseInt(c[1])/parseInt(c[2]):N(a,"Malformed frame rate multiplier attribute (using initial value instead)"));e*=h;h=1;c=O(b,n.ns_ttp,"tickRate");null===c?null!==m&&(h=e):(c=/(\d+)/.exec(c),null!==c?h=parseInt(c[1]):N(a,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=e;this.tickRate=h;c=O(b,n.ns_ittp,"aspectRatio");null===c&&(c=O(b,n.ns_ttp,"displayAspectRatio"));m=null;
null!==c&&(e=/(\d+)\s+(\d+)/.exec(c),null!==e?(c=parseInt(e[1]),e=parseInt(e[2]),0!==c&&0!==e?m=c/e:L(a,"Illegal aspectRatio values (ignoring)")):L(a,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=m;m=O(b,n.ns_ttp,"timeBase");null!==m&&"media"!==m&&E(a,"Unsupported time base");b=aa(b,a);null===b?this.pxLength={h:null,w:null}:("px"===b.h.unit&&"px"===b.w.unit||E(a,"Extent on TT must be in px or absent"),this.pxLength={h:new t.ComputedLength(0,1/b.h.value),w:new t.ComputedLength(1/
b.w.value,0)});this.dimensions={h:new t.ComputedLength(0,1),w:new t.ComputedLength(1,0)};this.lang=d};h.prototype._registerEvent=function(b){if(!(b.end<=b.begin)){var d=Z(this.events,b.begin);d.found||this.events.splice(d.index,0,b.begin);b.end!==Number.POSITIVE_INFINITY&&(d=Z(this.events,b.end),d.found||this.events.splice(d.index,0,b.end))}};h.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]};h.prototype.getMediaTimeEvents=function(){return this.events};
A.prototype.initFromNode=function(b,d){this.id=H(b);this.styleAttrs=R(b,d);this.styleRefs=G(b)};V.prototype.initFromNode=function(b,d){this.styleAttrs={};for(var a in b.attributes)!b.attributes.hasOwnProperty(a)||b.attributes[a].uri!==n.ns_itts&&b.attributes[a].uri!==n.ns_ebutts&&b.attributes[a].uri!==n.ns_tts||(this.styleAttrs[b.attributes[a].uri+" "+b.attributes[a].local]=b.attributes[a].value)};C.prototype.initFromNode=function(b,a,c,h,f){(this.src="src"in c.attributes?c.attributes.src.value:null)||
L(f,"Invalid image@src attribute");(this.type="type"in c.attributes?c.attributes.type.value:null)||L(f,"Invalid image@type attribute");d.prototype.initFromNode.call(this,b,a,c,f);e.prototype.initFromNode.call(this,b,a,c,f);m.prototype.initFromNode.call(this,b,a,c,f);y.prototype.initFromNode.call(this,b,a,c,f);this.lang=h};J.prototype.initFromNode=function(b,d,a,e){this.id=H(a)};y.prototype.initFromNode=function(b,d,a,e){this.regionID=a&&"region"in a.attributes?a.attributes.region.value:""};d.prototype.initFromNode=
function(b,d,a,e){this.styleAttrs=R(a,e);null!==b.head&&null!==b.head.styling&&Y(b.head.styling,G(a),this.styleAttrs,e)};m.prototype.initFromNode=function(b,d,a,e){this.sets=[]};b.prototype.initFromNode=function(b,d,a,e){this.contents=[]};e.prototype.initFromNode=function(b,d,a,e){d=null;a&&"begin"in a.attributes&&(d=T(b.tickRate,b.effectiveFrameRate,a.attributes.begin.value),null===d&&N(e,"Malformed begin value "+a.attributes.begin.value+" (using 0)"));var m=null;a&&"dur"in a.attributes&&(m=T(b.tickRate,
b.effectiveFrameRate,a.attributes.dur.value),null===m&&N(e,"Malformed dur value "+a.attributes.dur.value+" (ignoring)"));var c=null;a&&"end"in a.attributes&&(c=T(b.tickRate,b.effectiveFrameRate,a.attributes.end.value),null===c&&N(e,"Malformed end value (ignoring)"));this.explicit_begin=d;this.explicit_end=c;this.explicit_dur=m;(b=a&&"timeContainer"in a.attributes?a.attributes.timeContainer.value:null)&&"par"!==b?"seq"===b?e="seq":(L(e,"Illegal value of timeContainer (assuming 'par')"),e="par"):e=
"par";this.timeContainer=e};v.prototype.initFromNode=function(a,c,h,f){d.prototype.initFromNode.call(this,a,null,c,f);e.prototype.initFromNode.call(this,a,null,c,f);m.prototype.initFromNode.call(this,a,null,c,f);y.prototype.initFromNode.call(this,a,null,c,f);b.prototype.initFromNode.call(this,a,null,c,f);this.lang=h};Q.prototype.initFromNode=function(a,c,h,f,k){d.prototype.initFromNode.call(this,a,c,h,k);e.prototype.initFromNode.call(this,a,c,h,k);m.prototype.initFromNode.call(this,a,c,h,k);y.prototype.initFromNode.call(this,
a,c,h,k);b.prototype.initFromNode.call(this,a,c,h,k);this.lang=f};P.prototype.initFromNode=function(a,c,h,f,k){d.prototype.initFromNode.call(this,a,c,h,k);e.prototype.initFromNode.call(this,a,c,h,k);m.prototype.initFromNode.call(this,a,c,h,k);y.prototype.initFromNode.call(this,a,c,h,k);b.prototype.initFromNode.call(this,a,c,h,k);this.lang=f};r.prototype.initFromNode=function(a,c,h,f,k,v){d.prototype.initFromNode.call(this,a,c,h,v);e.prototype.initFromNode.call(this,a,c,h,v);m.prototype.initFromNode.call(this,
a,c,h,v);y.prototype.initFromNode.call(this,a,c,h,v);b.prototype.initFromNode.call(this,a,c,h,v);this.space=k;this.lang=f};u.prototype.initFromText=function(b,d,a,c,m,h){e.prototype.initFromNode.call(this,b,d,null,h);this.text=a;this.space=m;this.lang=c};S.prototype.initFromNode=function(b,d,a,c,m){y.prototype.initFromNode.call(this,b,d,a,m);e.prototype.initFromNode.call(this,b,d,a,m);this.lang=c};K.prototype.createDefaultRegion=function(b,a){var c=new K;c.id="";d.prototype.initFromNode.call(c,b,
null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",value:"after",prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},
ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",ebutts:"urn:ebu:tt:style",ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},a);c.sets=[];e.call(c,0,Number.POSITIVE_INFINITY,null);this.lang=
b.xmllang;return c};K.prototype.initFromNode=function(b,d,a,c){J.prototype.initFromNode.call(this,b,null,d,c);e.prototype.initFromNode.call(this,b,null,d,c);m.prototype.initFromNode.call(this,b,null,d,c);this.styleAttrs=R(d,c);this.styleRefs=G(d);this.lang=a};W.prototype.initFromNode=function(b,d,a,c){e.prototype.initFromNode.call(this,b,d,a,c);b=R(a,c);this.value=this.qname=null;for(var m in b)if(b.hasOwnProperty(m)){if(this.qname){L(c,"More than one style specified on set");break}this.qname=m;this.value=
b[m]}}})("undefined"===typeof p?this.imscDoc={}:p,"undefined"===typeof sax?g("sax"):sax,"undefined"===typeof imscNames?g("./names"):imscNames,"undefined"===typeof imscStyles?g("./styles"):imscStyles,"undefined"===typeof imscUtils?g("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7,sax:void 0}],2:[function(g,t,p){(function(f,g,n,l){function p(d){var a={};d=Object.entries(d);for(var b in d)if(d.hasOwnProperty(b)){var e=l.parseColor(d[b][0]),c=l.parseColor(d[b][1]);e&&c&&(a[e.toString()]=
c)}return a}function A(d,m,b,e){if("region"===b.kind){var f=document.createElement("div");f.style.position="absolute"}else if("body"===b.kind)f=document.createElement("div");else if("div"===b.kind)f=document.createElement("div");else if("image"===b.kind){if(f=document.createElement("img"),null!==d.imgResolver&&null!==b.src){var k=d.imgResolver(b.src,f);k&&(f.src=k);f.height=d.regionH;f.width=d.regionW}}else if("p"===b.kind)f=document.createElement("p");else if("span"===b.kind)if("container"===b.styleAttrs[n.byName.ruby.qname])f=
document.createElement("ruby"),d.ruby=!0;else if("base"===b.styleAttrs[n.byName.ruby.qname])f=document.createElement("rb");else if("text"===b.styleAttrs[n.byName.ruby.qname])f=document.createElement("rt");else if("baseContainer"===b.styleAttrs[n.byName.ruby.qname])f=document.createElement("rbc");else if("textContainer"===b.styleAttrs[n.byName.ruby.qname])f=document.createElement("rtc");else{if("delimiter"===b.styleAttrs[n.byName.ruby.qname])return;f=document.createElement("span")}else"br"===b.kind&&
(f=document.createElement("br"));if(f){!b.lang||"region"!==b.kind&&b.lang===e.lang||(f.lang=b.lang);m.appendChild(f);f.style.margin="0";if("region"===b.kind)if(m=b.styleAttrs[n.byName.writingMode.qname],"lrtb"===m||"lr"===m)d.ipd="lr",d.bpd="tb";else if("rltb"===m||"rl"===m)d.ipd="rl",d.bpd="tb";else if("tblr"===m)d.ipd="tb",d.bpd="lr";else{if("tbrl"===m||"tb"===m)d.ipd="tb",d.bpd="rl"}else"p"===b.kind&&"tb"===d.bpd&&(d.ipd="ltr"===b.styleAttrs[n.byName.direction.qname]?"lr":"rl");for(var g in B)B.hasOwnProperty(g)&&
(m=B[g],e=b.styleAttrs[m.qname],void 0!==e&&null!==m.map&&m.map(d,f,b,e));g=f;(m=b.styleAttrs[n.byName.linePadding.qname])&&!m.isZero()&&(e=m.multiply(m.toUsedLength(d.w,d.h),d.options.sizeAdjust),0<e&&(e=Math.ceil(e)+"px","tb"===d.bpd?(g.style.paddingLeft=e,g.style.paddingRight=e):(g.style.paddingTop=e,g.style.paddingBottom=e),d.removePaddingElement=g,d.lp=m));(m=b.styleAttrs[n.byName.multiRowAlign.qname])&&"auto"!==m&&(g=document.createElement("span"),g.style.display="inline-block",g.style.textAlign=
m,f.appendChild(g),d.mra=m);(m=b.styleAttrs[n.byName.rubyReserve.qname])&&"none"!==m[0]&&(d.rubyReserve=m);b.styleAttrs[n.byName.fillLineGap.qname]&&(d.flg=!0);if("span"===b.kind&&b.text)if((m=b.styleAttrs[n.byName.textEmphasis.qname])&&"none"!==m.style&&(d.textEmphasis=!0),n.byName.textCombine.qname in b.styleAttrs&&"all"===b.styleAttrs[n.byName.textCombine.qname])f.textContent=b.text,m&&M(d,f,b,m);else for(e="",k=0;k<b.text.length;k++){e+=b.text.charAt(k);var r=b.text.charCodeAt(k);if(55296>r||
56319<r||k===b.text.length-1)r=document.createElement("span"),r.textContent=e,m&&M(d,r,b,m),f.appendChild(r),e="",r._isd_element=b}for(var u in b.contents)b.contents.hasOwnProperty(u)&&A(d,g,b.contents[u],b);u=[];if("p"===b.kind){h(d,g,u,null);if(d.rubyReserve){for(m=0;m<u.length;m++){e=document.createElement("ruby");k=document.createElement("rb");k.textContent="\u200b";e.appendChild(k);var l=d.rubyReserve[1].toUsedLength(d.w,d.h)+"px";"both"===d.rubyReserve[0]||"outside"===d.rubyReserve[0]&&1==u.length?
(k=document.createElement("rtc"),k.style[C]=z?"after":"under",k.textContent="\u200b",k.style.fontSize=l,r=document.createElement("rtc"),r.style[C]=z?"before":"over",r.textContent="\u200b",r.style.fontSize=l,e.appendChild(k),e.appendChild(r)):(k=document.createElement("rtc"),k.textContent="\u200b",k.style.fontSize=l,k.style[C]="after"===d.rubyReserve[0]||"outside"===d.rubyReserve[0]&&0<m?z?"after":"tb"===d.bpd||"rl"===d.bpd?"under":"over":z?"before":"tb"===d.bpd||"rl"===d.bpd?"over":"under",e.appendChild(k));
k=null;for(r=0;r<u[m].rbc.length;r++)if("ruby"===u[m].rbc[r].localName){k=u[m].rbc[r];for(r=0;r<k.style.length;r++)e.style.setProperty(k.style.item(r),k.style.getPropertyValue(k.style.item(r)));break}k=k||u[m].elements[0].node;k.parentElement.insertBefore(e,k)}d.rubyReserve=null}if(d.ruby||d.rubyReserve){for(m=0;m<u.length;m++)for(e=0;e<u[m].rbc.length;e++)u[m].rbc[e].style[C]||(u[m].rbc[e].style[C]=z?0===m?"before":"after":"tb"===d.bpd?0===m?"over":"under":"rl"===d.bpd?0===m?"over":"under":0===m?
"under":"over");d.ruby=null}if(d.textEmphasis){for(m=0;m<u.length;m++)for(e=0;e<u[m].te.length;e++)u[m].te[e].style[y]&&"none"!==u[m].te[e].style[y]||(u[m].te[e].style[y]="tb"===d.bpd?0===m?"left over":"left under":"rl"===d.bpd?0===m?"right under":"left under":0===m?"left under":"right under");d.textEmphasis=null}if(d.mra){for(m=0;m<u.length-1;m++)k=u[m].elements.length,0!==k&&!1===u[m].br&&(e=document.createElement("br"),k=u[m].elements[k-1].node,k.parentElement.insertBefore(e,k.nextSibling));d.mra=
null}if(d.lp){m=d.lp.multiply(d.lp.toUsedLength(d.w,d.h),d.options.sizeAdjust);for(e=0;e<u.length;e++){k=u[e].elements[u[e].start_elem];r=u[e].elements[u[e].end_elem];l=Math.ceil(m)+"px";var p="-"+Math.ceil(m)+"px";0!==u[e].elements.length&&("lr"===d.ipd?(k.node.marginLeft=p,k.node.style.paddingLeft=l):"rl"===d.ipd?(k.node.style.paddingRight=l,k.node.style.marginRight=p):"tb"===d.ipd&&(k.node.style.paddingTop=l,k.node.style.marginTop=p),"lr"===d.ipd?(r.node.style.paddingRight=l,r.node.style.marginRight=
p):"rl"===d.ipd?(r.node.style.paddingLeft=l,r.node.style.marginLeft=p):"tb"===d.ipd&&(r.node.style.paddingBottom=l,r.node.style.marginBottom=p))}"tb"===d.bpd?(d.removePaddingElement.style.paddingLeft=0,d.removePaddingElement.style.paddingRight=0):(d.removePaddingElement.style.paddingTop=0,d.removePaddingElement.style.paddingBottom=0);d.lp=null}for(m=0;m<u.length;m++)for(e=u[m],k=1;k<e.elements.length;){r=e.elements[k-1].node;l=e.elements[k].node;if("SPAN"===r.tagName&&"SPAN"===l.tagName&&r._isd_element===
l._isd_element){r.textContent+=l.textContent;for(p=0;p<l.style.length;p++){var t=l.style[p];if(0<=t.indexOf("border")||0<=t.indexOf("padding"))r.style[t]=l.style[t]}l.parentElement.removeChild(l);r=!0}else r=!1;r?e.elements.splice(k,1):k++}m=[];for(r=0;r<u.length;r++)for(l=0;l<u[r].elements.length;l++)if(e=u[r].elements[l].node,k=a(e,m,!1))e.style.backgroundColor=k;for(e=0;e<m.length;e++)m[e].style.backgroundColor="";if(d.flg){e=D(g.getBoundingClientRect(),d);m=e.before;e=e.after;k=Math.sign(e-m);
for(r=0;r<=u.length;r++){l=0===r?Math.round(m):r===u.length?Math.round(e):Math.round((u[r-1].after+u[r].before)/2);if(0<r&&u[r-1])for(t=0;t<u[r-1].elements.length;t++){var H=u[r-1].elements[t];p=k*(l-H.after)+"px";"lr"===d.bpd?H.node.style.paddingRight=p:"rl"===d.bpd?H.node.style.paddingLeft=p:"tb"===d.bpd&&(H.node.style.paddingBottom=p)}if(r<u.length)for(t=0;t<u[r].elements.length;t++)H=u[r].elements[t],p=k*(H.before-l)+"px","lr"===d.bpd?H.node.style.paddingLeft=p:"rl"===d.bpd?H.node.style.paddingRight=
p:"tb"===d.bpd&&(H.node.style.paddingTop=p)}d.flg=null}}"region"===b.kind&&"tb"===d.bpd&&d.enableRollUp&&0<b.contents.length&&"after"===b.styleAttrs[n.byName.displayAlign.qname]&&(h(d,g,u,null),b=new c(""===b.id?"_":b.id,u),d.currentISDState[b.id]=b,d.previousISDState&&b.id in d.previousISDState&&0<d.previousISDState[b.id].plist.length&&1<b.plist.length&&b.plist[b.plist.length-2].text===d.previousISDState[b.id].plist[d.previousISDState[b.id].plist.length-1].text&&(d=f.firstElementChild,b=b.plist[b.plist.length-
1].after-b.plist[b.plist.length-1].before,d.style.bottom="-"+b+"px",d.style.transition="transform 0.4s",d.style.position="relative",d.style.transform="translateY(-"+b+"px)"))}else if(d=d.errorHandler,b="Error processing ISD element kind: "+b.kind,d&&d.error&&d.error(b))throw b;}function a(d,c,b){if(d.style.backgroundColor)return b&&!c.includes(d)&&c.push(d),d.style.backgroundColor;if("SPAN"===d.parentElement.nodeName)return a(d.parentElement,c,!0)}function c(d,a){this.id=d;this.plist=a}function D(d,
a){var b={before:null,after:null,start:null,end:null};"tb"===a.bpd?(b.before=d.top,b.after=d.bottom,"lr"===a.ipd?(b.start=d.left,b.end=d.right):(b.start=d.right,b.end=d.left)):"lr"===a.bpd?(b.before=d.left,b.after=d.right,b.start=d.top,b.end=d.bottom):"rl"===a.bpd&&(b.before=d.right,b.after=d.left,b.start=d.top,b.end=d.bottom);return b}function h(d,a,b,e){if("rt"!==a.localName&&"rtc"!==a.localName)if(e=a.style.backgroundColor||e,0===a.childElementCount)if("span"===a.localName||"rb"===a.localName){var c=
a.getBoundingClientRect();d=D(c,d);if(!(c=0===b.length)){c=d.before;var m=d.after,k=b[b.length-1].before,f=b[b.length-1].after;c=!(m<f&&c>k||f<=m&&k>=c)}c?b.push({before:d.before,after:d.after,start:d.start,end:d.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(c=Math.sign(d.after-d.before),m=Math.sign(d.end-d.start),0>c*(d.before-b[b.length-1].before)&&(b[b.length-1].before=d.before),0<c*(d.after-b[b.length-1].after)&&(b[b.length-1].after=d.after),0>m*(d.start-b[b.length-1].start)&&
(b[b.length-1].start=d.start,b[b.length-1].start_elem=b[b.length-1].elements.length),0<m*(d.end-b[b.length-1].end)&&(b[b.length-1].end=d.end,b[b.length-1].end_elem=b[b.length-1].elements.length));b[b.length-1].text+=a.textContent;b[b.length-1].elements.push({node:a,bgcolor:e,before:d.before,after:d.after})}else"br"===a.localName&&0!==b.length&&(b[b.length-1].br=!0);else for(a=a.firstChild;a;)a.nodeType===Node.ELEMENT_NODE&&(h(d,a,b,e),"ruby"===a.localName||"rtc"===a.localName?0<b.length&&b[b.length-
1].rbc.push(a):"span"===a.localName&&a.style[J]&&"none"!==a.style[J]&&0<b.length&&b[b.length-1].te.push(a)),a=a.nextSibling}function M(d,a,b,e){"none"!==e.style&&(a.style[J]="auto"===e.style?"filled":e.style+" "+e.symbol,"before"===e.position||"after"===e.position)&&(a.style[y]="tb"===d.bpd?"before"===e.position?"left over":"left under":"rl"===d.bpd?"before"===e.position?"right under":"left under":"before"===e.position?"left under":"right under")}function k(d,a){this.qname=d;this.map=a}f.render=function(d,
a,b,e,c,k,f,h,g,n){e=e||a.clientHeight;var m=c||a.clientWidth;null!==d.aspectRatio&&(c=e*d.aspectRatio,c>m?e=Math.round(m/d.aspectRatio):m=c);c=document.createElement("div");c.style.position="relative";c.style.width=m+"px";c.style.height=e+"px";c.style.margin="auto";c.style.top=0;c.style.bottom=0;c.style.left=0;c.style.right=0;c.style.zIndex=0;b={h:e,w:m,regionH:null,regionW:null,imgResolver:b,displayForcedOnlyMode:k||!1,isd:d,errorHandler:f,previousISDState:h,enableRollUp:g||!1,currentISDState:{},
flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null,options:Object.assign({},n)||{}};b.options.colorAdjust&&(b.options.colorAdjust=p(b.options.colorAdjust));k=["region","body","div","p","span"];for(var D in k)k.hasOwnProperty(D)&&(f=k[D]+"BackgroundColorAdjust",b.options[f]&&(b.options[f]=p(b.options[f])));a.appendChild(c);for(var l in d.contents)d.contents.hasOwnProperty(l)&&A(b,c,d.contents[l],d);return b.currentISDState};var B=[new k("http://www.w3.org/ns/ttml#styling backgroundColor",
function(a,c,b,e){(b=(b=a.options[b.kind+"BackgroundColorAdjust"])&&b[e.toString()])&&(e=b);b=e[3];0!==b&&(void 0!=a.options.backgroundOpacityScale&&(b*=a.options.backgroundOpacityScale),c.style.backgroundColor="rgba("+e[0].toString()+","+e[1].toString()+","+e[2].toString()+","+(b/255).toString()+")")}),new k("http://www.w3.org/ns/ttml#styling color",function(a,c,b,e){b=a.options.colorOpacityScale||1;a=a.options.colorAdjust;void 0!=a&&(a=a[e.toString()])&&(e=a);c.style.color="rgba("+e[0].toString()+
","+e[1].toString()+","+e[2].toString()+","+(b*e[3]/255).toString()+")"}),new k("http://www.w3.org/ns/ttml#styling direction",function(a,c,b,e){c.style.direction=e}),new k("http://www.w3.org/ns/ttml#styling display",function(a,c,b,e){}),new k("http://www.w3.org/ns/ttml#styling displayAlign",function(a,c,b,e){c.style.display="flex";c.style.flexDirection="column";"before"===e?c.style.justifyContent="flex-start":"center"===e?c.style.justifyContent="center":"after"===e&&(c.style.justifyContent="flex-end")}),
new k("http://www.w3.org/ns/ttml#styling extent",function(a,c,b,e){a.regionH=e.h.toUsedLength(a.w,a.h);a.regionW=e.w.toUsedLength(a.w,a.h);var d=e=0;if(b=b.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])e=b[0].toUsedLength(a.w,a.h)+b[2].toUsedLength(a.w,a.h),d=b[1].toUsedLength(a.w,a.h)+b[3].toUsedLength(a.w,a.h);c.style.height=a.regionH-e+"px";c.style.width=a.regionW-d+"px"}),new k("http://www.w3.org/ns/ttml#styling fontFamily",function(a,c,b,e){b=[];a.options.fontFamily&&(e=a.options.fontFamily.split(","));
for(var d in e)e[d].hasOwnProperty(d)&&(e[d]=e[d].trim(),"monospaceSerif"===e[d]?(b.push("Courier New"),b.push('"Liberation Mono"'),b.push("Courier"),b.push("monospace")):"proportionalSansSerif"===e[d]||"default"===e[d]?(b.push("Arial"),b.push("Helvetica"),b.push('"Liberation Sans"'),b.push("sans-serif")):"monospace"===e[d]?b.push("monospace"):"sansSerif"===e[d]?b.push("sans-serif"):"serif"===e[d]?b.push("serif"):"monospaceSansSerif"===e[d]?(b.push("Consolas"),b.push("monospace")):"proportionalSerif"===
e[d]?b.push("serif"):b.push(e[d]));if(0<b.length){a=[b[0]];for(e=1;e<b.length;e++)-1==a.indexOf(b[e])&&a.push(b[e]);b=a}c.style.fontFamily=b.join(",")}),new k("http://www.w3.org/ns/ttml#styling shear",function(a,c,b,e){0!==e&&(b=-.9*e,c.style.transform="tb"===a.bpd?"skewX("+b+"deg)":"skewY("+b+"deg)")}),new k("http://www.w3.org/ns/ttml#styling fontSize",function(a,c,b,e){c.style.fontSize=e.multiply(e.toUsedLength(a.w,a.h),a.options.sizeAdjust)+"px"}),new k("http://www.w3.org/ns/ttml#styling fontStyle",
function(a,c,b,e){c.style.fontStyle=e}),new k("http://www.w3.org/ns/ttml#styling fontWeight",function(a,c,b,e){c.style.fontWeight=e}),new k("http://www.w3.org/ns/ttml#styling lineHeight",function(a,c,b,e){c.style.lineHeight="normal"===e?"normal":e.multiply(e.multiply(e.toUsedLength(a.w,a.h),a.options.sizeAdjust),a.options.lineHeightAdjust)+"px"}),new k("http://www.w3.org/ns/ttml#styling opacity",function(a,c,b,e){b=e;void 0!=a.options.regionOpacityScale&&(b*=a.options.regionOpacityScale);c.style.opacity=
b}),new k("http://www.w3.org/ns/ttml#styling origin",function(a,c,b,e){c.style.top=e.h.toUsedLength(a.w,a.h)+"px";c.style.left=e.w.toUsedLength(a.w,a.h)+"px"}),new k("http://www.w3.org/ns/ttml#styling overflow",function(a,c,b,e){c.style.overflow=e}),new k("http://www.w3.org/ns/ttml#styling padding",function(a,c,b,e){b=[];b[0]=e[0].toUsedLength(a.w,a.h)+"px";b[1]=e[3].toUsedLength(a.w,a.h)+"px";b[2]=e[2].toUsedLength(a.w,a.h)+"px";b[3]=e[1].toUsedLength(a.w,a.h)+"px";c.style.padding=b.join(" ")}),
new k("http://www.w3.org/ns/ttml#styling position",function(a,c,b,e){c.style.top=e.h.toUsedLength(a.w,a.h)+"px";c.style.left=e.w.toUsedLength(a.w,a.h)+"px"}),new k("http://www.w3.org/ns/ttml#styling rubyAlign",function(a,c,b,e){c.style.rubyAlign="spaceAround"===e?"space-around":"center"}),new k("http://www.w3.org/ns/ttml#styling rubyPosition",function(a,c,b,e){if("before"===e||"after"===e)c.parentElement.style[C]=z?e:"tb"===a.bpd?"before"===e?"over":"under":"rl"===a.bpd?"before"===e?"over":"under":
"before"===e?"under":"over"}),new k("http://www.w3.org/ns/ttml#styling showBackground",null),new k("http://www.w3.org/ns/ttml#styling textAlign",function(a,c,b,e){c.style.textAlign="start"===e?"rl"===a.ipd?"right":"left":"end"===e?"rl"===a.ipd?"left":"right":e}),new k("http://www.w3.org/ns/ttml#styling textDecoration",function(a,c,b,e){c.style.textDecoration=e.join(" ").replace("lineThrough","line-through")}),new k("http://www.w3.org/ns/ttml#styling textOutline",function(a,c,b,e){}),new k("http://www.w3.org/ns/ttml#styling textShadow",
function(a,c,b,e){b=b.styleAttrs[n.byName.textOutline.qname];var d=a.options.textOutline;if(d)if("none"===d)b=d;else{var k={};d=d.split(" ");if(0!==d.length&&2>=d.length){var f=l.parseColor(d[0]);k.color=f;null!==f&&d.shift();1===d.length&&(d=l.parseLength(d[0]))&&(k.thickness=d,b=k)}}if("none"===e&&"none"===b)c.style.textShadow="";else{k=[];"none"!==b&&(b="rgba("+b.color[0].toString()+","+b.color[1].toString()+","+b.color[2].toString()+","+(b.color[3]/255).toString()+")",k.push("1px 1px 1px "+b),
k.push("-1px 1px 1px "+b),k.push("1px -1px 1px "+b),k.push("-1px -1px 1px "+b));if("none"!==e)for(var h in e)e.hasOwnProperty(h)&&k.push(e[h].x_off.toUsedLength(a.w,a.h)+"px "+e[h].y_off.toUsedLength(a.w,a.h)+"px "+e[h].b_radius.toUsedLength(a.w,a.h)+"px rgba("+e[h].color[0].toString()+","+e[h].color[1].toString()+","+e[h].color[2].toString()+","+(e[h].color[3]/255).toString()+")");c.style.textShadow=k.join(",")}}),new k("http://www.w3.org/ns/ttml#styling textCombine",function(a,c,b,e){c.style.textCombineUpright=
e}),new k("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,c,b,e){}),new k("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,c,b,e){c.style.unicodeBidi="bidiOverride"===e?"bidi-override":e}),new k("http://www.w3.org/ns/ttml#styling visibility",function(a,c,b,e){c.style.visibility=e}),new k("http://www.w3.org/ns/ttml#styling wrapOption",function(a,c,b,e){c.style.whiteSpace="wrap"===e?"preserve"===b.space?"pre-wrap":"normal":"preserve"===b.space?"pre":"noWrap"}),new k("http://www.w3.org/ns/ttml#styling writingMode",
function(a,c,b,e){if("lrtb"===e||"lr"===e)c.style.writingMode="horizontal-tb";else if("rltb"===e||"rl"===e)c.style.writingMode="horizontal-tb";else if("tblr"===e)c.style.writingMode="vertical-lr";else if("tbrl"===e||"tb"===e)c.style.writingMode="vertical-rl"}),new k("http://www.w3.org/ns/ttml#styling zIndex",function(a,c,b,e){c.style.zIndex=e}),new k("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(a,c,b,e){a.displayForcedOnlyMode&&!1===e&&(c.style.visibility="hidden")})],
t;for(t in B)B.hasOwnProperty(t);var z="webkitRubyPosition"in window.getComputedStyle(document.documentElement),C=z?"webkitRubyPosition":"rubyPosition",J="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",y="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof p?this.imscHTML={}:p,"undefined"===typeof imscNames?g("./names"):
imscNames,"undefined"===typeof imscStyles?g("./styles"):imscStyles,"undefined"===typeof imscUtils?g("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7}],3:[function(g,t,p){(function(f,g,n,l){function p(k,f,g,D,t,J,y,d,m){if(f<y.begin||f>=y.end)return null;J="regionID"in y&&""!==y.regionID?y.regionID:J;if(null!==t&&J!==g.id&&(!("contents"in y)||"contents"in y&&0===y.contents.length||""!==J))return null;var b=new h(y);for(e in y.sets)!y.sets.hasOwnProperty(e)||f<y.sets[e].begin||f>=y.sets[e].end||
(b.styleAttrs[y.sets[e].qname]=y.sets[e].value);var e={};for(var v in b.styleAttrs)if(b.styleAttrs.hasOwnProperty(v)&&(e[v]=!0,"region"===b.kind&&v===n.byName.writingMode.qname&&!(n.byName.direction.qname in b.styleAttrs))){var B=b.styleAttrs[v];if("lrtb"===B||"lr"===B)b.styleAttrs[n.byName.direction.qname]="ltr";else if("rltb"===B||"rl"===B)b.styleAttrs[n.byName.direction.qname]="rtl"}if(null!==t)for(var z in n.all)if(n.all.hasOwnProperty(z))if(v=n.all[z],v.qname===n.byName.textDecoration.qname){B=
t.styleAttrs[v.qname];var r=b.styleAttrs[v.qname],u=[];void 0===r?u=B:-1===r.indexOf("none")?((-1===r.indexOf("noUnderline")&&-1!==B.indexOf("underline")||-1!==r.indexOf("underline"))&&u.push("underline"),(-1===r.indexOf("noLineThrough")&&-1!==B.indexOf("lineThrough")||-1!==r.indexOf("lineThrough"))&&u.push("lineThrough"),(-1===r.indexOf("noOverline")&&-1!==B.indexOf("overline")||-1!==r.indexOf("overline"))&&u.push("overline")):u.push("none");b.styleAttrs[v.qname]=u}else v.qname!==n.byName.fontSize.qname||
v.qname in b.styleAttrs||"span"!==b.kind||"textContainer"!==b.styleAttrs[n.byName.ruby.qname]?v.qname!==n.byName.fontSize.qname||v.qname in b.styleAttrs||"span"!==b.kind||"text"!==b.styleAttrs[n.byName.ruby.qname]?v.inherit&&v.qname in t.styleAttrs&&!(v.qname in b.styleAttrs)&&(b.styleAttrs[v.qname]=t.styleAttrs[v.qname]):(B=t.styleAttrs[n.byName.fontSize.qname],b.styleAttrs[v.qname]="textContainer"===t.styleAttrs[n.byName.ruby.qname]?B:new l.ComputedLength(.5*B.rw,.5*B.rh)):(B=t.styleAttrs[n.byName.fontSize.qname],
b.styleAttrs[v.qname]=new l.ComputedLength(.5*B.rw,.5*B.rh));for(var C in n.all)if(n.all.hasOwnProperty(C)&&(z=n.all[C],!(z.qname in b.styleAttrs||z.qname===n.byName.position.qname&&n.byName.origin.qname in b.styleAttrs||z.qname===n.byName.origin.qname&&n.byName.position.qname in b.styleAttrs)&&(v=k.head.styling.initials[z.qname]||z.initial,null!==v&&("region"===b.kind||!1===z.inherit&&null!==v))))if(v=z.parse(v),null!==v)b.styleAttrs[z.qname]=v,e[z.qname]=!0;else if(z="Invalid initial value for '"+
z.qname+"' on element '"+b.kind,d&&d.error&&d.error(z))throw z;for(var K in n.all)if(n.all.hasOwnProperty(K)&&(C=n.all[K],C.qname in e&&null!==C.compute))if(z=C.compute(k,t,b,b.styleAttrs[C.qname],m),null!==z)b.styleAttrs[C.qname]=z;else if(b.styleAttrs[C.qname]=C.compute(k,t,b,C.parse(C.initial),m),C="Style '"+C.qname+"' on element '"+b.kind+"' cannot be computed",d&&d.error&&d.error(C))throw C;if("none"===b.styleAttrs[n.byName.display.qname])return null;if(null===t)var I=null===D?[]:[D];else"contents"in
y&&(I=y.contents);for(var H in I)I.hasOwnProperty(H)&&(t=p(k,f,g,D,b,J,I[H],d,m),null!==t&&b.contents.push(t.element));for(var G in b.styleAttrs)b.styleAttrs.hasOwnProperty(G)&&(k=!1,"span"===b.kind&&(f=b.styleAttrs[n.byName.ruby.qname],(k=("container"===f||"textContainer"===f||"baseContainer"===f)&&-1!==M.indexOf(G))||(k="container"!==f&&G===n.byName.rubyAlign.qname),k||(k=!("textContainer"===f||"text"===f)&&G===n.byName.rubyPosition.qname)),k||(k=-1===n.byQName[G].applies.indexOf(b.kind)),k&&delete b.styleAttrs[G]);
G=b.styleAttrs[n.byName.ruby.qname];if("p"===b.kind||"span"===b.kind&&("textContainer"===G||"text"===G))G=[],a(b,G),A(G),c(b);return"div"===b.kind&&n.byName.backgroundImage.qname in b.styleAttrs||"br"===b.kind||"image"===b.kind||"contents"in b&&0<b.contents.length||"span"===b.kind&&null!==b.text||"region"===b.kind&&"always"===b.styleAttrs[n.byName.showBackground.qname]?{region_id:J,element:b}:null}function A(a){function c(a){return"br"===a.kind||/[\r\n\t ]$/.test(a.text)}function f(a){return"br"===
a.kind||"preserve"===a.space&&/^[\r\n]/.test(a.text)}for(var k,h=0;h<a.length;)if(k=a[h],"br"===k.kind||"preserve"===k.space)h++;else{var g=k.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(g)&&(0===h||c(a[h-1]))&&(g=g.substring(1));k.text=g;0===g.length?a.splice(h,1):h++}for(h=0;h<a.length;h++)k=a[h],"br"===k.kind||"preserve"===k.space?h++:/[ ]$/.test(k.text)&&(h===a.length-1||f(a[h+1]))&&(k.text=k.text.slice(0,-1))}function a(c,f){for(var k in c.contents)if(c.contents.hasOwnProperty(k)){var h=c.contents[k],
g=h.styleAttrs[n.byName.ruby.qname];if("span"!==h.kind||"textContainer"!==g&&"text"!==g)"contents"in h?a(h,f):("span"===h.kind&&0!==h.text.length||"br"===h.kind)&&f.push(h)}}function c(a){if("br"===a.kind)return!1;if("text"in a)return 0===a.text.length;if("contents"in a){for(var h=a.contents.length;h--;)c(a.contents[h])&&a.contents.splice(h,1);return 0===a.contents.length}}function D(a){this.contents=[];this.aspectRatio=a.aspectRatio;this.lang=a.lang}function h(a){this.kind=a.kind||"region";this.lang=
a.lang;a.id&&(this.id=a.id);this.styleAttrs={};for(var c in a.styleAttrs)a.styleAttrs.hasOwnProperty(c)&&(this.styleAttrs[c]=a.styleAttrs[c]);"src"in a&&(this.src=a.src);"type"in a&&(this.type=a.type);if("text"in a)this.text=a.text;else if("region"===this.kind||"contents"in a)this.contents=[];"space"in a&&(this.space=a.space)}f.generateISD=function(a,c,h){function f(a,b){function c(b){return!(a<b.begin||a>=b.end)}if(b.contents){var e={},h;for(h in b)b.hasOwnProperty(h)&&(e[h]=b[h]);e.contents=[];
b.contents.filter(c).forEach(function(b){b=f(a,b);b.regionID&&(d[b.regionID]=!0);null!==b&&e.contents.push(b)});return e}return b}var k=new D(a),g={},l={},d={};l=a.head.styling.initials[n.byName.showBackground.qname];var m=a.head.styling.initials[n.byName.backgroundColor.qname];for(A in a.head.layout.regions)if(a.head.layout.regions.hasOwnProperty(A)){var b=a.head.layout.regions[A],e=b.styleAttrs[n.byName.showBackground.qname]||l,M=b.styleAttrs[n.byName.backgroundColor.qname]||m;d[b.id]=("always"===
e||void 0===e)&&void 0!==M&&!(c<b.begin||c>=b.end)}a.body&&a.body.regionID&&(d[a.body.regionID]=!0);l=null!==a.body?f(c,a.body):null;void 0!==d[""]&&(d[""]=!0);for(var t in d)if(d[t]){var A=p(a,c,a.head.layout.regions[t],l,null,"",a.head.layout.regions[t],h,g);null!==A&&k.contents.push(A.element)}return k};var M=[n.byName.color.qname,n.byName.textCombine.qname,n.byName.textDecoration.qname,n.byName.textEmphasis.qname,n.byName.textOutline.qname,n.byName.textShadow.qname]})("undefined"===typeof p?this.imscISD=
{}:p,"undefined"===typeof imscNames?g("./names"):imscNames,"undefined"===typeof imscStyles?g("./styles"):imscStyles,"undefined"===typeof imscUtils?g("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7}],4:[function(g,t,p){p.generateISD=g("./isd").generateISD;p.fromXML=g("./doc").fromXML;p.renderHTML=g("./html").render},{"./doc":1,"./html":2,"./isd":3}],5:[function(g,t,p){g="undefined"===typeof p?this.imscNames={}:p;g.ns_tt="http://www.w3.org/ns/ttml";g.ns_tts="http://www.w3.org/ns/ttml#styling";
g.ns_ttp="http://www.w3.org/ns/ttml#parameter";g.ns_xml="http://www.w3.org/XML/1998/namespace";g.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";g.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";g.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";g.ns_ebutts="urn:ebu:tt:style";g.ttaf_map={"http://www.w3.org/2006/10/ttaf1":g.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":g.ns_tts,"http://www.w3.org/2006/10/ttaf1#parameter":g.ns_ttp}},{}],6:[function(g,t,p){(function(f,
g,n){function l(a,c,f,h,g,k,n,l){this.name=c;this.ns=a;this.qname=a+" "+c;this.inherit=g;this.animatable=k;this.initial=f;this.applies=h;this.parse=n;this.compute=l}f.all=[new l(g.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,n.parseColor,null),new l(g.ns_tts,"color","white",["span"],!0,!0,n.parseColor,null),new l(g.ns_tts,"direction","ltr",["p","span"],!0,!0,function(a){return a},null),new l(g.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(a){return a},
null),new l(g.ns_tts,"displayAlign","before",["region"],!1,!0,function(a){return a},null),new l(g.ns_tts,"extent","auto",["tt","region"],!1,!0,function(a){if("auto"===a)return a;var c=a.split(" ");if(2!==c.length)return null;a=n.parseLength(c[0]);return(c=n.parseLength(c[1]))&&a?{h:c,w:a}:null},function(a,c,f,h,g){if("auto"===h)c=new n.ComputedLength(0,1);else if(c=n.toComputedLength(h.h.value,h.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===c)return null;if("auto"===h)a=new n.ComputedLength(1,
0);else if(a=n.toComputedLength(h.w.value,h.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:c,w:a}}),new l(g.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(a){a=a.split(",");for(var c=[],f=0;f<a.length;f++)"'"!==a[f].charAt(0)&&'"'!==a[f].charAt(0)?"default"===a[f]?c.push("monospaceSerif"):c.push(a[f]):c.push(a[f]);return c},null),new l(g.ns_tts,"shear","0%",["p"],!0,!0,n.parseLength,function(a,c,f,h){if("%"===h.unit)a=100<Math.abs(h.value)?100*Math.sign(h.value):
h.value;else return null;return a}),new l(g.ns_tts,"fontSize","1c",["span","p"],!0,!0,n.parseLength,function(a,c,g,h,l){return n.toComputedLength(h.value,h.unit,null!==c?c.styleAttrs[f.byName.fontSize.qname]:a.cellLength.h,null!==c?c.styleAttrs[f.byName.fontSize.qname]:a.cellLength.h,a.cellLength.h,a.pxLength.h)}),new l(g.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(a){return a},null),new l(g.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(a){return a},null),new l(g.ns_tts,"lineHeight",
"normal",["p"],!0,!0,function(a){return"normal"===a?a:n.parseLength(a)},function(a,c,g,h,l){if("normal"===h)a=h;else if(a=n.toComputedLength(h.value,h.unit,g.styleAttrs[f.byName.fontSize.qname],g.styleAttrs[f.byName.fontSize.qname],a.cellLength.h,a.pxLength.h),null===a)return null;return a}),new l(g.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new l(g.ns_tts,"origin","auto",["region"],!1,!0,function(a){if("auto"===a)return a;var c=a.split(" ");if(2!==c.length)return null;a=n.parseLength(c[0]);
return(c=n.parseLength(c[1]))&&a?{h:c,w:a}:null},function(a,c,f,h,g){if("auto"===h)c=new n.ComputedLength(0,0);else if(c=n.toComputedLength(h.h.value,h.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===c)return null;if("auto"===h)a=new n.ComputedLength(0,0);else if(a=n.toComputedLength(h.w.value,h.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:c,w:a}}),new l(g.ns_tts,"overflow","hidden",["region"],!1,!0,function(a){return a},null),new l(g.ns_tts,"padding","0px",["region"],
!1,!0,function(a){a=a.split(" ");if(4<a.length)return null;for(var c=[],f=0;f<a.length;f++){var h=n.parseLength(a[f]);if(!h)return null;c.push(h)}return c},function(a,c,g,h,l){if(1===h.length)c=[h[0],h[0],h[0],h[0]];else if(2===h.length)c=[h[0],h[1],h[0],h[1]];else if(3===h.length)c=[h[0],h[1],h[2],h[1]];else if(4===h.length)c=[h[0],h[1],h[2],h[3]];else return null;h=g.styleAttrs[f.byName.writingMode.qname];if("lrtb"===h||"lr"===h)c=[c[0],c[3],c[2],c[1]];else if("rltb"===h||"rl"===h)c=[c[0],c[1],
c[2],c[3]];else if("tblr"===h)c=[c[3],c[0],c[1],c[2]];else if("tbrl"===h||"tb"===h)c=[c[3],c[2],c[1],c[0]];else return null;h=[];for(l=0;l<c.length;l++)if(0===c[l].value)h[l]=new n.ComputedLength(0,0);else if(h[l]=n.toComputedLength(c[l].value,c[l].unit,g.styleAttrs[f.byName.fontSize.qname],"0"===l||"2"===l?g.styleAttrs[f.byName.extent.qname].h:g.styleAttrs[f.byName.extent.qname].w,"0"===l||"2"===l?a.cellLength.h:a.cellLength.w,"0"===l||"2"===l?a.pxLength.h:a.pxLength.w),null===h[l])return null;return h}),
new l(g.ns_tts,"position","top left",["region"],!1,!0,function(a){return n.parsePosition(a)},function(a,c,g,h){c=n.toComputedLength(h.v.offset.value,h.v.offset.unit,null,new n.ComputedLength(-g.styleAttrs[f.byName.extent.qname].h.rw,a.dimensions.h.rh-g.styleAttrs[f.byName.extent.qname].h.rh),null,a.pxLength.h);if(null===c)return null;"bottom"===h.v.edge&&(c=new n.ComputedLength(-c.rw-g.styleAttrs[f.byName.extent.qname].h.rw,a.dimensions.h.rh-c.rh-g.styleAttrs[f.byName.extent.qname].h.rh));var l=n.toComputedLength(h.h.offset.value,
h.h.offset.unit,null,new n.ComputedLength(a.dimensions.w.rw-g.styleAttrs[f.byName.extent.qname].w.rw,-g.styleAttrs[f.byName.extent.qname].w.rh),null,a.pxLength.w);if(null===c)return null;"right"===h.h.edge&&(l=new n.ComputedLength(a.dimensions.w.rw-l.rw-g.styleAttrs[f.byName.extent.qname].w.rw,-l.rh-g.styleAttrs[f.byName.extent.qname].w.rh));return{h:c,w:l}}),new l(g.ns_tts,"ruby","none",["span"],!1,!0,function(a){return a},null),new l(g.ns_tts,"rubyAlign","center",["span"],!0,!0,function(a){return"center"!==
a&&"spaceAround"!==a?null:a},null),new l(g.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(a){return a},null),new l(g.ns_tts,"rubyReserve","none",["p"],!0,!0,function(a){var c=a.split(" ");a=[null,null];if(0===c.length||2<c.length||"none"!==c[0]&&"both"!==c[0]&&"after"!==c[0]&&"before"!==c[0]&&"outside"!==c[0])return null;a[0]=c[0];if(2===c.length&&"none"!==c[0])if(c=n.parseLength(c[1]))a[1]=c;else return null;return a},function(a,c,g,h,l){if("none"===h[0])return h;a=null===h[1]?new n.ComputedLength(.5*
g.styleAttrs[f.byName.fontSize.qname].rw,.5*g.styleAttrs[f.byName.fontSize.qname].rh):n.toComputedLength(h[1].value,h[1].unit,g.styleAttrs[f.byName.fontSize.qname],g.styleAttrs[f.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===a?null:[h[0],a]}),new l(g.ns_tts,"showBackground","whenActive",["region"],!1,!0,function(a){return a},null),new l(g.ns_tts,"textAlign","start",["p"],!0,!0,function(a){return a},function(a,c,f,h,g){return"left"===h?"start":"right"===h?"end":h}),new l(g.ns_tts,
"textCombine","none",["span"],!0,!0,function(a){return"none"===a||"all"===a?a:null},null),new l(g.ns_tts,"textDecoration","none",["span"],!0,!0,function(a){return a.split(" ")},null),new l(g.ns_tts,"textEmphasis","none",["span"],!0,!0,function(a){a=a.split(" ");for(var c={style:null,symbol:null,color:null,position:null},f=0;f<a.length;f++)if("none"===a[f]||"auto"===a[f])c.style=a[f];else if("filled"===a[f]||"open"===a[f])c.style=a[f];else if("circle"===a[f]||"dot"===a[f]||"sesame"===a[f])c.symbol=
a[f];else if("current"===a[f])c.color=a[f];else if("outside"===a[f]||"before"===a[f]||"after"===a[f])c.position=a[f];else if(c.color=n.parseColor(a[f]),null===c.color)return null;null==c.style&&null==c.symbol?c.style="auto":(c.symbol=c.symbol||"circle",c.style=c.style||"filled");c.position=c.position||"outside";c.color=c.color||"current";return c},null),new l(g.ns_tts,"textOutline","none",["span"],!0,!0,function(a){if("none"===a)return a;var c={};a=a.split(" ");if(0===a.length||2<a.length)return null;
var f=n.parseColor(a[0]);c.color=f;null!==f&&a.shift();if(1!==a.length)return null;a=n.parseLength(a[0]);if(!a)return null;c.thickness=a;return c},function(a,c,g,h,l){if("none"===h)return h;c={};c.color=null===h.color?g.styleAttrs[f.byName.color.qname]:h.color;c.thickness=n.toComputedLength(h.thickness.value,h.thickness.unit,g.styleAttrs[f.byName.fontSize.qname],g.styleAttrs[f.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===c.thickness?null:c}),new l(g.ns_tts,"textShadow","none",
["span"],!0,!0,n.parseTextShadow,function(a,c,g,h){if("none"===h)return h;c=[];for(var l in h)if(l.hasOwnProperty(h)){var k={};k.x_off=n.toComputedLength(h[l][0].value,h[l][0].unit,null,g.styleAttrs[f.byName.fontSize.qname],null,a.pxLength.w);if(null===k.x_off)return null;k.y_off=n.toComputedLength(h[l][1].value,h[l][1].unit,null,g.styleAttrs[f.byName.fontSize.qname],null,a.pxLength.h);if(null===k.y_off)return null;if(null===h[l][2])k.b_radius=0;else if(k.b_radius=n.toComputedLength(h[l][2].value,
h[l][2].unit,null,g.styleAttrs[f.byName.fontSize.qname],null,a.pxLength.h),null===k.b_radius)return null;k.color=null===h[l][3]?g.styleAttrs[f.byName.color.qname]:h[l][3];c.push(k)}return c}),new l(g.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(a){return a},null),new l(g.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(a){return a},null),new l(g.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(a){return a},null),new l(g.ns_tts,"writingMode","lrtb",["region"],
!1,!0,function(a){return a},null),new l(g.ns_tts,"zIndex","auto",["region"],!1,!0,function(a){"auto"!==a&&(a=parseInt(a),isNaN(a)&&(a=null));return a},null),new l(g.ns_ebutts,"linePadding","0c",["p"],!0,!1,n.parseLength,function(a,c,f,h,g){return n.toComputedLength(h.value,h.unit,null,null,a.cellLength.w,null)}),new l(g.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(a){return a},null),new l(g.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(a){return a},null),new l(g.ns_itts,"forcedDisplay",
"false",["body","div","p","region","span"],!0,!0,function(a){return"true"===a?!0:!1},null),new l(g.ns_itts,"fillLineGap","true",["p"],!0,!0,function(a){return"true"===a?!0:!1},null)];f.byQName={};for(var p in f.all)f.all.hasOwnProperty(p)&&(f.byQName[f.all[p].qname]=f.all[p]);f.byName={};for(var t in f.all)f.all.hasOwnProperty(t)&&(f.byName[f.all[t].name]=f.all[t])})("undefined"===typeof p?this.imscStyles={}:p,"undefined"===typeof imscNames?g("./names"):imscNames,"undefined"===typeof imscUtils?g("./utils"):
imscUtils)},{"./names":5,"./utils":7}],7:[function(g,t,p){(function(f){var g=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,n=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,l=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,p={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,
255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};f.parseColor=function(a){var c,f=null,h=p[a.toLowerCase()];void 0!==h?f=h:null!==(c=g.exec(a))?f=[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16),void 0!==c[4]?parseInt(c[4],16):255]:null!==(c=n.exec(a))?f=[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),255]:null!==(c=l.exec(a))&&(f=[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),parseInt(c[4])]);
return f};var t=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;f.parseLength=function(a){var c,f=null;null!==(c=t.exec(a))&&(f={value:parseFloat(c[1]),unit:c[2]});return f};f.parseTextShadow=function(a){a=a.split(",");for(var c=[],g=0;g<a.length;g++){var h=a[g].split(" ");if(1===h.length&&"none"===h[0])return"none";if(1<h.length&&5>h.length){var l=[null,null,null,null],k=f.parseLength(h.shift());if(null===k)return null;l[0]=k;k=f.parseLength(h.shift());if(null===k)return null;l[1]=k;if(0!==h.length&&
(k=f.parseLength(h[0]),null!==k&&(l[2]=k,h.shift()),0!==h.length)){h=f.parseColor(h[0]);if(null===h)return null;l[3]=h}c.push(l)}}return c};f.parsePosition=function(a){a=a.split(" ");var c=function(a){return"center"===a||"left"===a||"top"===a||"bottom"===a||"right"===a};if(4<a.length)return null;for(var g in a)if(a.hasOwnProperty(g)&&!c(a[g])){var h=f.parseLength(a[g]);if(null===h)return null;a[g]=h}g={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(h=0;h<
a.length;){var l=a[h++];if(c(l)){var k={value:0,unit:"%"};2!==a.length&&h<a.length&&!c(a[h])&&(k=a[h++]);"right"===l?(g.h.edge=l,g.h.offset=k):"bottom"===l?(g.v.edge=l,g.v.offset=k):"left"===l?g.h.offset=k:"top"===l&&(g.v.offset=k)}else if(1===a.length||2===a.length)1===h?g.h.offset=l:g.v.offset=l;else return null}return g};f.ComputedLength=function(a,c){this.rw=a;this.rh=c};f.ComputedLength.prototype.toUsedLength=function(a,c){return a*this.rw+c*this.rh};f.ComputedLength.prototype.multiply=function(a,
c){return c?a*c:a};f.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};f.toComputedLength=function(a,c,g,h,l,k){return"%"===c&&h?new f.ComputedLength(h.rw*a/100,h.rh*a/100):"em"===c&&g?new f.ComputedLength(g.rw*a,g.rh*a):"c"===c&&l?new f.ComputedLength(a*l.rw,a*l.rh):"px"===c&&k?new f.ComputedLength(a*k.rw,a*k.rh):"rh"===c?new f.ComputedLength(0,a/100):"rw"===c?new f.ComputedLength(a/100,0):null}})("undefined"===typeof p?this.imscUtils={}:p)},{}]},{},[4])(4)});
