var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(e,u){return Object.prototype.hasOwnProperty.call(e,u)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(e,u){for(var q=1;q<arguments.length;q++){var g=arguments[q];if(g)for(var z in g)$jscomp.owns(g,z)&&(e[z]=g[z])}return e};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,u,q){e!=Array.prototype&&e!=Object.prototype&&(e[u]=q.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(e,u,q,g){if(u){q=$jscomp.global;e=e.split(".");for(g=0;g<e.length-1;g++){var z=e[g];z in q||(q[z]={});q=q[z]}e=e[e.length-1];g=q[e];u=u(g);u!=g&&null!=u&&$jscomp.defineProperty(q,e,{configurable:!0,writable:!0,value:u})}};$jscomp.polyfill("Object.assign",function(e){return e||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.entries",function(e){return e?e:function(e){var q=[],g;for(g in e)$jscomp.owns(e,g)&&q.push([g,e[g]]);return q}},"es8","es3");
$jscomp.polyfill("Object.is",function(e){return e?e:function(e,q){return e===q?0!==e||1/e===1/q:e!==e&&q!==q}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(e){return e?e:function(e,q){var g=this;g instanceof String&&(g=String(g));var z=g.length;q=q||0;for(0>q&&(q=Math.max(q+z,0));q<z;q++){var m=g[q];if(m===e||Object.is(m,e))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(e,u,q){if(null==e)throw new TypeError("The 'this' value for String.prototype."+q+" must not be null or undefined");if(u instanceof RegExp)throw new TypeError("First argument to String.prototype."+q+" must not be a regular expression");return e+""};$jscomp.polyfill("String.prototype.includes",function(e){return e?e:function(e,q){return-1!==$jscomp.checkStringArgs(this,e,"includes").indexOf(e,q||0)}},"es6","es3");
$jscomp.polyfill("Math.sign",function(e){return e?e:function(e){e=Number(e);return 0===e||isNaN(e)?e:0<e?1:-1}},"es6","es3");
(function(e){"object"===typeof exports&&"undefined"!==typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=e()})(function(){return function(){function e(u,q,g){function z(l,N){if(!q[l]){if(!u[l]){var b="function"==typeof require&&require;if(!N&&b)return b(l,!0);if(m)return m(l,!0);N=Error("Cannot find module '"+l+"'");throw N.code="MODULE_NOT_FOUND",N;}N=
q[l]={exports:{}};u[l][0].call(N.exports,function(b){return z(u[l][1][b]||b)},N,N.exports,e,u,q,g)}return q[l].exports}for(var m="function"==typeof require&&require,l=0;l<g.length;l++)z(g[l]);return z}return e}()({1:[function(e,u,q){(function(e,q,m,l,u){function g(a,c){var d=a.styleAttrs&&a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===a.kind)!d&&c&&(a.styleAttrs||(a.styleAttrs={}),a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=c);else if(d&&delete a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],
a.contents)for(var b=0;b<a.contents.length;b++)g(a.contents[b],d||c)}function b(a){if("contents"in a){var c="styleAttrs"in a?a.styleAttrs[l.byName.ruby.qname]:null;c="span"===a.kind&&("container"===c||"textContainer"===c||"baseContainer"===c);for(var d=a.contents.length-1;0<=d;d--)!c||"styleAttrs"in a.contents[d]&&l.byName.ruby.qname in a.contents[d].styleAttrs?b(a.contents[d]):delete a.contents[d]}}function f(a,c,d,b){var y=b&&"seq"===b.timeContainer,p=0;b&&(p=y&&d?d.end:b.begin);c.begin=c.explicit_begin?
c.explicit_begin+p:p;d=c.begin;b=null;if("sets"in c)for(var k=0;k<c.sets.length;k++)f(a,c.sets[k],b,c),d="seq"===c.timeContainer?c.sets[k].end:Math.max(d,c.sets[k].end),b=c.sets[k];if(!("contents"in c))d=y?c.begin:Number.POSITIVE_INFINITY;else if("contents"in c)for(y=0;y<c.contents.length;y++)f(a,c.contents[y],b,c),d="seq"===c.timeContainer?c.contents[y].end:Math.max(d,c.contents[y].end),b=c.contents[y];c.end=null!==c.explicit_end&&null!==c.explicit_dur?Math.min(c.begin+c.explicit_dur,p+c.explicit_end):
null===c.explicit_end&&null!==c.explicit_dur?c.begin+c.explicit_dur:null!==c.explicit_end&&null===c.explicit_dur?p+c.explicit_end:d;delete c.explicit_begin;delete c.explicit_dur;delete c.explicit_end;a._registerEvent(c)}function G(a){this.node=a}function k(){this.events=[];this.head=new J;this.body=null}function J(){this.styling=new h;this.layout=new C}function h(){this.styles={};this.initials={}}function z(){this.styleRefs=this.styleAttrs=this.id=null}function W(){this.styleAttrs=null}function C(){this.regions=
{}}function w(a,c){this.kind="image";this.src=a;this.type=c}function P(a){this.id=a}function a(a){this.regionID=a}function p(a){this.styleAttrs=a}function d(a){this.sets=a}function c(a){this.contents=a}function x(a,c,d){this.explicit_begin=a;this.explicit_end=c;this.explicit_dur=d}function R(){this.kind="body"}function n(){this.kind="div"}function A(){this.kind="p"}function L(){this.kind="span"}function t(){this.kind="span"}function E(){this.kind="br"}function M(){}function H(){}function X(a){var c=
null;a&&(a=a.attributes["xml:id"]||a.attributes.id)&&(c=a.value||null);return c}function T(a){return a&&"style"in a.attributes?a.attributes.style.value.split(" "):[]}function S(a,c){var d={};if(null!==a)for(var b in a.attributes)if(a.attributes.hasOwnProperty(b)){var p=a.attributes[b].uri+" "+a.attributes[b].local,f=l.byQName[p];if(void 0!==f){var y=f.parse(a.attributes[b].value);null!==y?(d[p]=y,f===l.byName.zIndex&&K(c,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):
I(c,"Cannot parse styling attribute "+p+" --\x3e "+a.attributes[b].value)}}return d}function O(a,c,d){for(var b in a.attributes)if(a.attributes.hasOwnProperty(b)&&a.attributes[b].uri===c&&a.attributes[b].local===d)return a.attributes[b].value;return null}function ba(a,c){a=O(a,m.ns_tts,"extent");if(null===a)return null;var d=a.split(" ");if(2!==d.length)return K(c,"Malformed extent (ignoring)"),null;a=u.parseLength(d[0]);d=u.parseLength(d[1]);return d&&a?{h:d,w:a}:(K(c,"Malformed extent values (ignoring)"),
null)}function U(a,c,d){var b=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,p=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,f=/^(\d+(?:\.\d+)?)t$/,k=/^(\d+(?:\.\d+)?)ms$/,y=/^(\d+(?:\.\d+)?)s$/,h=/^(\d+(?:\.\d+)?)h$/,m=/^(\d+(?:\.\d+)?)m$/,B,n=null;null!==(B=/^(\d+(?:\.\d+)?)f$/.exec(d))?null!==c&&(n=parseFloat(B[1])/c):null!==(B=f.exec(d))?null!==a&&(n=parseFloat(B[1])/a):null!==(B=k.exec(d))?n=parseFloat(B[1])/1E3:null!==(B=y.exec(d))?n=parseFloat(B[1]):null!==(B=h.exec(d))?n=3600*parseFloat(B[1]):null!==(B=m.exec(d))?
n=60*parseFloat(B[1]):null!==(B=b.exec(d))?n=3600*parseInt(B[1])+60*parseInt(B[2])+parseFloat(B[3]):null!==(B=p.exec(d))&&null!==c&&(n=3600*parseInt(B[1])+60*parseInt(B[2])+parseInt(B[3])+(null===B[4]?0:parseInt(B[4])/c));return n}function Y(a,c,d){for(;0<c.styleRefs.length;){var b=c.styleRefs.pop();b in a.styles?(Y(a,a.styles[b],d),V(a.styles[b].styleAttrs,c.styleAttrs)):I(d,"Non-existant style id referenced")}}function Z(a,c,d,b){for(var p=c.length-1;0<=p;p--){var f=c[p];f in a.styles?V(a.styles[f].styleAttrs,
d):I(b,"Non-existant style id referenced")}}function V(a,c){for(var d in a)a.hasOwnProperty(d)&&(d in c||(c[d]=a[d]))}function K(a,c){if(a&&a.warn&&a.warn(c))throw c;}function I(a,c){if(a&&a.error&&a.error(c))throw c;}function D(a,c){a&&a.fatal&&a.fatal(c);throw c;}function aa(a,c){for(var d=0,b=a.length-1,p;d<=b;){p=Math.floor((d+b)/2);var f=a[p];if(f<c)d=p+1;else if(f>c)b=p-1;else return{found:!0,index:p}}return{found:!1,index:d}}e.fromXML=function(a,c,d,p){var y=q.parser(!0,{xmlns:!0}),r=[],e=
[],x=[],B=0,v=null;y.onclosetag=function(a){if(p&&"function"===typeof p.onclosetag)p.onclosetag(a);if(r[0]instanceof M)null!==v.head&&null!==v.head.styling&&Z(v.head.styling,r[0].styleRefs,r[0].styleAttrs,c),delete r[0].styleRefs;else if(r[0]instanceof h)for(var b in r[0].styles)r[0].styles.hasOwnProperty(b)&&Y(r[0],r[0].styles[b],c);else if(r[0]instanceof A||r[0]instanceof L){if(1<r[0].contents.length){a=[r[0].contents[0]];for(b=1;b<r[0].contents.length;b++)r[0].contents[b]instanceof t&&a[a.length-
1]instanceof t?a[a.length-1].text+=r[0].contents[b].text:a.push(r[0].contents[b]);r[0].contents=a}r[0]instanceof L&&1===r[0].contents.length&&r[0].contents[0]instanceof t&&(r[0].text=r[0].contents[0].text,delete r[0].contents)}else if(r[0]instanceof G)if(r[0].node.uri===m.ns_tt&&"metadata"===r[0].node.local)B--;else if(0<B&&d&&"onCloseTag"in d)d.onCloseTag();x.shift();e.shift();r.shift()};y.ontext=function(a){if(p&&"function"===typeof p.ontext)p.ontext(a);if(void 0!==r[0])if(r[0]instanceof L||r[0]instanceof
A){if(r[0]instanceof L){var b=r[0].styleAttrs[l.byName.ruby.qname];if("container"===b||"textContainer"===b||"baseContainer"===b)return}b=new t;b.initFromText(v,r[0],a,e[0],x[0],c);r[0].contents.push(b)}else if(r[0]instanceof G&&0<B&&d&&"onText"in d)d.onText(a)};y.onopentag=function(a){function b(a){m.ttaf_map[a.uri]&&(a.uri=m.ttaf_map[a.uri])}if(p&&"function"===typeof p.onopentag)p.onopentag(a);var f=a.attributes["xml:space"];f?x.unshift(f.value):0===x.length?x.unshift("default"):x.unshift(x[0]);
(f=a.attributes["xml:lang"])?e.unshift(f.value):0===e.length?e.unshift(""):e.unshift(e[0]);b(a);if(a.attributes)for(var y in a.attributes)a.attributes.hasOwnProperty(y)&&b(a.attributes[y]);if(a.uri===m.ns_tt)if("tt"===a.local)null!==v&&D(c,"Two <tt> elements at ("+this.line+","+this.column+")"),v=new k,v.initFromNode(a,e[0],c),r.unshift(v);else if("head"===a.local)r[0]instanceof k||D(c,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),r.unshift(v.head);else if("styling"===
a.local)r[0]instanceof J||D(c,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),r.unshift(v.head.styling);else if("style"===a.local)if(r[0]instanceof h){var g=new z;g.initFromNode(a,c);g.id?v.head.styling.styles[g.id]=g:I(c,"<style> element missing @id attribute");r.unshift(g)}else r[0]instanceof M?(g=new z,g.initFromNode(a,c),V(g.styleAttrs,r[0].styleAttrs),r.unshift(g)):D(c,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");
else if("initial"===a.local)if(r[0]instanceof h){y=new W;y.initFromNode(a,c);for(g in y.styleAttrs)y.styleAttrs.hasOwnProperty(g)&&(v.head.styling.initials[g]=y.styleAttrs[g]);r.unshift(y)}else D(c,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===a.local)r[0]instanceof J||D(c,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),r.unshift(v.head.layout);else if("region"===a.local)r[0]instanceof C||D(c,"Parent of <region> element is not <layout> at "+
this.line+","+this.column+")"),g=new M,g.initFromNode(v,a,e[0],c),!g.id||g.id in v.head.layout.regions?I(c,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):v.head.layout.regions[g.id]=g,r.unshift(g);else if("body"===a.local)r[0]instanceof k||D(c,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==v.body&&D(c,"Second <body> element at "+this.line+","+this.column+")"),g=new R,g.initFromNode(v,a,e[0],c),v.body=g,r.unshift(g);else if("div"===
a.local){r[0]instanceof n||r[0]instanceof R||D(c,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");g=new n;g.initFromNode(v,r[0],a,e[0],c);if(y=g.styleAttrs[l.byName.backgroundImage.qname])g.contents.push(new w(y)),delete g.styleAttrs[l.byName.backgroundImage.qname];r[0].contents.push(g);r.unshift(g)}else"image"===a.local?(r[0]instanceof n||D(c,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),g=new w,g.initFromNode(v,r[0],a,e[0],c),r[0].contents.push(g),
r.unshift(g)):"p"===a.local?(r[0]instanceof n||D(c,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),g=new A,g.initFromNode(v,r[0],a,e[0],c),r[0].contents.push(g),r.unshift(g)):"span"===a.local?(r[0]instanceof L||r[0]instanceof A||D(c,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),g=new L,g.initFromNode(v,r[0],a,e[0],x[0],c),r[0].contents.push(g),r.unshift(g)):"br"===a.local?(r[0]instanceof L||r[0]instanceof A||D(c,"Parent of <br> element is not <span> or <p> at "+
this.line+","+this.column+")"),g=new E,g.initFromNode(v,r[0],a,e[0],c),r[0].contents.push(g),r.unshift(g)):"set"===a.local?(r[0]instanceof L||r[0]instanceof A||r[0]instanceof n||r[0]instanceof R||r[0]instanceof M||r[0]instanceof E||D(c,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),g=new H,g.initFromNode(v,r[0],a,c),r[0].sets.push(g),r.unshift(g)):r.unshift(new G(a));else r.unshift(new G(a));if(r[0]instanceof G)if(a.uri===m.ns_tt&&"metadata"===a.local)B++;
else if(0<B&&d&&"onOpenTag"in d){g=[];for(var t in a.attributes)a.attributes.hasOwnProperty(t)&&(g[a.attributes[t].uri+" "+a.attributes[t].local]={uri:a.attributes[t].uri,local:a.attributes[t].local,value:a.attributes[t].value});d.onOpenTag(a.uri,a.local,g)}};y.write(a).close();delete v.head.styling.styles;a=!1;for(var Q in v.head.layout.regions)if(v.head.layout.regions.hasOwnProperty(Q)){a=!0;break}a||(Q=M.prototype.createDefaultRegion(v,c),v.head.layout.regions[Q.id]=Q);for(var F in v.head.layout.regions)v.head.layout.regions.hasOwnProperty(F)&&
f(v,v.head.layout.regions[F],null,null);v.body&&f(v,v.body,null,null);v.body&&b(v.body);v.body&&g(v.body);return v};k.prototype.initFromNode=function(a,c,d){var b=O(a,m.ns_ttp,"cellResolution"),p=15;var f=32;null!==b&&(b=/(\d+) (\d+)/.exec(b),null!==b?(f=parseInt(b[1]),p=parseInt(b[2])):K(d,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new u.ComputedLength(0,1/p),w:new u.ComputedLength(1/f,0)};p=O(a,m.ns_ttp,"frameRate");b=30;null!==p&&(f=/(\d+)/.exec(p),null!==
f?b=parseInt(f[1]):K(d,"Malformed frame rate attribute (using initial value instead)"));f=O(a,m.ns_ttp,"frameRateMultiplier");var k=1;null!==f&&(f=/(\d+) (\d+)/.exec(f),null!==f?k=parseInt(f[1])/parseInt(f[2]):K(d,"Malformed frame rate multiplier attribute (using initial value instead)"));b*=k;k=1;f=O(a,m.ns_ttp,"tickRate");null===f?null!==p&&(k=b):(f=/(\d+)/.exec(f),null!==f?k=parseInt(f[1]):K(d,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=b;this.tickRate=
k;f=O(a,m.ns_ittp,"aspectRatio");null===f&&(f=O(a,m.ns_ttp,"displayAspectRatio"));p=null;null!==f&&(b=/(\d+)\s+(\d+)/.exec(f),null!==b?(f=parseInt(b[1]),b=parseInt(b[2]),0!==f&&0!==b?p=f/b:I(d,"Illegal aspectRatio values (ignoring)")):I(d,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=p;p=O(a,m.ns_ttp,"timeBase");null!==p&&"media"!==p&&D(d,"Unsupported time base");a=ba(a,d);null===a?this.pxLength={h:null,w:null}:("px"===a.h.unit&&"px"===a.w.unit||D(d,"Extent on TT must be in px or absent"),
this.pxLength={h:new u.ComputedLength(0,1/a.h.value),w:new u.ComputedLength(1/a.w.value,0)});this.dimensions={h:new u.ComputedLength(0,1),w:new u.ComputedLength(1,0)};this.lang=c};k.prototype._registerEvent=function(a){if(!(a.end<=a.begin)){var c=aa(this.events,a.begin);c.found||this.events.splice(c.index,0,a.begin);a.end!==Number.POSITIVE_INFINITY&&(c=aa(this.events,a.end),c.found||this.events.splice(c.index,0,a.end))}};k.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-
1]]};k.prototype.getMediaTimeEvents=function(){return this.events};z.prototype.initFromNode=function(a,c){this.id=X(a);this.styleAttrs=S(a,c);this.styleRefs=T(a)};W.prototype.initFromNode=function(a,c){this.styleAttrs={};for(var d in a.attributes)!a.attributes.hasOwnProperty(d)||a.attributes[d].uri!==m.ns_itts&&a.attributes[d].uri!==m.ns_ebutts&&a.attributes[d].uri!==m.ns_tts||(this.styleAttrs[a.attributes[d].uri+" "+a.attributes[d].local]=a.attributes[d].value)};w.prototype.initFromNode=function(c,
b,f,k,g){(this.src="src"in f.attributes?f.attributes.src.value:null)||I(g,"Invalid image@src attribute");(this.type="type"in f.attributes?f.attributes.type.value:null)||I(g,"Invalid image@type attribute");p.prototype.initFromNode.call(this,c,b,f,g);x.prototype.initFromNode.call(this,c,b,f,g);d.prototype.initFromNode.call(this,c,b,f,g);a.prototype.initFromNode.call(this,c,b,f,g);this.lang=k};P.prototype.initFromNode=function(a,c,d,b){this.id=X(d)};a.prototype.initFromNode=function(a,c,d,b){if(c=d&&
"region"in d.attributes?d.attributes.region.value:"")if(a.head.layout.regions[c])this.regionID=c;else{var f;for(f in a.head.layout.regions)if(a.head.layout.regions.hasOwnProperty(f)&&a.head.layout.regions[f].isDefaultRegion){var p=a.head.layout.regions[f];break}p||(p=M.prototype.createDefaultRegion(a,b),a.head.layout.regions[p.id]=p);I(b,"Cannot find specified region: "+c)}};p.prototype.initFromNode=function(a,c,d,b){this.styleAttrs=S(d,b);null!==a.head&&null!==a.head.styling&&Z(a.head.styling,T(d),
this.styleAttrs,b)};d.prototype.initFromNode=function(a,c,d,b){this.sets=[]};c.prototype.initFromNode=function(a,c,d,b){this.contents=[]};x.prototype.initFromNode=function(a,c,d,b){c=null;d&&"begin"in d.attributes&&(c=U(a.tickRate,a.effectiveFrameRate,d.attributes.begin.value),null===c&&K(b,"Malformed begin value "+d.attributes.begin.value+" (using 0)"));var f=null;d&&"dur"in d.attributes&&(f=U(a.tickRate,a.effectiveFrameRate,d.attributes.dur.value),null===f&&K(b,"Malformed dur value "+d.attributes.dur.value+
" (ignoring)"));var p=null;d&&"end"in d.attributes&&(p=U(a.tickRate,a.effectiveFrameRate,d.attributes.end.value),null===p&&K(b,"Malformed end value (ignoring)"));this.explicit_begin=c;this.explicit_end=p;this.explicit_dur=f;(a=d&&"timeContainer"in d.attributes?d.attributes.timeContainer.value:null)&&"par"!==a?"seq"===a?b="seq":(I(b,"Illegal value of timeContainer (assuming 'par')"),b="par"):b="par";this.timeContainer=b};R.prototype.initFromNode=function(b,f,k,g){p.prototype.initFromNode.call(this,
b,null,f,g);x.prototype.initFromNode.call(this,b,null,f,g);d.prototype.initFromNode.call(this,b,null,f,g);a.prototype.initFromNode.call(this,b,null,f,g);c.prototype.initFromNode.call(this,b,null,f,g);this.lang=k};n.prototype.initFromNode=function(b,f,k,g,h){p.prototype.initFromNode.call(this,b,f,k,h);x.prototype.initFromNode.call(this,b,f,k,h);d.prototype.initFromNode.call(this,b,f,k,h);a.prototype.initFromNode.call(this,b,f,k,h);c.prototype.initFromNode.call(this,b,f,k,h);this.lang=g};A.prototype.initFromNode=
function(b,f,k,g,h){p.prototype.initFromNode.call(this,b,f,k,h);x.prototype.initFromNode.call(this,b,f,k,h);d.prototype.initFromNode.call(this,b,f,k,h);a.prototype.initFromNode.call(this,b,f,k,h);c.prototype.initFromNode.call(this,b,f,k,h);this.lang=g};L.prototype.initFromNode=function(b,f,k,g,h,n){p.prototype.initFromNode.call(this,b,f,k,n);x.prototype.initFromNode.call(this,b,f,k,n);d.prototype.initFromNode.call(this,b,f,k,n);a.prototype.initFromNode.call(this,b,f,k,n);c.prototype.initFromNode.call(this,
b,f,k,n);this.space=h;this.lang=g};t.prototype.initFromText=function(a,c,d,b,f,p){x.prototype.initFromNode.call(this,a,c,null,p);this.text=d;this.space=f;this.lang=b};E.prototype.initFromNode=function(c,d,b,f,p){a.prototype.initFromNode.call(this,c,d,b,p);x.prototype.initFromNode.call(this,c,d,b,p);this.lang=f};M.prototype.createDefaultRegion=function(a,c){var d=new M;d.id="";p.prototype.initFromNode.call(d,a,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",value:"after",
prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",ebutts:"urn:ebu:tt:style",
ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},c);d.sets=[];x.call(d,0,Number.POSITIVE_INFINITY,null);this.lang=a.xmllang;d.isDefaultRegion=!0;return d};M.prototype.initFromNode=function(a,c,b,f){P.prototype.initFromNode.call(this,
a,null,c,f);x.prototype.initFromNode.call(this,a,null,c,f);d.prototype.initFromNode.call(this,a,null,c,f);this.styleAttrs=S(c,f);this.styleRefs=T(c);this.lang=b};H.prototype.initFromNode=function(a,c,d,b){x.prototype.initFromNode.call(this,a,c,d,b);a=S(d,b);this.value=this.qname=null;for(var f in a)if(a.hasOwnProperty(f)){if(this.qname){I(b,"More than one style specified on set");break}this.qname=f;this.value=a[f]}}})("undefined"===typeof q?this.imscDoc={}:q,"undefined"===typeof sax?e("sax"):sax,
"undefined"===typeof imscNames?e("./names"):imscNames,"undefined"===typeof imscStyles?e("./styles"):imscStyles,"undefined"===typeof imscUtils?e("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7,sax:void 0}],2:[function(e,u,q){(function(g,e,m,l){function q(a){var b={};a=Object.entries(a);for(var d in a)if(a.hasOwnProperty(d)){var c=l.parseColor(a[d][0]),f=l.parseColor(a[d][1]);c&&f&&(b[c.toString()]=f)}return b}function z(a,p,d,c){if("region"===d.kind){var g=document.createElement("div");
g.style.position="absolute"}else if("body"===d.kind)g=document.createElement("div");else if("div"===d.kind)g=document.createElement("div");else if("image"===d.kind){if(g=document.createElement("img"),null!==a.imgResolver&&null!==d.src){var h=a.imgResolver(d.src,g);h&&(g.src=h);g.height=a.regionH;g.width=a.regionW}}else if("p"===d.kind)g=document.createElement("p");else if("span"===d.kind)if("container"===d.styleAttrs[m.byName.ruby.qname])g=document.createElement("ruby"),a.ruby=!0;else if("base"===
d.styleAttrs[m.byName.ruby.qname])g=document.createElement("rb");else if("text"===d.styleAttrs[m.byName.ruby.qname])g=document.createElement("rt");else if("baseContainer"===d.styleAttrs[m.byName.ruby.qname])g=document.createElement("rbc");else if("textContainer"===d.styleAttrs[m.byName.ruby.qname])g=document.createElement("rtc");else{if("delimiter"===d.styleAttrs[m.byName.ruby.qname])return;g=document.createElement("span")}else"br"===d.kind&&(g=document.createElement("br"));if(g){!d.lang||"region"!==
d.kind&&d.lang===c.lang||(g.lang=d.lang);p.appendChild(g);g.style.margin="0";if("region"===d.kind)if(p=d.styleAttrs[m.byName.writingMode.qname],"lrtb"===p||"lr"===p)a.ipd="lr",a.bpd="tb";else if("rltb"===p||"rl"===p)a.ipd="rl",a.bpd="tb";else if("tblr"===p)a.ipd="tb",a.bpd="lr";else{if("tbrl"===p||"tb"===p)a.ipd="tb",a.bpd="rl"}else"p"===d.kind&&"tb"===a.bpd&&(a.ipd="ltr"===d.styleAttrs[m.byName.direction.qname]?"lr":"rl");for(p=0;p<F.length;p++)c=F[p],h=d.styleAttrs[c.qname],void 0!==h&&null!==c.map&&
c.map(a,g,d,h);p=g;(c=d.styleAttrs[m.byName.linePadding.qname])&&!c.isZero()&&(h=c.multiply(c.toUsedLength(a.w,a.h),a.options.sizeAdjust),0<h&&(h=Math.ceil(h)+"px","tb"===a.bpd?(p.style.paddingLeft=h,p.style.paddingRight=h):(p.style.paddingTop=h,p.style.paddingBottom=h),a.removePaddingElement=p,a.lp=c));(c=d.styleAttrs[m.byName.multiRowAlign.qname])&&"auto"!==c&&(p=document.createElement("span"),p.style.display="inline-block",p.style.textAlign=c,g.appendChild(p),a.mra=c);(c=d.styleAttrs[m.byName.rubyReserve.qname])&&
"none"!==c[0]&&(a.rubyReserve=c);d.styleAttrs[m.byName.fillLineGap.qname]&&(a.flg=!0);if("span"===d.kind&&d.text)if((c=d.styleAttrs[m.byName.textEmphasis.qname])&&"none"!==c.style&&(a.textEmphasis=!0),m.byName.textCombine.qname in d.styleAttrs&&"all"===d.styleAttrs[m.byName.textCombine.qname])g.textContent=d.text,c&&J(a,g,d,c);else{h="";for(var n=0;n<d.text.length;n++){h+=d.text.charAt(n);var e=d.text.charCodeAt(n);if(55296>e||56319<e||n===d.text.length-1)e=document.createElement("span"),e.textContent=
h,c&&J(a,e,d,c),g.appendChild(e),h="",e._isd_element=d}}if("contents"in d)for(c=0;c<d.contents.length;c++)z(a,p,d.contents[c],d);c=[];if("p"===d.kind){k(a,p,c,null);if(a.rubyReserve){for(h=0;h<c.length;h++){n=document.createElement("ruby");e=document.createElement("rb");e.textContent="\u200b";n.appendChild(e);var l=a.rubyReserve[1].toUsedLength(a.w,a.h)+"px";if("both"===a.rubyReserve[0]||"outside"===a.rubyReserve[0]&&1==c.length){e=document.createElement("rtc");e.style[C]=u?"after":"under";e.textContent=
"\u200b";e.style.fontSize=l;var t=document.createElement("rtc");t.style[C]=u?"before":"over";t.textContent="\u200b";t.style.fontSize=l;n.appendChild(e);n.appendChild(t)}else e=document.createElement("rtc"),e.textContent="\u200b",e.style.fontSize=l,e.style[C]="after"===a.rubyReserve[0]||"outside"===a.rubyReserve[0]&&0<h?u?"after":"tb"===a.bpd||"rl"===a.bpd?"under":"over":u?"before":"tb"===a.bpd||"rl"===a.bpd?"over":"under",n.appendChild(e);e=null;for(t=0;t<c[h].rbc.length;t++)if("ruby"===c[h].rbc[t].localName){e=
c[h].rbc[t];for(t=0;t<e.style.length;t++)n.style.setProperty(e.style.item(t),e.style.getPropertyValue(e.style.item(t)));break}e=e||c[h].elements[0].node;e.parentElement.insertBefore(n,e)}a.rubyReserve=null}if(a.ruby||a.rubyReserve){for(h=0;h<c.length;h++)for(n=0;n<c[h].rbc.length;n++)c[h].rbc[n].style[C]||(c[h].rbc[n].style[C]=u?0===h?"before":"after":"tb"===a.bpd?0===h?"over":"under":"rl"===a.bpd?0===h?"over":"under":0===h?"under":"over");a.ruby=null}if(a.textEmphasis){for(h=0;h<c.length;h++)for(n=
0;n<c[h].te.length;n++)c[h].te[n].style[P]&&"none"!==c[h].te[n].style[P]||(c[h].te[n].style[P]="tb"===a.bpd?0===h?"left over":"left under":"rl"===a.bpd?0===h?"right under":"left under":0===h?"left under":"right under");a.textEmphasis=null}if(a.mra){for(h=0;h<c.length-1;h++)e=c[h].elements.length,0!==e&&!1===c[h].br&&(n=document.createElement("br"),e=c[h].elements[e-1].node,e.parentElement.insertBefore(n,e.nextSibling));a.mra=null}if(a.lp){h=a.lp.multiply(a.lp.toUsedLength(a.w,a.h),a.options.sizeAdjust);
if(null!==c)for(n=0;n<c.length;n++)if(e=Math.ceil(h)+"px",t="-"+Math.ceil(h)+"px",0!==c[n].elements.length){l=c[n].elements[c[n].start_elem];var q=c[n].elements[c[n].end_elem];if(l===q){var w=l.node.getBoundingClientRect();if(0==w.width||0==w.height)continue}"lr"===a.ipd?(l.node.style.marginLeft=t,l.node.style.paddingLeft=e):"rl"===a.ipd?(l.node.style.paddingRight=e,l.node.style.marginRight=t):"tb"===a.ipd&&(l.node.style.paddingTop=e,l.node.style.marginTop=t);"lr"===a.ipd?(q.node.style.marginRight=
t,q.node.style.paddingRight=e):"rl"===a.ipd?(q.node.style.paddingLeft=e,q.node.style.marginLeft=t):"tb"===a.ipd&&(q.node.style.paddingBottom=e,q.node.style.marginBottom=t)}"tb"===a.bpd?(a.removePaddingElement.style.paddingLeft=0,a.removePaddingElement.style.paddingRight=0):(a.removePaddingElement.style.paddingTop=0,a.removePaddingElement.style.paddingBottom=0);a.lp=null}for(h=0;h<c.length;h++)for(n=c[h],e=1;e<n.elements.length;){t=n.elements[e-1].node;l=n.elements[e].node;if("SPAN"===t.tagName&&"SPAN"===
l.tagName&&t._isd_element===l._isd_element){t.textContent+=l.textContent;for(q=0;q<l.style.length;q++)if(w=l.style[q],0<=w.indexOf("border")||0<=w.indexOf("padding")||0<=w.indexOf("margin"))t.style[w]=l.style[w];l.parentElement.removeChild(l);t=!0}else t=!1;t?n.elements.splice(e,1):e++}h=[];for(t=0;t<c.length;t++)for(l=0;l<c[t].elements.length;l++)if(n=c[t].elements[l].node,e=b(n,h,!1))n.style.backgroundColor=e;for(n=0;n<h.length;n++)h[n].style.backgroundColor="";if(a.flg){n=G(p.getBoundingClientRect(),
a);h=n.before;n=n.after;e=Math.sign(n-h);for(t=0;t<=c.length;t++){l=0===t?Math.round(h):t===c.length?Math.round(n):Math.round((c[t-1].after+c[t].before)/2);if(0<t&&c[t-1])for(w=0;w<c[t-1].elements.length;w++){var H=c[t-1].elements[w];q=e*(l-H.after)+"px";"lr"===a.bpd?H.node.style.paddingRight=q:"rl"===a.bpd?H.node.style.paddingLeft=q:"tb"===a.bpd&&(H.node.style.paddingBottom=q)}if(t<c.length)for(w=0;w<c[t].elements.length;w++)H=c[t].elements[w],q=e*(H.before-l)+"px","lr"===a.bpd?H.node.style.paddingLeft=
q:"rl"===a.bpd?H.node.style.paddingRight=q:"tb"===a.bpd&&(H.node.style.paddingTop=q)}a.flg=null}}"region"===d.kind&&"tb"===a.bpd&&a.enableRollUp&&0<d.contents.length&&"after"===d.styleAttrs[m.byName.displayAlign.qname]&&(k(a,p,c,null),d=new f(""===d.id?"_":d.id,c),a.currentISDState[d.id]=d,a.previousISDState&&d.id in a.previousISDState&&0<a.previousISDState[d.id].plist.length&&1<d.plist.length&&d.plist[d.plist.length-2].text===a.previousISDState[d.id].plist[a.previousISDState[d.id].plist.length-1].text&&
(a=g.firstElementChild,d=d.plist[d.plist.length-1].after-d.plist[d.plist.length-1].before,a.style.bottom="-"+d+"px",a.style.transition="transform 0.4s",a.style.position="relative",a.style.transform="translateY(-"+d+"px)"))}else if(a=a.errorHandler,d="Error processing ISD element kind: "+d.kind,a&&a.error&&a.error(d))throw d;}function b(a,f,d){if(a.style.backgroundColor)return d&&!f.includes(a)&&f.push(a),a.style.backgroundColor;if("SPAN"===a.parentElement.nodeName)return b(a.parentElement,f,!0)}function f(a,
b){this.id=a;this.plist=b}function G(a,b){var d={before:null,after:null,start:null,end:null};"tb"===b.bpd?(d.before=a.top,d.after=a.bottom,"lr"===b.ipd?(d.start=a.left,d.end=a.right):(d.start=a.right,d.end=a.left)):"lr"===b.bpd?(d.before=a.left,d.after=a.right,d.start=a.top,d.end=a.bottom):"rl"===b.bpd&&(d.before=a.right,d.after=a.left,d.start=a.top,d.end=a.bottom);return d}function k(a,b,d,c){if("rt"!==b.localName&&"rtc"!==b.localName)if(c=b.style.backgroundColor||c,0===b.childElementCount)if("span"===
b.localName||"rb"===b.localName){var f=b.getBoundingClientRect();a=G(f,a);if(!(f=0===d.length)){f=a.before;var h=a.after,g=d[d.length-1].before,p=d[d.length-1].after;f=!(h<p&&f>g||p<=h&&g>=f)}f?d.push({before:a.before,after:a.after,start:a.start,end:a.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(f=Math.sign(a.after-a.before),h=Math.sign(a.end-a.start),0>f*(a.before-d[d.length-1].before)&&(d[d.length-1].before=a.before),0<f*(a.after-d[d.length-1].after)&&(d[d.length-1].after=
a.after),0>h*(a.start-d[d.length-1].start)&&(d[d.length-1].start=a.start,d[d.length-1].start_elem=d[d.length-1].elements.length),0<h*(a.end-d[d.length-1].end)&&(d[d.length-1].end=a.end,d[d.length-1].end_elem=d[d.length-1].elements.length));d[d.length-1].text+=b.textContent;d[d.length-1].elements.push({node:b,bgcolor:c,before:a.before,after:a.after})}else"br"===b.localName&&0!==d.length&&(d[d.length-1].br=!0);else for(b=b.firstChild;b;)b.nodeType===Node.ELEMENT_NODE&&(k(a,b,d,c),"ruby"===b.localName||
"rtc"===b.localName?0<d.length&&d[d.length-1].rbc.push(b):"span"===b.localName&&b.style[w]&&"none"!==b.style[w]&&0<d.length&&d[d.length-1].te.push(b)),b=b.nextSibling}function J(a,b,d,c){"none"!==c.style&&(b.style[w]="auto"===c.style?"filled":c.style+" "+c.symbol,"before"===c.position||"after"===c.position)&&(b.style[P]="tb"===a.bpd?"before"===c.position?"left over":"left under":"rl"===a.bpd?"before"===c.position?"right under":"left under":"before"===c.position?"left under":"right under")}function h(a,
b){this.qname=a;this.map=b}g.render=function(a,b,d,c,f,h,g,k,e,m){c=c||b.clientHeight;var p=f||b.clientWidth;null!==a.aspectRatio&&(f=c*a.aspectRatio,f>p?c=Math.round(p/a.aspectRatio):p=f);f=document.createElement("div");f.style.position="relative";f.style.width=p+"px";f.style.height=c+"px";f.style.margin="auto";f.style.top=0;f.style.bottom=0;f.style.left=0;f.style.right=0;f.style.zIndex=0;d={h:c,w:p,regionH:null,regionW:null,imgResolver:d,displayForcedOnlyMode:h||!1,isd:a,errorHandler:g,previousISDState:k,
enableRollUp:e||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null,options:Object.assign({},m)||{}};d.options.colorAdjust&&(d.options.colorAdjust=q(d.options.colorAdjust));h=["region","body","div","p","span"];for(var n in h)h.hasOwnProperty(n)&&(g=h[n]+"BackgroundColorAdjust",d.options[g]&&(d.options[g]=q(d.options[g])));b.appendChild(f);if("contents"in a)for(b=0;b<a.contents.length;b++)z(d,f,a.contents[b],a);return d.currentISDState};var F=
[new h("http://www.w3.org/ns/ttml#styling backgroundColor",function(a,b,d,c){(d=(d=a.options[d.kind+"BackgroundColorAdjust"])&&d[c.toString()])&&(c=d);d=c[3];0!==d&&(void 0!=a.options.backgroundOpacityScale&&(d*=a.options.backgroundOpacityScale),b.style.backgroundColor="rgba("+c[0].toString()+","+c[1].toString()+","+c[2].toString()+","+(d/255).toString()+")")}),new h("http://www.w3.org/ns/ttml#styling color",function(a,b,d,c){d=a.options.colorOpacityScale||1;a=a.options.colorAdjust;void 0!=a&&(a=
a[c.toString()])&&(c=a);b.style.color="rgba("+c[0].toString()+","+c[1].toString()+","+c[2].toString()+","+(d*c[3]/255).toString()+")"}),new h("http://www.w3.org/ns/ttml#styling direction",function(a,b,d,c){b.style.direction=c}),new h("http://www.w3.org/ns/ttml#styling display",function(a,b,d,c){}),new h("http://www.w3.org/ns/ttml#styling displayAlign",function(a,b,d,c){b.style.display="flex";b.style.flexDirection="column";"before"===c?b.style.justifyContent="flex-start":"center"===c?b.style.justifyContent=
"center":"after"===c&&(b.style.justifyContent="flex-end")}),new h("http://www.w3.org/ns/ttml#styling extent",function(a,b,d,c){a.regionH=c.h.toUsedLength(a.w,a.h);a.regionW=c.w.toUsedLength(a.w,a.h);var f=c=0;if(d=d.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])c=d[0].toUsedLength(a.w,a.h)+d[2].toUsedLength(a.w,a.h),f=d[1].toUsedLength(a.w,a.h)+d[3].toUsedLength(a.w,a.h);b.style.height=a.regionH-c+"px";b.style.width=a.regionW-f+"px"}),new h("http://www.w3.org/ns/ttml#styling fontFamily",
function(a,b,d,c){d=[];a.options.fontFamily&&(c=a.options.fontFamily.split(","));for(a=0;a<c.length;a++)c[a]=c[a].trim(),"monospaceSerif"===c[a]?(d.push("Courier New"),d.push('"Liberation Mono"'),d.push("Courier"),d.push("monospace")):"proportionalSansSerif"===c[a]||"default"===c[a]?(d.push("Arial"),d.push("Helvetica"),d.push('"Liberation Sans"'),d.push("sans-serif")):"monospace"===c[a]?d.push("monospace"):"sansSerif"===c[a]?d.push("sans-serif"):"serif"===c[a]?d.push("serif"):"monospaceSansSerif"===
c[a]?(d.push("Consolas"),d.push("monospace")):"proportionalSerif"===c[a]?d.push("serif"):d.push(c[a]);if(0<d.length){c=[d[0]];for(a=1;a<d.length;a++)-1==c.indexOf(d[a])&&c.push(d[a]);d=c}b.style.fontFamily=d.join(",")}),new h("http://www.w3.org/ns/ttml#styling shear",function(a,b,d,c){0!==c&&(d=-.9*c,b.style.transform="tb"===a.bpd?"skewX("+d+"deg)":"skewY("+d+"deg)")}),new h("http://www.w3.org/ns/ttml#styling fontSize",function(a,b,d,c){b.style.fontSize=c.multiply(c.toUsedLength(a.w,a.h),a.options.sizeAdjust)+
"px"}),new h("http://www.w3.org/ns/ttml#styling fontStyle",function(a,b,d,c){b.style.fontStyle=c}),new h("http://www.w3.org/ns/ttml#styling fontWeight",function(a,b,d,c){b.style.fontWeight=c}),new h("http://www.w3.org/ns/ttml#styling lineHeight",function(a,b,d,c){b.style.lineHeight="normal"===c?"normal":c.multiply(c.multiply(c.toUsedLength(a.w,a.h),a.options.sizeAdjust),a.options.lineHeightAdjust)+"px"}),new h("http://www.w3.org/ns/ttml#styling opacity",function(a,b,d,c){d=c;void 0!=a.options.regionOpacityScale&&
(d*=a.options.regionOpacityScale);b.style.opacity=d}),new h("http://www.w3.org/ns/ttml#styling origin",function(a,b,d,c){b.style.top=c.h.toUsedLength(a.w,a.h)+"px";b.style.left=c.w.toUsedLength(a.w,a.h)+"px"}),new h("http://www.w3.org/ns/ttml#styling overflow",function(a,b,d,c){b.style.overflow=c}),new h("http://www.w3.org/ns/ttml#styling padding",function(a,b,d,c){d=[];d[0]=c[0].toUsedLength(a.w,a.h)+"px";d[1]=c[3].toUsedLength(a.w,a.h)+"px";d[2]=c[2].toUsedLength(a.w,a.h)+"px";d[3]=c[1].toUsedLength(a.w,
a.h)+"px";b.style.padding=d.join(" ")}),new h("http://www.w3.org/ns/ttml#styling position",function(a,b,d,c){b.style.top=c.h.toUsedLength(a.w,a.h)+"px";b.style.left=c.w.toUsedLength(a.w,a.h)+"px"}),new h("http://www.w3.org/ns/ttml#styling rubyAlign",function(a,b,d,c){b.style.rubyAlign="spaceAround"===c?"space-around":"center"}),new h("http://www.w3.org/ns/ttml#styling rubyPosition",function(a,b,d,c){if("before"===c||"after"===c)b.parentElement.style[C]=u?c:"tb"===a.bpd?"before"===c?"over":"under":
"rl"===a.bpd?"before"===c?"over":"under":"before"===c?"under":"over"}),new h("http://www.w3.org/ns/ttml#styling showBackground",null),new h("http://www.w3.org/ns/ttml#styling textAlign",function(a,b,d,c){b.style.textAlign="start"===c?"rl"===a.ipd?"right":"left":"end"===c?"rl"===a.ipd?"left":"right":c}),new h("http://www.w3.org/ns/ttml#styling textDecoration",function(a,b,d,c){b.style.textDecoration=c.join(" ").replace("lineThrough","line-through")}),new h("http://www.w3.org/ns/ttml#styling textOutline",
function(a,b,d,c){}),new h("http://www.w3.org/ns/ttml#styling textShadow",function(a,b,d,c){d=d.styleAttrs[m.byName.textOutline.qname];var f=a.options.textOutline;if(f)if("none"===f)d=f;else{var h={};f=f.split(" ");if(0!==f.length&&2>=f.length){var g=l.parseColor(f[0]);h.color=g;null!==g&&f.shift();1===f.length&&(f=l.parseLength(f[0]))&&(h.thickness=f,d=h)}}if("none"===c&&"none"===d)b.style.textShadow="";else{h=[];"none"!==d&&(d="rgba("+d.color[0].toString()+","+d.color[1].toString()+","+d.color[2].toString()+
","+(d.color[3]/255).toString()+")",h.push("1px 1px 1px "+d),h.push("-1px 1px 1px "+d),h.push("1px -1px 1px "+d),h.push("-1px -1px 1px "+d));if("none"!==c)for(d=0;d<c.length;d++)h.push(c[d].x_off.toUsedLength(a.w,a.h)+"px "+c[d].y_off.toUsedLength(a.w,a.h)+"px "+c[d].b_radius.toUsedLength(a.w,a.h)+"px rgba("+c[d].color[0].toString()+","+c[d].color[1].toString()+","+c[d].color[2].toString()+","+(c[d].color[3]/255).toString()+")");b.style.textShadow=h.join(",")}}),new h("http://www.w3.org/ns/ttml#styling textCombine",
function(a,b,d,c){b.style.textCombineUpright=c}),new h("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,b,d,c){}),new h("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,b,d,c){b.style.unicodeBidi="bidiOverride"===c?"bidi-override":c}),new h("http://www.w3.org/ns/ttml#styling visibility",function(a,b,d,c){b.style.visibility=c}),new h("http://www.w3.org/ns/ttml#styling wrapOption",function(a,b,d,c){b.style.whiteSpace="wrap"===c?"preserve"===d.space?"pre-wrap":"normal":"preserve"===
d.space?"pre":"noWrap"}),new h("http://www.w3.org/ns/ttml#styling writingMode",function(a,b,d,c){if("lrtb"===c||"lr"===c)b.style.writingMode="horizontal-tb";else if("rltb"===c||"rl"===c)b.style.writingMode="horizontal-tb";else if("tblr"===c)b.style.writingMode="vertical-lr";else if("tbrl"===c||"tb"===c)b.style.writingMode="vertical-rl"}),new h("http://www.w3.org/ns/ttml#styling zIndex",function(a,b,d,c){b.style.zIndex=c}),new h("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(a,
b,d,c){a.displayForcedOnlyMode&&!1===c&&(b.style.visibility="hidden")})];for(g=0;g<F.length;g++);var u="webkitRubyPosition"in window.getComputedStyle(document.documentElement),C=u?"webkitRubyPosition":"rubyPosition",w="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",P="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof q?
this.imscHTML={}:q,"undefined"===typeof imscNames?e("./names"):imscNames,"undefined"===typeof imscStyles?e("./styles"):imscStyles,"undefined"===typeof imscUtils?e("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7}],3:[function(e,u,q){(function(g,e,m,l){function q(h,g,e,G,w,u,a,p,d){if(g<a.begin||g>=a.end)return null;u="regionID"in a&&""!==a.regionID?a.regionID:u;if(null!==w&&u!==e.id&&(!("contents"in a)||"contents"in a&&0===a.contents.length||""!==u))return null;var c=new k(a);if("sets"in
a)for(var x=0;x<a.sets.length;x++)g<a.sets[x].begin||g>=a.sets[x].end||(c.styleAttrs[a.sets[x].qname]=a.sets[x].value);x={};for(var C in c.styleAttrs)if(c.styleAttrs.hasOwnProperty(C)&&(x[C]=!0,"region"===c.kind&&C===m.byName.writingMode.qname&&!(m.byName.direction.qname in c.styleAttrs))){var n=c.styleAttrs[C];if("lrtb"===n||"lr"===n)c.styleAttrs[m.byName.direction.qname]="ltr";else if("rltb"===n||"rl"===n)c.styleAttrs[m.byName.direction.qname]="rtl"}if(null!==w)for(C=0;C<m.all.length;C++)if(n=m.all[C],
n.qname===m.byName.textDecoration.qname){var A=w.styleAttrs[n.qname],F=c.styleAttrs[n.qname],t=[];void 0===F?t=A:-1===F.indexOf("none")?((-1===F.indexOf("noUnderline")&&-1!==A.indexOf("underline")||-1!==F.indexOf("underline"))&&t.push("underline"),(-1===F.indexOf("noLineThrough")&&-1!==A.indexOf("lineThrough")||-1!==F.indexOf("lineThrough"))&&t.push("lineThrough"),(-1===F.indexOf("noOverline")&&-1!==A.indexOf("overline")||-1!==F.indexOf("overline"))&&t.push("overline")):t.push("none");c.styleAttrs[n.qname]=
t}else n.qname!==m.byName.fontSize.qname||n.qname in c.styleAttrs||"span"!==c.kind||"textContainer"!==c.styleAttrs[m.byName.ruby.qname]?n.qname!==m.byName.fontSize.qname||n.qname in c.styleAttrs||"span"!==c.kind||"text"!==c.styleAttrs[m.byName.ruby.qname]?n.inherit&&n.qname in w.styleAttrs&&!(n.qname in c.styleAttrs)&&(c.styleAttrs[n.qname]=w.styleAttrs[n.qname]):(A=w.styleAttrs[m.byName.fontSize.qname],c.styleAttrs[n.qname]="textContainer"===w.styleAttrs[m.byName.ruby.qname]?A:new l.ComputedLength(.5*
A.rw,.5*A.rh)):(A=w.styleAttrs[m.byName.fontSize.qname],c.styleAttrs[n.qname]=new l.ComputedLength(.5*A.rw,.5*A.rh));for(C=0;C<m.all.length;C++)if(n=m.all[C],!(n.qname in c.styleAttrs||n.qname===m.byName.position.qname&&m.byName.origin.qname in c.styleAttrs||n.qname===m.byName.origin.qname&&m.byName.position.qname in c.styleAttrs)&&(A=h.head.styling.initials[n.qname]||n.initial,null!==A&&("region"===c.kind||!1===n.inherit&&null!==A)))if(A=n.parse(A),null!==A)c.styleAttrs[n.qname]=A,x[n.qname]=!0;
else if(n="Invalid initial value for '"+n.qname+"' on element '"+c.kind,p&&p.error&&p.error(n))throw n;for(C=0;C<m.all.length;C++)if(n=m.all[C],n.qname in x&&null!==n.compute)if(A=n.compute(h,w,c,c.styleAttrs[n.qname],d),null!==A)c.styleAttrs[n.qname]=A;else if(c.styleAttrs[n.qname]=n.compute(h,w,c,n.parse(n.initial),d),n="Style '"+n.qname+"' on element '"+c.kind+"' cannot be computed",p&&p.error&&p.error(n))throw n;if("none"===c.styleAttrs[m.byName.display.qname])return null;x=null;null===w?x=null===
G?[]:[G]:"contents"in a&&(x=a.contents);for(w=0;null!==x&&w<x.length;w++)a=q(h,g,e,G,c,u,x[w],p,d),null!==a&&c.contents.push(a.element);for(var E in c.styleAttrs)c.styleAttrs.hasOwnProperty(E)&&(h=!1,"span"===c.kind&&(g=c.styleAttrs[m.byName.ruby.qname],(h=("container"===g||"textContainer"===g||"baseContainer"===g)&&-1!==J.indexOf(E))||(h="container"!==g&&E===m.byName.rubyAlign.qname),h||(h=!("textContainer"===g||"text"===g)&&E===m.byName.rubyPosition.qname)),h||(g=m.byQName[E],"applies"in g&&(h=
-1===g.applies.indexOf(c.kind))),h&&delete c.styleAttrs[E]);E=c.styleAttrs[m.byName.ruby.qname];if("p"===c.kind||"span"===c.kind&&("textContainer"===E||"text"===E))E=[],b(c,E),z(E),f(c);return"div"===c.kind&&m.byName.backgroundImage.qname in c.styleAttrs||"br"===c.kind||"image"===c.kind||"contents"in c&&0<c.contents.length||"span"===c.kind&&null!==c.text||"region"===c.kind&&"always"===c.styleAttrs[m.byName.showBackground.qname]?{region_id:u,element:c}:null}function z(b){function f(a){return"br"===
a.kind||/[\r\n\t ]$/.test(a.text)}function h(a){return"br"===a.kind||"preserve"===a.space&&/^[\r\n]/.test(a.text)}for(var g,k=0;k<b.length;)if(g=b[k],"br"===g.kind||"preserve"===g.space)k++;else{var e=g.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(e)&&(0===k||f(b[k-1]))&&(e=e.substring(1));g.text=e;0===e.length?b.splice(k,1):k++}for(k=0;k<b.length;k++)g=b[k],"br"===g.kind||"preserve"===g.space?k++:/[ ]$/.test(g.text)&&(k===b.length-1||h(b[k+1]))&&(g.text=g.text.slice(0,-1))}function b(f,g){if("contents"in
f)for(var h=0;h<f.contents.length;h++){var k=f.contents[h],e=k.styleAttrs[m.byName.ruby.qname];if("span"!==k.kind||"textContainer"!==e&&"text"!==e)"contents"in k?b(k,g):("span"===k.kind&&0!==k.text.length||"br"===k.kind)&&g.push(k)}}function f(b){if("br"===b.kind)return!1;if("text"in b)return 0===b.text.length;if("contents"in b){for(var g=b.contents.length;g--;)f(b.contents[g])&&b.contents.splice(g,1);return 0===b.contents.length}}function G(b){this.contents=[];this.aspectRatio=b.aspectRatio;this.lang=
b.lang}function k(b){this.kind=b.kind||"region";this.lang=b.lang;b.id&&(this.id=b.id);this.styleAttrs={};for(var f in b.styleAttrs)b.styleAttrs.hasOwnProperty(f)&&(this.styleAttrs[f]=b.styleAttrs[f]);"src"in b&&(this.src=b.src);"type"in b&&(this.type=b.type);if("text"in b)this.text=b.text;else if("region"===this.kind||"contents"in b)this.contents=[];"space"in b&&(this.space=b.space)}g.generateISD=function(b,f,g){function k(a,b){function c(b){return!(a<b.begin||a>=b.end)}if(b.contents){var d={},f;
for(f in b)b.hasOwnProperty(f)&&(d[f]=b[f]);d.contents=[];b.contents.filter(c).forEach(function(b){b=k(a,b);b.regionID&&(p[b.regionID]=!0);null!==b&&d.contents.push(b)});return d}return b}var e=new G(b),h={},a={},p={};a=b.head.styling.initials[m.byName.showBackground.qname];var d=b.head.styling.initials[m.byName.backgroundColor.qname];for(z in b.head.layout.regions)if(b.head.layout.regions.hasOwnProperty(z)){var c=b.head.layout.regions[z],l=c.styleAttrs[m.byName.showBackground.qname]||a,J=c.styleAttrs[m.byName.backgroundColor.qname]||
d;p[c.id]=("always"===l||void 0===l)&&void 0!==J&&!(f<c.begin||f>=c.end)}b.body&&b.body.regionID&&(p[b.body.regionID]=!0);a=null!==b.body?k(f,b.body):null;void 0!==p[""]&&(p[""]=!0);for(var n in p)if(p[n]){var z=q(b,f,b.head.layout.regions[n],a,null,"",b.head.layout.regions[n],g,h);null!==z&&e.contents.push(z.element)}return e};var J=[m.byName.color.qname,m.byName.textCombine.qname,m.byName.textDecoration.qname,m.byName.textEmphasis.qname,m.byName.textOutline.qname,m.byName.textShadow.qname]})("undefined"===
typeof q?this.imscISD={}:q,"undefined"===typeof imscNames?e("./names"):imscNames,"undefined"===typeof imscStyles?e("./styles"):imscStyles,"undefined"===typeof imscUtils?e("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7}],4:[function(e,u,q){q.generateISD=e("./isd").generateISD;q.fromXML=e("./doc").fromXML;q.renderHTML=e("./html").render},{"./doc":1,"./html":2,"./isd":3}],5:[function(e,u,q){e="undefined"===typeof q?this.imscNames={}:q;e.ns_tt="http://www.w3.org/ns/ttml";e.ns_tts="http://www.w3.org/ns/ttml#styling";
e.ns_ttp="http://www.w3.org/ns/ttml#parameter";e.ns_xml="http://www.w3.org/XML/1998/namespace";e.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";e.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";e.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";e.ns_ebutts="urn:ebu:tt:style";e.ttaf_map={"http://www.w3.org/2006/10/ttaf1":e.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":e.ns_tts,"http://www.w3.org/2006/10/ttaf1#parameter":e.ns_ttp}},{}],6:[function(e,u,q){(function(g,
e,m){function l(b,f,g,e,m,h,l,q){this.name=f;this.ns=b;this.qname=b+" "+f;this.inherit=m;this.animatable=h;this.initial=g;this.applies=e;this.parse=l;this.compute=q}g.all=[new l(e.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,m.parseColor,null),new l(e.ns_tts,"color","white",["span"],!0,!0,m.parseColor,null),new l(e.ns_tts,"direction","ltr",["p","span"],!0,!0,function(b){return b},null),new l(e.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(b){return b},
null),new l(e.ns_tts,"displayAlign","before",["region"],!1,!0,function(b){return b},null),new l(e.ns_tts,"extent","auto",["tt","region"],!1,!0,function(b){if("auto"===b)return b;var f=b.split(" ");if(2!==f.length)return null;b=m.parseLength(f[0]);return(f=m.parseLength(f[1]))&&b?{h:f,w:b}:null},function(b,f,g,e,l){if("auto"===e)f=new m.ComputedLength(0,1);else if(f=m.toComputedLength(e.h.value,e.h.unit,null,b.dimensions.h,null,b.pxLength.h),null===f)return null;if("auto"===e)b=new m.ComputedLength(1,
0);else if(b=m.toComputedLength(e.w.value,e.w.unit,null,b.dimensions.w,null,b.pxLength.w),null===b)return null;return{h:f,w:b}}),new l(e.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(b){b=b.split(",");for(var f=[],g=0;g<b.length;g++)"'"!==b[g].charAt(0)&&'"'!==b[g].charAt(0)?"default"===b[g]?f.push("monospaceSerif"):f.push(b[g]):f.push(b[g]);return f},null),new l(e.ns_tts,"shear","0%",["p"],!0,!0,m.parseLength,function(b,f,g,e){if("%"===e.unit)b=100<Math.abs(e.value)?100*Math.sign(e.value):
e.value;else return null;return b}),new l(e.ns_tts,"fontSize","1c",["span","p"],!0,!0,m.parseLength,function(b,f,e,k,l){return m.toComputedLength(k.value,k.unit,null!==f?f.styleAttrs[g.byName.fontSize.qname]:b.cellLength.h,null!==f?f.styleAttrs[g.byName.fontSize.qname]:b.cellLength.h,b.cellLength.h,b.pxLength.h)}),new l(e.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(b){return b},null),new l(e.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(b){return b},null),new l(e.ns_tts,"lineHeight",
"normal",["p"],!0,!0,function(b){return"normal"===b?b:m.parseLength(b)},function(b,f,e,k,l){if("normal"===k)b=k;else if(b=m.toComputedLength(k.value,k.unit,e.styleAttrs[g.byName.fontSize.qname],e.styleAttrs[g.byName.fontSize.qname],b.cellLength.h,b.pxLength.h),null===b)return null;return b}),new l(e.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new l(e.ns_tts,"origin","auto",["region"],!1,!0,function(b){if("auto"===b)return b;var f=b.split(" ");if(2!==f.length)return null;b=m.parseLength(f[0]);
return(f=m.parseLength(f[1]))&&b?{h:f,w:b}:null},function(b,f,g,e,l){if("auto"===e)f=new m.ComputedLength(0,0);else if(f=m.toComputedLength(e.h.value,e.h.unit,null,b.dimensions.h,null,b.pxLength.h),null===f)return null;if("auto"===e)b=new m.ComputedLength(0,0);else if(b=m.toComputedLength(e.w.value,e.w.unit,null,b.dimensions.w,null,b.pxLength.w),null===b)return null;return{h:f,w:b}}),new l(e.ns_tts,"overflow","hidden",["region"],!1,!0,function(b){return b},null),new l(e.ns_tts,"padding","0px",["region"],
!1,!0,function(b){b=b.split(" ");if(4<b.length)return null;for(var f=[],e=0;e<b.length;e++){var g=m.parseLength(b[e]);if(!g)return null;f.push(g)}return f},function(b,f,e,k,l){if(1===k.length)f=[k[0],k[0],k[0],k[0]];else if(2===k.length)f=[k[0],k[1],k[0],k[1]];else if(3===k.length)f=[k[0],k[1],k[2],k[1]];else if(4===k.length)f=[k[0],k[1],k[2],k[3]];else return null;k=e.styleAttrs[g.byName.writingMode.qname];if("lrtb"===k||"lr"===k)f=[f[0],f[3],f[2],f[1]];else if("rltb"===k||"rl"===k)f=[f[0],f[1],
f[2],f[3]];else if("tblr"===k)f=[f[3],f[0],f[1],f[2]];else if("tbrl"===k||"tb"===k)f=[f[3],f[2],f[1],f[0]];else return null;k=[];for(l=0;l<f.length;l++)if(0===f[l].value)k[l]=new m.ComputedLength(0,0);else if(k[l]=m.toComputedLength(f[l].value,f[l].unit,e.styleAttrs[g.byName.fontSize.qname],0===l||2===l?e.styleAttrs[g.byName.extent.qname].h:e.styleAttrs[g.byName.extent.qname].w,0===l||2===l?b.cellLength.h:b.cellLength.w,0===l||2===l?b.pxLength.h:b.pxLength.w),null===k[l])return null;return k}),new l(e.ns_tts,
"position","top left",["region"],!1,!0,function(b){return m.parsePosition(b)},function(b,f,e,k){f=m.toComputedLength(k.v.offset.value,k.v.offset.unit,null,new m.ComputedLength(-e.styleAttrs[g.byName.extent.qname].h.rw,b.dimensions.h.rh-e.styleAttrs[g.byName.extent.qname].h.rh),null,b.pxLength.h);if(null===f)return null;"bottom"===k.v.edge&&(f=new m.ComputedLength(-f.rw-e.styleAttrs[g.byName.extent.qname].h.rw,b.dimensions.h.rh-f.rh-e.styleAttrs[g.byName.extent.qname].h.rh));var l=m.toComputedLength(k.h.offset.value,
k.h.offset.unit,null,new m.ComputedLength(b.dimensions.w.rw-e.styleAttrs[g.byName.extent.qname].w.rw,-e.styleAttrs[g.byName.extent.qname].w.rh),null,b.pxLength.w);if(null===f)return null;"right"===k.h.edge&&(l=new m.ComputedLength(b.dimensions.w.rw-l.rw-e.styleAttrs[g.byName.extent.qname].w.rw,-l.rh-e.styleAttrs[g.byName.extent.qname].w.rh));return{h:f,w:l}}),new l(e.ns_tts,"ruby","none",["span"],!1,!0,function(b){return b},null),new l(e.ns_tts,"rubyAlign","center",["span"],!0,!0,function(b){return"center"!==
b&&"spaceAround"!==b?null:b},null),new l(e.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(b){return b},null),new l(e.ns_tts,"rubyReserve","none",["p"],!0,!0,function(b){var f=b.split(" ");b=[null,null];if(0===f.length||2<f.length||"none"!==f[0]&&"both"!==f[0]&&"after"!==f[0]&&"before"!==f[0]&&"outside"!==f[0])return null;b[0]=f[0];if(2===f.length&&"none"!==f[0])if(f=m.parseLength(f[1]))b[1]=f;else return null;return b},function(b,f,e,k,l){if("none"===k[0])return k;b=null===k[1]?new m.ComputedLength(.5*
e.styleAttrs[g.byName.fontSize.qname].rw,.5*e.styleAttrs[g.byName.fontSize.qname].rh):m.toComputedLength(k[1].value,k[1].unit,e.styleAttrs[g.byName.fontSize.qname],e.styleAttrs[g.byName.fontSize.qname],b.cellLength.h,b.pxLength.h);return null===b?null:[k[0],b]}),new l(e.ns_tts,"showBackground","whenActive",["region"],!1,!0,function(b){return b},null),new l(e.ns_tts,"textAlign","start",["p"],!0,!0,function(b){return b},function(b,f,e,g,m){return"left"===g?"start":"right"===g?"end":g}),new l(e.ns_tts,
"textCombine","none",["span"],!0,!0,function(b){return"none"===b||"all"===b?b:null},null),new l(e.ns_tts,"textDecoration","none",["span"],!0,!0,function(b){return b.split(" ")},null),new l(e.ns_tts,"textEmphasis","none",["span"],!0,!0,function(b){b=b.split(" ");for(var f={style:null,symbol:null,color:null,position:null},e=0;e<b.length;e++)if("none"===b[e]||"auto"===b[e])f.style=b[e];else if("filled"===b[e]||"open"===b[e])f.style=b[e];else if("circle"===b[e]||"dot"===b[e]||"sesame"===b[e])f.symbol=
b[e];else if("current"===b[e])f.color=b[e];else if("outside"===b[e]||"before"===b[e]||"after"===b[e])f.position=b[e];else if(f.color=m.parseColor(b[e]),null===f.color)return null;null==f.style&&null==f.symbol?f.style="auto":(f.symbol=f.symbol||"circle",f.style=f.style||"filled");f.position=f.position||"outside";f.color=f.color||"current";return f},null),new l(e.ns_tts,"textOutline","none",["span"],!0,!0,function(b){if("none"===b)return b;var f={};b=b.split(" ");if(0===b.length||2<b.length)return null;
var e=m.parseColor(b[0]);f.color=e;null!==e&&b.shift();if(1!==b.length)return null;b=m.parseLength(b[0]);if(!b)return null;f.thickness=b;return f},function(b,f,e,k,l){if("none"===k)return k;f={};f.color=null===k.color?e.styleAttrs[g.byName.color.qname]:k.color;f.thickness=m.toComputedLength(k.thickness.value,k.thickness.unit,e.styleAttrs[g.byName.fontSize.qname],e.styleAttrs[g.byName.fontSize.qname],b.cellLength.h,b.pxLength.h);return null===f.thickness?null:f}),new l(e.ns_tts,"textShadow","none",
["span"],!0,!0,m.parseTextShadow,function(b,f,e,k){if("none"===k)return k;f=[];for(var l=0;l<k.length;l++){var h={};h.x_off=m.toComputedLength(k[l][0].value,k[l][0].unit,null,e.styleAttrs[g.byName.fontSize.qname],null,b.pxLength.w);if(null===h.x_off)return null;h.y_off=m.toComputedLength(k[l][1].value,k[l][1].unit,null,e.styleAttrs[g.byName.fontSize.qname],null,b.pxLength.h);if(null===h.y_off)return null;if(null===k[l][2])h.b_radius=0;else if(h.b_radius=m.toComputedLength(k[l][2].value,k[l][2].unit,
null,e.styleAttrs[g.byName.fontSize.qname],null,b.pxLength.h),null===h.b_radius)return null;h.color=null===k[l][3]?e.styleAttrs[g.byName.color.qname]:k[l][3];f.push(h)}return f}),new l(e.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(b){return b},null),new l(e.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(b){return b},null),new l(e.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(b){return b},null),new l(e.ns_tts,"writingMode","lrtb",["region"],!1,!0,
function(b){return b},null),new l(e.ns_tts,"zIndex","auto",["region"],!1,!0,function(b){"auto"!==b&&(b=parseInt(b),isNaN(b)&&(b=null));return b},null),new l(e.ns_ebutts,"linePadding","0c",["p"],!0,!1,m.parseLength,function(b,f,e,g,l){return m.toComputedLength(g.value,g.unit,null,null,b.cellLength.w,null)}),new l(e.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(b){return b},null),new l(e.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(b){return b},null),new l(e.ns_itts,"forcedDisplay",
"false",["body","div","p","region","span"],!0,!0,function(b){return"true"===b?!0:!1},null),new l(e.ns_itts,"fillLineGap","true",["p"],!0,!0,function(b){return"true"===b?!0:!1},null)];g.byQName={};for(var q in g.all)g.all.hasOwnProperty(q)&&(g.byQName[g.all[q].qname]=g.all[q]);g.byName={};for(var u in g.all)g.all.hasOwnProperty(u)&&(g.byName[g.all[u].name]=g.all[u])})("undefined"===typeof q?this.imscStyles={}:q,"undefined"===typeof imscNames?e("./names"):imscNames,"undefined"===typeof imscUtils?e("./utils"):
imscUtils)},{"./names":5,"./utils":7}],7:[function(e,u,q){(function(e){var g=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,m=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,l=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,q={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,
255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(b){var f,e=null,k=q[b.toLowerCase()];void 0!==k?e=k:null!==(f=g.exec(b))?e=[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16),void 0!==f[4]?parseInt(f[4],16):255]:null!==(f=m.exec(b))?e=[parseInt(f[1]),parseInt(f[2]),parseInt(f[3]),255]:null!==(f=l.exec(b))&&(e=[parseInt(f[1]),parseInt(f[2]),parseInt(f[3]),parseInt(f[4])]);
return e};var u=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;e.parseLength=function(b){var f,e=null;null!==(f=u.exec(b))&&(e={value:parseFloat(f[1]),unit:f[2]});return e};e.parseTextShadow=function(b){b=b.match(/([^\(,\)]|\([^\)]+\))+/g);for(var f=[],g=0;g<b.length;g++){var k=b[g].split(" ");if(1===k.length&&"none"===k[0])return"none";if(1<k.length&&5>k.length){var l=[null,null,null,null],h=e.parseLength(k.shift());if(null===h)return null;l[0]=h;h=e.parseLength(k.shift());if(null===h)return null;
l[1]=h;if(0!==k.length&&(h=e.parseLength(k[0]),null!==h&&(l[2]=h,k.shift()),0!==k.length)){k=e.parseColor(k[0]);if(null===k)return null;l[3]=k}f.push(l)}}return f};e.parsePosition=function(b){b=b.split(" ");var f=function(b){return"center"===b||"left"===b||"top"===b||"bottom"===b||"right"===b};if(4<b.length)return null;for(var g=0;g<b.length;g++)if(!f(b[g])){var k=e.parseLength(b[g]);if(null===k)return null;b[g]=k}g={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};
for(k=0;k<b.length;){var l=b[k++];if(f(l)){var h={value:0,unit:"%"};2!==b.length&&k<b.length&&!f(b[k])&&(h=b[k++]);"right"===l?(g.h.edge=l,g.h.offset=h):"bottom"===l?(g.v.edge=l,g.v.offset=h):"left"===l?g.h.offset=h:"top"===l&&(g.v.offset=h)}else if(1===b.length||2===b.length)1===k?g.h.offset=l:g.v.offset=l;else return null}return g};e.ComputedLength=function(b,e){this.rw=b;this.rh=e};e.ComputedLength.prototype.toUsedLength=function(b,e){return b*this.rw+e*this.rh};e.ComputedLength.prototype.multiply=
function(b,e){return e?b*e:b};e.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};e.toComputedLength=function(b,f,g,k,l,h){return"%"===f&&k?new e.ComputedLength(k.rw*b/100,k.rh*b/100):"em"===f&&g?new e.ComputedLength(g.rw*b,g.rh*b):"c"===f&&l?new e.ComputedLength(b*l.rw,b*l.rh):"px"===f&&h?new e.ComputedLength(b*h.rw,b*h.rh):"rh"===f?new e.ComputedLength(0,b/100):"rw"===f?new e.ComputedLength(b/100,0):null}})("undefined"===typeof q?this.imscUtils={}:q)},{}]},{},[4])(4)});
