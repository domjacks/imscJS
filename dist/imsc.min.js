var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(e,v){return Object.prototype.hasOwnProperty.call(e,v)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(e,v){for(var g=1;g<arguments.length;g++){var k=arguments[g];if(k)for(var u in k)$jscomp.owns(k,u)&&(e[u]=k[u])}return e};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,v,g){e!=Array.prototype&&e!=Object.prototype&&(e[v]=g.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(e,v,g,k){if(v){g=$jscomp.global;e=e.split(".");for(k=0;k<e.length-1;k++){var u=e[k];u in g||(g[u]={});g=g[u]}e=e[e.length-1];k=g[e];v=v(k);v!=k&&null!=v&&$jscomp.defineProperty(g,e,{configurable:!0,writable:!0,value:v})}};$jscomp.polyfill("Object.assign",function(e){return e||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.entries",function(e){return e?e:function(e){var g=[],k;for(k in e)$jscomp.owns(e,k)&&g.push([k,e[k]]);return g}},"es8","es3");
$jscomp.polyfill("Object.is",function(e){return e?e:function(e,g){return e===g?0!==e||1/e===1/g:e!==e&&g!==g}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(e){return e?e:function(e,g){var k=this;k instanceof String&&(k=String(k));var u=k.length;g=g||0;for(0>g&&(g=Math.max(g+u,0));g<u;g++){var l=k[g];if(l===e||Object.is(l,e))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(e,v,g){if(null==e)throw new TypeError("The 'this' value for String.prototype."+g+" must not be null or undefined");if(v instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");return e+""};$jscomp.polyfill("String.prototype.includes",function(e){return e?e:function(e,g){return-1!==$jscomp.checkStringArgs(this,e,"includes").indexOf(e,g||0)}},"es6","es3");
$jscomp.polyfill("Math.sign",function(e){return e?e:function(e){e=Number(e);return 0===e||isNaN(e)?e:0<e?1:-1}},"es6","es3");
(function(e){"object"===typeof exports&&"undefined"!==typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=e()})(function(){return function(){function e(v,g,k){function u(w,M){if(!g[w]){if(!v[w]){var b="function"==typeof require&&require;if(!M&&b)return b(w,!0);if(l)return l(w,!0);M=Error("Cannot find module '"+w+"'");throw M.code="MODULE_NOT_FOUND",M;}M=
g[w]={exports:{}};v[w][0].call(M.exports,function(b){return u(v[w][1][b]||b)},M,M.exports,e,v,g,k)}return g[w].exports}for(var l="function"==typeof require&&require,w=0;w<k.length;w++)u(k[w]);return u}return e}()({1:[function(e,v,g){(function(e,u,l,w,g){function k(c,a){var b=c.styleAttrs&&c.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===c.kind)!b&&a&&(c.styleAttrs||(c.styleAttrs={}),c.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=a);else if(b&&delete c.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],
c.contents)for(var d=0;d<c.contents.length;d++)k(c.contents[d],b||a)}function b(c){if("contents"in c){var a="styleAttrs"in c?c.styleAttrs[w.byName.ruby.qname]:null;a="span"===c.kind&&("container"===a||"textContainer"===a||"baseContainer"===a);for(var d=c.contents.length-1;0<=d;d--)!a||"styleAttrs"in c.contents[d]&&w.byName.ruby.qname in c.contents[d].styleAttrs?b(c.contents[d]):delete c.contents[d]}}function f(c,a,d,b){var z=b&&"seq"===b.timeContainer,n=0;b&&(n=z&&d?d.end:b.begin);a.begin=a.explicit_begin?
a.explicit_begin+n:n;d=a.begin;b=null;if("sets"in a)for(var h=0;h<a.sets.length;h++)f(c,a.sets[h],b,a),d="seq"===a.timeContainer?a.sets[h].end:Math.max(d,a.sets[h].end),b=a.sets[h];if(!("contents"in a))d=z?a.begin:Number.POSITIVE_INFINITY;else if("contents"in a)for(z=0;z<a.contents.length;z++)f(c,a.contents[z],b,a),d="seq"===a.timeContainer?a.contents[z].end:Math.max(d,a.contents[z].end),b=a.contents[z];a.end=null!==a.explicit_end&&null!==a.explicit_dur?Math.min(a.begin+a.explicit_dur,n+a.explicit_end):
null===a.explicit_end&&null!==a.explicit_dur?a.begin+a.explicit_dur:null!==a.explicit_end&&null===a.explicit_dur?n+a.explicit_end:d;delete a.explicit_begin;delete a.explicit_dur;delete a.explicit_end;c._registerEvent(a)}function t(a){this.node=a}function h(){this.events=[];this.head=new G;this.body=null}function G(){this.styling=new B;this.layout=new H}function B(){this.styles={};this.initials={}}function p(){this.styleRefs=this.styleAttrs=this.id=null}function v(){this.styleAttrs=null}function H(){this.regions=
{}}function A(a,c){this.kind="image";this.src=a;this.type=c}function R(a){this.id=a}function y(a){this.regionID=a}function a(a){this.styleAttrs=a}function n(a){this.sets=a}function c(a){this.contents=a}function d(a,c,d){this.explicit_begin=a;this.explicit_end=c;this.explicit_dur=d}function S(){this.kind="body"}function m(){this.kind="div"}function Q(){this.kind="p"}function E(){this.kind="span"}function I(){this.kind="span"}function r(){this.kind="br"}function O(){}function C(){}function J(a){var c=
null;a&&(a=a.attributes["xml:id"]||a.attributes.id)&&(c=a.value||null);return c}function U(a){return a&&"style"in a.attributes?a.attributes.style.value.split(" "):[]}function T(a,c){var d={};if(null!==a)for(var b in a.attributes)if(a.attributes.hasOwnProperty(b)){var f=a.attributes[b].uri+" "+a.attributes[b].local,n=w.byQName[f];if(void 0!==n){var z=n.parse(a.attributes[b].value);null!==z?(d[f]=z,n===w.byName.zIndex&&N(c,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):
K(c,"Cannot parse styling attribute "+f+" --\x3e "+a.attributes[b].value)}}return d}function P(a,c,d){for(var b in a.attributes)if(a.attributes.hasOwnProperty(b)&&a.attributes[b].uri===c&&a.attributes[b].local===d)return a.attributes[b].value;return null}function aa(a,c){a=P(a,l.ns_tts,"extent");if(null===a)return null;var d=a.split(" ");if(2!==d.length)return N(c,"Malformed extent (ignoring)"),null;a=g.parseLength(d[0]);d=g.parseLength(d[1]);return d&&a?{h:d,w:a}:(N(c,"Malformed extent values (ignoring)"),
null)}function V(a,c,d){var b=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,f=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,n=/^(\d+(?:\.\d+)?)t$/,h=/^(\d+(?:\.\d+)?)ms$/,z=/^(\d+(?:\.\d+)?)s$/,m=/^(\d+(?:\.\d+)?)h$/,x=/^(\d+(?:\.\d+)?)m$/,t,D=null;null!==(t=/^(\d+(?:\.\d+)?)f$/.exec(d))?null!==c&&(D=parseFloat(t[1])/c):null!==(t=n.exec(d))?null!==a&&(D=parseFloat(t[1])/a):null!==(t=h.exec(d))?D=parseFloat(t[1])/1E3:null!==(t=z.exec(d))?D=parseFloat(t[1]):null!==(t=m.exec(d))?D=3600*parseFloat(t[1]):null!==(t=x.exec(d))?
D=60*parseFloat(t[1]):null!==(t=b.exec(d))?D=3600*parseInt(t[1])+60*parseInt(t[2])+parseFloat(t[3]):null!==(t=f.exec(d))&&null!==c&&(D=3600*parseInt(t[1])+60*parseInt(t[2])+parseInt(t[3])+(null===t[4]?0:parseInt(t[4])/c));return D}function X(a,c,d){for(;0<c.styleRefs.length;){var b=c.styleRefs.pop();b in a.styles?(X(a,a.styles[b],d),W(a.styles[b].styleAttrs,c.styleAttrs)):K(d,"Non-existant style id referenced")}}function Y(a,c,d,b){for(var f=c.length-1;0<=f;f--){var n=c[f];n in a.styles?W(a.styles[n].styleAttrs,
d):K(b,"Non-existant style id referenced")}}function W(a,c){for(var d in a)a.hasOwnProperty(d)&&(d in c||(c[d]=a[d]))}function N(a,c){if(a&&a.warn&&a.warn(c))throw c;}function K(a,c){if(a&&a.error&&a.error(c))throw c;}function F(a,c){a&&a.fatal&&a.fatal(c);throw c;}function Z(a,c){for(var d=0,b=a.length-1,f;d<=b;){f=Math.floor((d+b)/2);var n=a[f];if(n<c)d=f+1;else if(n>c)b=f-1;else return{found:!0,index:f}}return{found:!1,index:d}}e.fromXML=function(a,c,d,n){var z=u.parser(!0,{xmlns:!0}),q=[],e=[],
D=[],g=0,x=null;z.onclosetag=function(a){if(n&&"function"===typeof n.onclosetag)n.onclosetag(a);if(q[0]instanceof O)null!==x.head&&null!==x.head.styling&&Y(x.head.styling,q[0].styleRefs,q[0].styleAttrs,c),delete q[0].styleRefs;else if(q[0]instanceof B)for(var b in q[0].styles)q[0].styles.hasOwnProperty(b)&&X(q[0],q[0].styles[b],c);else if(q[0]instanceof Q||q[0]instanceof E){if(1<q[0].contents.length){a=[q[0].contents[0]];for(b=1;b<q[0].contents.length;b++)q[0].contents[b]instanceof I&&a[a.length-
1]instanceof I?a[a.length-1].text+=q[0].contents[b].text:a.push(q[0].contents[b]);q[0].contents=a}q[0]instanceof E&&1===q[0].contents.length&&q[0].contents[0]instanceof I&&(q[0].text=q[0].contents[0].text,delete q[0].contents)}else if(q[0]instanceof t)if(q[0].node.uri===l.ns_tt&&"metadata"===q[0].node.local)g--;else if(0<g&&d&&"onCloseTag"in d)d.onCloseTag();D.shift();e.shift();q.shift()};z.ontext=function(a){if(n&&"function"===typeof n.ontext)n.ontext(a);if(void 0!==q[0])if(q[0]instanceof E||q[0]instanceof
Q){if(q[0]instanceof E){var b=q[0].styleAttrs[w.byName.ruby.qname];if("container"===b||"textContainer"===b||"baseContainer"===b)return}b=new I;b.initFromText(x,q[0],a,e[0],D[0],c);q[0].contents.push(b)}else if(q[0]instanceof t&&0<g&&d&&"onText"in d)d.onText(a)};z.onopentag=function(a){function b(a){l.ttaf_map[a.uri]&&(a.uri=l.ttaf_map[a.uri])}if(n&&"function"===typeof n.onopentag)n.onopentag(a);var f=a.attributes["xml:space"];f?D.unshift(f.value):0===D.length?D.unshift("default"):D.unshift(D[0]);
(f=a.attributes["xml:lang"])?e.unshift(f.value):0===e.length?e.unshift(""):e.unshift(e[0]);b(a);if(a.attributes)for(var z in a.attributes)a.attributes.hasOwnProperty(z)&&b(a.attributes[z]);if(a.uri===l.ns_tt)if("tt"===a.local)null!==x&&F(c,"Two <tt> elements at ("+this.line+","+this.column+")"),x=new h,x.initFromNode(a,e[0],c),q.unshift(x);else if("head"===a.local)q[0]instanceof h||F(c,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),q.unshift(x.head);else if("styling"===
a.local)q[0]instanceof G||F(c,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),q.unshift(x.head.styling);else if("style"===a.local)if(q[0]instanceof B){var k=new p;k.initFromNode(a,c);k.id?x.head.styling.styles[k.id]=k:K(c,"<style> element missing @id attribute");q.unshift(k)}else q[0]instanceof O?(k=new p,k.initFromNode(a,c),W(k.styleAttrs,q[0].styleAttrs),q.unshift(k)):F(c,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");
else if("initial"===a.local)if(q[0]instanceof B){z=new v;z.initFromNode(a,c);for(k in z.styleAttrs)z.styleAttrs.hasOwnProperty(k)&&(x.head.styling.initials[k]=z.styleAttrs[k]);q.unshift(z)}else F(c,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===a.local)q[0]instanceof G||F(c,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),q.unshift(x.head.layout);else if("region"===a.local)q[0]instanceof H||F(c,"Parent of <region> element is not <layout> at "+
this.line+","+this.column+")"),k=new O,k.initFromNode(x,a,e[0],c),!k.id||k.id in x.head.layout.regions?K(c,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):x.head.layout.regions[k.id]=k,q.unshift(k);else if("body"===a.local)q[0]instanceof h||F(c,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==x.body&&F(c,"Second <body> element at "+this.line+","+this.column+")"),k=new S,k.initFromNode(x,a,e[0],c),x.body=k,q.unshift(k);else if("div"===
a.local){q[0]instanceof m||q[0]instanceof S||F(c,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");k=new m;k.initFromNode(x,q[0],a,e[0],c);if(z=k.styleAttrs[w.byName.backgroundImage.qname])k.contents.push(new A(z)),delete k.styleAttrs[w.byName.backgroundImage.qname];q[0].contents.push(k);q.unshift(k)}else"image"===a.local?(q[0]instanceof m||F(c,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),k=new A,k.initFromNode(x,q[0],a,e[0],c),q[0].contents.push(k),
q.unshift(k)):"p"===a.local?(q[0]instanceof m||F(c,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),k=new Q,k.initFromNode(x,q[0],a,e[0],c),q[0].contents.push(k),q.unshift(k)):"span"===a.local?(q[0]instanceof E||q[0]instanceof Q||F(c,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),k=new E,k.initFromNode(x,q[0],a,e[0],D[0],c),q[0].contents.push(k),q.unshift(k)):"br"===a.local?(q[0]instanceof E||q[0]instanceof Q||F(c,"Parent of <br> element is not <span> or <p> at "+
this.line+","+this.column+")"),k=new r,k.initFromNode(x,q[0],a,e[0],c),q[0].contents.push(k),q.unshift(k)):"set"===a.local?(q[0]instanceof E||q[0]instanceof Q||q[0]instanceof m||q[0]instanceof S||q[0]instanceof O||q[0]instanceof r||F(c,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),k=new C,k.initFromNode(x,q[0],a,c),q[0].sets.push(k),q.unshift(k)):q.unshift(new t(a));else q.unshift(new t(a));if(q[0]instanceof t)if(a.uri===l.ns_tt&&"metadata"===a.local)g++;
else if(0<g&&d&&"onOpenTag"in d){k=[];for(var L in a.attributes)a.attributes.hasOwnProperty(L)&&(k[a.attributes[L].uri+" "+a.attributes[L].local]={uri:a.attributes[L].uri,local:a.attributes[L].local,value:a.attributes[L].value});d.onOpenTag(a.uri,a.local,k)}};z.write(a).close();delete x.head.styling.styles;a=!1;for(var L in x.head.layout.regions)if(x.head.layout.regions.hasOwnProperty(L)){a=!0;break}a||(L=O.prototype.createDefaultRegion(x,c),x.head.layout.regions[L.id]=L);for(var y in x.head.layout.regions)x.head.layout.regions.hasOwnProperty(y)&&
f(x,x.head.layout.regions[y],null,null);x.body&&f(x,x.body,null,null);x.body&&b(x.body);x.body&&k(x.body);return x};h.prototype.initFromNode=function(a,c,d){var b=P(a,l.ns_ttp,"cellResolution"),f=15;var n=32;null!==b&&(b=/(\d+) (\d+)/.exec(b),null!==b?(n=parseInt(b[1]),f=parseInt(b[2])):N(d,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new g.ComputedLength(0,1/f),w:new g.ComputedLength(1/n,0)};f=P(a,l.ns_ttp,"frameRate");b=30;null!==f&&(n=/(\d+)/.exec(f),null!==
n?b=parseInt(n[1]):N(d,"Malformed frame rate attribute (using initial value instead)"));n=P(a,l.ns_ttp,"frameRateMultiplier");var h=1;null!==n&&(n=/(\d+) (\d+)/.exec(n),null!==n?h=parseInt(n[1])/parseInt(n[2]):N(d,"Malformed frame rate multiplier attribute (using initial value instead)"));b*=h;h=1;n=P(a,l.ns_ttp,"tickRate");null===n?null!==f&&(h=b):(n=/(\d+)/.exec(n),null!==n?h=parseInt(n[1]):N(d,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=b;this.tickRate=
h;n=P(a,l.ns_ittp,"aspectRatio");null===n&&(n=P(a,l.ns_ttp,"displayAspectRatio"));f=null;null!==n&&(b=/(\d+)\s+(\d+)/.exec(n),null!==b?(n=parseInt(b[1]),b=parseInt(b[2]),0!==n&&0!==b?f=n/b:K(d,"Illegal aspectRatio values (ignoring)")):K(d,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=f;f=P(a,l.ns_ttp,"timeBase");null!==f&&"media"!==f&&F(d,"Unsupported time base");a=aa(a,d);null===a?this.pxLength={h:null,w:null}:("px"===a.h.unit&&"px"===a.w.unit||F(d,"Extent on TT must be in px or absent"),
this.pxLength={h:new g.ComputedLength(0,1/a.h.value),w:new g.ComputedLength(1/a.w.value,0)});this.dimensions={h:new g.ComputedLength(0,1),w:new g.ComputedLength(1,0)};this.lang=c};h.prototype._registerEvent=function(a){if(!(a.end<=a.begin)){var c=Z(this.events,a.begin);c.found||this.events.splice(c.index,0,a.begin);a.end!==Number.POSITIVE_INFINITY&&(c=Z(this.events,a.end),c.found||this.events.splice(c.index,0,a.end))}};h.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-
1]]};h.prototype.getMediaTimeEvents=function(){return this.events};p.prototype.initFromNode=function(a,c){this.id=J(a);this.styleAttrs=T(a,c);this.styleRefs=U(a)};v.prototype.initFromNode=function(a,c){this.styleAttrs={};for(var d in a.attributes)!a.attributes.hasOwnProperty(d)||a.attributes[d].uri!==l.ns_itts&&a.attributes[d].uri!==l.ns_ebutts&&a.attributes[d].uri!==l.ns_tts||(this.styleAttrs[a.attributes[d].uri+" "+a.attributes[d].local]=a.attributes[d].value)};A.prototype.initFromNode=function(c,
b,f,h,k){(this.src="src"in f.attributes?f.attributes.src.value:null)||K(k,"Invalid image@src attribute");(this.type="type"in f.attributes?f.attributes.type.value:null)||K(k,"Invalid image@type attribute");a.prototype.initFromNode.call(this,c,b,f,k);d.prototype.initFromNode.call(this,c,b,f,k);n.prototype.initFromNode.call(this,c,b,f,k);y.prototype.initFromNode.call(this,c,b,f,k);this.lang=h};R.prototype.initFromNode=function(a,c,d,b){this.id=J(d)};y.prototype.initFromNode=function(a,c,d,b){if(c=d&&
"region"in d.attributes?d.attributes.region.value:"")if(a.head.layout.regions[c])this.regionID=c;else{var f;for(f in a.head.layout.regions)if(a.head.layout.regions.hasOwnProperty(f)&&a.head.layout.regions[f].isDefaultRegion){var n=a.head.layout.regions[f];break}n||(n=O.prototype.createDefaultRegion(a,b),a.head.layout.regions[n.id]=n);K(b,"Cannot find specified region: "+c)}};a.prototype.initFromNode=function(a,c,d,b){this.styleAttrs=T(d,b);null!==a.head&&null!==a.head.styling&&Y(a.head.styling,U(d),
this.styleAttrs,b)};n.prototype.initFromNode=function(a,c,d,b){this.sets=[]};c.prototype.initFromNode=function(a,c,d,b){this.contents=[]};d.prototype.initFromNode=function(a,c,d,b){c=null;d&&"begin"in d.attributes&&(c=V(a.tickRate,a.effectiveFrameRate,d.attributes.begin.value),null===c&&N(b,"Malformed begin value "+d.attributes.begin.value+" (using 0)"));var f=null;d&&"dur"in d.attributes&&(f=V(a.tickRate,a.effectiveFrameRate,d.attributes.dur.value),null===f&&N(b,"Malformed dur value "+d.attributes.dur.value+
" (ignoring)"));var n=null;d&&"end"in d.attributes&&(n=V(a.tickRate,a.effectiveFrameRate,d.attributes.end.value),null===n&&N(b,"Malformed end value (ignoring)"));this.explicit_begin=c;this.explicit_end=n;this.explicit_dur=f;(a=d&&"timeContainer"in d.attributes?d.attributes.timeContainer.value:null)&&"par"!==a?"seq"===a?b="seq":(K(b,"Illegal value of timeContainer (assuming 'par')"),b="par"):b="par";this.timeContainer=b};S.prototype.initFromNode=function(b,f,h,k){a.prototype.initFromNode.call(this,
b,null,f,k);d.prototype.initFromNode.call(this,b,null,f,k);n.prototype.initFromNode.call(this,b,null,f,k);y.prototype.initFromNode.call(this,b,null,f,k);c.prototype.initFromNode.call(this,b,null,f,k);this.lang=h};m.prototype.initFromNode=function(b,f,h,k,m){a.prototype.initFromNode.call(this,b,f,h,m);d.prototype.initFromNode.call(this,b,f,h,m);n.prototype.initFromNode.call(this,b,f,h,m);y.prototype.initFromNode.call(this,b,f,h,m);c.prototype.initFromNode.call(this,b,f,h,m);this.lang=k};Q.prototype.initFromNode=
function(b,f,h,k,m){a.prototype.initFromNode.call(this,b,f,h,m);d.prototype.initFromNode.call(this,b,f,h,m);n.prototype.initFromNode.call(this,b,f,h,m);y.prototype.initFromNode.call(this,b,f,h,m);c.prototype.initFromNode.call(this,b,f,h,m);this.lang=k};E.prototype.initFromNode=function(b,f,h,k,m,t){a.prototype.initFromNode.call(this,b,f,h,t);d.prototype.initFromNode.call(this,b,f,h,t);n.prototype.initFromNode.call(this,b,f,h,t);y.prototype.initFromNode.call(this,b,f,h,t);c.prototype.initFromNode.call(this,
b,f,h,t);this.space=m;this.lang=k};I.prototype.initFromText=function(a,c,b,f,n,h){d.prototype.initFromNode.call(this,a,c,null,h);this.text=b;this.space=n;this.lang=f};r.prototype.initFromNode=function(a,c,b,f,n){y.prototype.initFromNode.call(this,a,c,b,n);d.prototype.initFromNode.call(this,a,c,b,n);this.lang=f};O.prototype.createDefaultRegion=function(c,b){var f=new O;f.id="";a.prototype.initFromNode.call(f,c,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",value:"after",
prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",ebutts:"urn:ebu:tt:style",
ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},b);f.sets=[];d.call(f,0,Number.POSITIVE_INFINITY,null);this.lang=c.xmllang;f.isDefaultRegion=!0;return f};O.prototype.initFromNode=function(a,c,b,f){R.prototype.initFromNode.call(this,
a,null,c,f);d.prototype.initFromNode.call(this,a,null,c,f);n.prototype.initFromNode.call(this,a,null,c,f);this.styleAttrs=T(c,f);this.styleRefs=U(c);this.lang=b};C.prototype.initFromNode=function(a,c,b,f){d.prototype.initFromNode.call(this,a,c,b,f);a=T(b,f);this.value=this.qname=null;for(var n in a)if(a.hasOwnProperty(n)){if(this.qname){K(f,"More than one style specified on set");break}this.qname=n;this.value=a[n]}}})("undefined"===typeof g?this.imscDoc={}:g,"undefined"===typeof sax?e("sax"):sax,
"undefined"===typeof imscNames?e("./names"):imscNames,"undefined"===typeof imscStyles?e("./styles"):imscStyles,"undefined"===typeof imscUtils?e("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7,sax:void 0}],2:[function(e,v,g){var k=/firefox/i.test(navigator.userAgent);(function(e,l,w,g){function u(a){var b={};a=Object.entries(a);for(var c in a)if(a.hasOwnProperty(c)){var d=g.parseColor(a[c][0]),f=g.parseColor(a[c][1]);d&&f&&(b[d.toString()]=f)}return b}function b(a,n,c,d){if("region"===
c.kind){var e=document.createElement("div");e.style.position="absolute"}else if("body"===c.kind)e=document.createElement("div");else if("div"===c.kind)e=document.createElement("div");else if("image"===c.kind){if(e=document.createElement("img"),null!==a.imgResolver&&null!==c.src){var m=a.imgResolver(c.src,e);m&&(e.src=m);e.height=a.regionH;e.width=a.regionW}}else if("p"===c.kind)e=document.createElement("p");else if("span"===c.kind)if("container"===c.styleAttrs[w.byName.ruby.qname])e=document.createElement("ruby"),
a.ruby=!0;else if("base"===c.styleAttrs[w.byName.ruby.qname])e=document.createElement("rb");else if("text"===c.styleAttrs[w.byName.ruby.qname])e=document.createElement("rt");else if("baseContainer"===c.styleAttrs[w.byName.ruby.qname])e=document.createElement("rbc");else if("textContainer"===c.styleAttrs[w.byName.ruby.qname])e=document.createElement("rtc");else{if("delimiter"===c.styleAttrs[w.byName.ruby.qname])return;e=document.createElement("span")}else"br"===c.kind&&(e=document.createElement("br"));
if(e){!c.lang||"region"!==c.kind&&c.lang===d.lang||(e.lang=c.lang);n.appendChild(e);e.style.margin="0";if("region"===c.kind)if(n=c.styleAttrs[w.byName.writingMode.qname],"lrtb"===n||"lr"===n)a.ipd="lr",a.bpd="tb";else if("rltb"===n||"rl"===n)a.ipd="rl",a.bpd="tb";else if("tblr"===n)a.ipd="tb",a.bpd="lr";else{if("tbrl"===n||"tb"===n)a.ipd="tb",a.bpd="rl"}else"p"===c.kind&&"tb"===a.bpd&&(a.ipd="ltr"===c.styleAttrs[w.byName.direction.qname]?"lr":"rl");for(n=0;n<v.length;n++)d=v[n],m=c.styleAttrs[d.qname],
void 0!==m&&null!==d.map&&d.map(a,e,c,m);n=e;(d=c.styleAttrs[w.byName.linePadding.qname])&&!d.isZero()&&(m=d.multiply(d.toUsedLength(a.w,a.h),a.options.sizeAdjust),0<m&&(m=Math.ceil(m)+"px","tb"===a.bpd?(n.style.paddingLeft=m,n.style.paddingRight=m):(n.style.paddingTop=m,n.style.paddingBottom=m),a.removePaddingElement=n,a.lp=d));(d=c.styleAttrs[w.byName.multiRowAlign.qname])&&"auto"!==d&&(n=document.createElement("span"),n.style.display="inline-block",n.style.textAlign=d,e.appendChild(n),a.mra=d);
(d=c.styleAttrs[w.byName.rubyReserve.qname])&&"none"!==d[0]&&(a.rubyReserve=d);c.styleAttrs[w.byName.fillLineGap.qname]&&(a.flg=!0);if("span"===c.kind&&c.text)if((d=c.styleAttrs[w.byName.textEmphasis.qname])&&"none"!==d.style&&(a.textEmphasis=!0),w.byName.textCombine.qname in c.styleAttrs&&"all"===c.styleAttrs[w.byName.textCombine.qname])e.textContent=c.text,d&&B(a,e,c,d);else{m="";for(var l=0;l<c.text.length;l++){m+=c.text.charAt(l);var g=c.text.charCodeAt(l);if(55296>g||56319<g||l===c.text.length-
1)g=document.createElement("span"),g.textContent=m,d&&B(a,g,c,d),e.appendChild(g),m="",g._isd_element=c}}if("contents"in c)for(d=0;d<c.contents.length;d++)b(a,n,c.contents[d],c);d=[];if("p"===c.kind){G(a,n,d,null);if(a.rubyReserve){for(m=0;m<d.length;m++){l=document.createElement("ruby");g=document.createElement("rb");g.textContent="\u200b";l.appendChild(g);var p=a.rubyReserve[1].toUsedLength(a.w,a.h)+"px";if("both"===a.rubyReserve[0]||"outside"===a.rubyReserve[0]&&1==d.length){g=document.createElement("rtc");
g.style[A]=H?"after":"under";g.textContent="\u200b";g.style.fontSize=p;var r=document.createElement("rtc");r.style[A]=H?"before":"over";r.textContent="\u200b";r.style.fontSize=p;l.appendChild(g);l.appendChild(r)}else g=document.createElement("rtc"),g.textContent="\u200b",g.style.fontSize=p,g.style[A]="after"===a.rubyReserve[0]||"outside"===a.rubyReserve[0]&&0<m?H?"after":"tb"===a.bpd||"rl"===a.bpd?"under":"over":H?"before":"tb"===a.bpd||"rl"===a.bpd?"over":"under",l.appendChild(g);g=null;for(r=0;r<
d[m].rbc.length;r++)if("ruby"===d[m].rbc[r].localName){g=d[m].rbc[r];for(r=0;r<g.style.length;r++)l.style.setProperty(g.style.item(r),g.style.getPropertyValue(g.style.item(r)));break}g=g||d[m].elements[0].node;g.parentElement.insertBefore(l,g)}a.rubyReserve=null}if(a.ruby||a.rubyReserve){for(m=0;m<d.length;m++)for(l=0;l<d[m].rbc.length;l++)d[m].rbc[l].style[A]||(d[m].rbc[l].style[A]=H?0===m?"before":"after":"tb"===a.bpd?0===m?"over":"under":"rl"===a.bpd?0===m?"over":"under":0===m?"under":"over");
a.ruby=null}if(a.textEmphasis){for(m=0;m<d.length;m++)for(l=0;l<d[m].te.length;l++)d[m].te[l].style[y]&&"none"!==d[m].te[l].style[y]||(d[m].te[l].style[y]="tb"===a.bpd?0===m?"left over":"left under":"rl"===a.bpd?0===m?"right under":"left under":0===m?"left under":"right under");a.textEmphasis=null}if(a.mra){for(m=0;m<d.length-1;m++)g=d[m].elements.length,0!==g&&!1===d[m].br&&(l=document.createElement("br"),g=d[m].elements[g-1].node,g.parentElement.insertBefore(l,g.nextSibling));a.mra=null}if(a.lp){m=
a.lp.multiply(a.lp.toUsedLength(a.w,a.h),a.options.sizeAdjust);if(null!==d)for(l=0;l<d.length;l++)if(g=Math.ceil(m)+"px",r="-"+Math.ceil(m)+"px",0!==d[l].elements.length){p=d[l].elements[d[l].start_elem];var u=d[l].elements[d[l].end_elem];if(p===u){var C=p.node.getBoundingClientRect();if(0==C.width||0==C.height)continue}"lr"===a.ipd?(p.node.style.marginLeft=r,p.node.style.paddingLeft=g):"rl"===a.ipd?(p.node.style.marginRight=r,p.node.style.paddingRight=g):"tb"===a.ipd&&(p.node.style.marginTop=r,p.node.style.paddingTop=
g);"lr"===a.ipd?(k||(u.node.style.marginRight=r),u.node.style.paddingRight=g):"rl"===a.ipd?(k||(u.node.style.marginLeft=r),u.node.style.paddingLeft=g):"tb"===a.ipd&&(u.node.style.marginBottom=r,u.node.style.paddingBottom=g)}"tb"===a.bpd?(a.removePaddingElement.style.paddingLeft=0,a.removePaddingElement.style.paddingRight=0):(a.removePaddingElement.style.paddingTop=0,a.removePaddingElement.style.paddingBottom=0);a.lp=null}for(m=0;m<d.length;m++)for(l=d[m],g=1;g<l.elements.length;){r=l.elements[g-1].node;
p=l.elements[g].node;if("SPAN"===r.tagName&&"SPAN"===p.tagName&&r._isd_element===p._isd_element){r.textContent+=p.textContent;for(u=0;u<p.style.length;u++)if(C=p.style[u],0<=C.indexOf("border")||0<=C.indexOf("padding")||0<=C.indexOf("margin"))r.style[C]=p.style[C];p.parentElement.removeChild(p);r=!0}else r=!1;r?l.elements.splice(g,1):g++}m=[];for(r=0;r<d.length;r++)for(p=0;p<d[r].elements.length;p++)if(l=d[r].elements[p].node,g=f(l,m,!1))l.style.backgroundColor=g;for(l=0;l<m.length;l++)m[l].style.backgroundColor=
"";if(a.flg){l=h(n.getBoundingClientRect(),a);m=l.before;l=l.after;g=Math.sign(l-m);for(r=0;r<=d.length;r++){p=0===r?Math.round(m):r===d.length?Math.round(l):Math.round((d[r-1].after+d[r].before)/2);if(0<r&&d[r-1])for(C=0;C<d[r-1].elements.length;C++){var J=d[r-1].elements[C];u=g*(p-J.after)+"px";"lr"===a.bpd?J.node.style.paddingRight=u:"rl"===a.bpd?J.node.style.paddingLeft=u:"tb"===a.bpd&&(J.node.style.paddingBottom=u)}if(r<d.length)for(C=0;C<d[r].elements.length;C++)J=d[r].elements[C],u=g*(J.before-
p)+"px","lr"===a.bpd?J.node.style.paddingLeft=u:"rl"===a.bpd?J.node.style.paddingRight=u:"tb"===a.bpd&&(J.node.style.paddingTop=u)}a.flg=null}}"region"===c.kind&&"tb"===a.bpd&&a.enableRollUp&&0<c.contents.length&&"after"===c.styleAttrs[w.byName.displayAlign.qname]&&(G(a,n,d,null),c=new t(""===c.id?"_":c.id,d),a.currentISDState[c.id]=c,a.previousISDState&&c.id in a.previousISDState&&0<a.previousISDState[c.id].plist.length&&1<c.plist.length&&c.plist[c.plist.length-2].text===a.previousISDState[c.id].plist[a.previousISDState[c.id].plist.length-
1].text&&(a=e.firstElementChild,c=c.plist[c.plist.length-1].after-c.plist[c.plist.length-1].before,a.style.bottom="-"+c+"px",a.style.transition="transform 0.4s",a.style.position="relative",a.style.transform="translateY(-"+c+"px)"))}else if(a=a.errorHandler,c="Error processing ISD element kind: "+c.kind,a&&a.error&&a.error(c))throw c;}function f(a,b,c){if(a.style.backgroundColor)return c&&!b.includes(a)&&b.push(a),a.style.backgroundColor;if("SPAN"===a.parentElement.nodeName)return f(a.parentElement,
b,!0)}function t(a,b){this.id=a;this.plist=b}function h(a,b){var c={before:null,after:null,start:null,end:null};"tb"===b.bpd?(c.before=a.top,c.after=a.bottom,"lr"===b.ipd?(c.start=a.left,c.end=a.right):(c.start=a.right,c.end=a.left)):"lr"===b.bpd?(c.before=a.left,c.after=a.right,c.start=a.top,c.end=a.bottom):"rl"===b.bpd&&(c.before=a.right,c.after=a.left,c.start=a.top,c.end=a.bottom);return c}function G(a,b,c,d){if("rt"!==b.localName&&"rtc"!==b.localName)if(d=b.style.backgroundColor||d,0===b.childElementCount)if("span"===
b.localName||"rb"===b.localName){var f=b.getBoundingClientRect();a=h(f,a);if(!(f=0===c.length)){f=a.before;var n=a.after,k=c[c.length-1].before,l=c[c.length-1].after;f=!(n<l&&f>k||l<=n&&k>=f)}f?c.push({before:a.before,after:a.after,start:a.start,end:a.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(f=Math.sign(a.after-a.before),n=Math.sign(a.end-a.start),0>f*(a.before-c[c.length-1].before)&&(c[c.length-1].before=a.before),0<f*(a.after-c[c.length-1].after)&&(c[c.length-1].after=
a.after),0>n*(a.start-c[c.length-1].start)&&(c[c.length-1].start=a.start,c[c.length-1].start_elem=c[c.length-1].elements.length),0<n*(a.end-c[c.length-1].end)&&(c[c.length-1].end=a.end,c[c.length-1].end_elem=c[c.length-1].elements.length));c[c.length-1].text+=b.textContent;c[c.length-1].elements.push({node:b,bgcolor:d,before:a.before,after:a.after})}else"br"===b.localName&&0!==c.length&&(c[c.length-1].br=!0);else for(b=b.firstChild;b;)b.nodeType===Node.ELEMENT_NODE&&(G(a,b,c,d),"ruby"===b.localName||
"rtc"===b.localName?0<c.length&&c[c.length-1].rbc.push(b):"span"===b.localName&&b.style[R]&&"none"!==b.style[R]&&0<c.length&&c[c.length-1].te.push(b)),b=b.nextSibling}function B(a,b,c,d){"none"!==d.style&&(b.style[R]="auto"===d.style?"filled":d.style+" "+d.symbol,"before"===d.position||"after"===d.position)&&(b.style[y]="tb"===a.bpd?"before"===d.position?"left over":"left under":"rl"===a.bpd?"before"===d.position?"right under":"left under":"before"===d.position?"left under":"right under")}function p(a,
b){this.qname=a;this.map=b}e.render=function(a,f,c,d,h,k,l,e,t,g){d=d||f.clientHeight;var n=h||f.clientWidth;null!==a.aspectRatio&&(h=d*a.aspectRatio,h>n?d=Math.round(n/a.aspectRatio):n=h);h=document.createElement("div");h.style.position="relative";h.style.width=n+"px";h.style.height=d+"px";h.style.margin="auto";h.style.top=0;h.style.bottom=0;h.style.left=0;h.style.right=0;h.style.zIndex=0;c={h:d,w:n,regionH:null,regionW:null,imgResolver:c,displayForcedOnlyMode:k||!1,isd:a,errorHandler:l,previousISDState:e,
enableRollUp:t||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null,options:Object.assign({},g)||{}};c.options.colorAdjust&&(c.options.colorAdjust=u(c.options.colorAdjust));k=["region","body","div","p","span"];for(var m in k)k.hasOwnProperty(m)&&(l=k[m]+"BackgroundColorAdjust",c.options[l]&&(c.options[l]=u(c.options[l])));f.appendChild(h);if("contents"in a)for(f=0;f<a.contents.length;f++)b(c,h,a.contents[f],a);return c.currentISDState};var v=
[new p("http://www.w3.org/ns/ttml#styling backgroundColor",function(a,b,c,d){(c=(c=a.options[c.kind+"BackgroundColorAdjust"])&&c[d.toString()])&&(d=c);c=d[3];0!==c&&(void 0!=a.options.backgroundOpacityScale&&(c*=a.options.backgroundOpacityScale),b.style.backgroundColor="rgba("+d[0].toString()+","+d[1].toString()+","+d[2].toString()+","+(c/255).toString()+")")}),new p("http://www.w3.org/ns/ttml#styling color",function(a,b,c,d){c=a.options.colorOpacityScale||1;a=a.options.colorAdjust;void 0!=a&&(a=
a[d.toString()])&&(d=a);b.style.color="rgba("+d[0].toString()+","+d[1].toString()+","+d[2].toString()+","+(c*d[3]/255).toString()+")"}),new p("http://www.w3.org/ns/ttml#styling direction",function(a,b,c,d){b.style.direction=d}),new p("http://www.w3.org/ns/ttml#styling display",function(a,b,c,d){}),new p("http://www.w3.org/ns/ttml#styling displayAlign",function(a,b,c,d){b.style.display="flex";b.style.flexDirection="column";"before"===d?b.style.justifyContent="flex-start":"center"===d?b.style.justifyContent=
"center":"after"===d&&(b.style.justifyContent="flex-end")}),new p("http://www.w3.org/ns/ttml#styling extent",function(a,b,c,d){a.regionH=d.h.toUsedLength(a.w,a.h);a.regionW=d.w.toUsedLength(a.w,a.h);var f=d=0;if(c=c.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])d=c[0].toUsedLength(a.w,a.h)+c[2].toUsedLength(a.w,a.h),f=c[1].toUsedLength(a.w,a.h)+c[3].toUsedLength(a.w,a.h);b.style.height=a.regionH-d+"px";b.style.width=a.regionW-f+"px"}),new p("http://www.w3.org/ns/ttml#styling fontFamily",
function(a,b,c,d){c=[];a.options.fontFamily&&(d=a.options.fontFamily.split(","));for(a=0;a<d.length;a++)d[a]=d[a].trim(),"monospaceSerif"===d[a]?(c.push("Courier New"),c.push('"Liberation Mono"'),c.push("Courier"),c.push("monospace")):"proportionalSansSerif"===d[a]||"default"===d[a]?(c.push("Arial"),c.push("Helvetica"),c.push('"Liberation Sans"'),c.push("sans-serif")):"monospace"===d[a]?c.push("monospace"):"sansSerif"===d[a]?c.push("sans-serif"):"serif"===d[a]?c.push("serif"):"monospaceSansSerif"===
d[a]?(c.push("Consolas"),c.push("monospace")):"proportionalSerif"===d[a]?c.push("serif"):c.push(d[a]);if(0<c.length){d=[c[0]];for(a=1;a<c.length;a++)-1==d.indexOf(c[a])&&d.push(c[a]);c=d}b.style.fontFamily=c.join(",")}),new p("http://www.w3.org/ns/ttml#styling shear",function(a,b,c,d){0!==d&&(c=-.9*d,b.style.transform="tb"===a.bpd?"skewX("+c+"deg)":"skewY("+c+"deg)")}),new p("http://www.w3.org/ns/ttml#styling fontSize",function(a,b,c,d){b.style.fontSize=d.multiply(d.toUsedLength(a.w,a.h),a.options.sizeAdjust)+
"px"}),new p("http://www.w3.org/ns/ttml#styling fontStyle",function(a,b,c,d){b.style.fontStyle=d}),new p("http://www.w3.org/ns/ttml#styling fontWeight",function(a,b,c,d){b.style.fontWeight=d}),new p("http://www.w3.org/ns/ttml#styling lineHeight",function(a,b,c,d){b.style.lineHeight="normal"===d?"normal":d.multiply(d.multiply(d.toUsedLength(a.w,a.h),a.options.sizeAdjust),a.options.lineHeightAdjust)+"px"}),new p("http://www.w3.org/ns/ttml#styling opacity",function(a,b,c,d){c=d;void 0!=a.options.regionOpacityScale&&
(c*=a.options.regionOpacityScale);b.style.opacity=c}),new p("http://www.w3.org/ns/ttml#styling origin",function(a,b,c,d){b.style.top=d.h.toUsedLength(a.w,a.h)+"px";b.style.left=d.w.toUsedLength(a.w,a.h)+"px"}),new p("http://www.w3.org/ns/ttml#styling overflow",function(a,b,c,d){b.style.overflow=d}),new p("http://www.w3.org/ns/ttml#styling padding",function(a,b,c,d){c=[];c[0]=d[0].toUsedLength(a.w,a.h)+"px";c[1]=d[3].toUsedLength(a.w,a.h)+"px";c[2]=d[2].toUsedLength(a.w,a.h)+"px";c[3]=d[1].toUsedLength(a.w,
a.h)+"px";b.style.padding=c.join(" ")}),new p("http://www.w3.org/ns/ttml#styling position",function(a,b,c,d){b.style.top=d.h.toUsedLength(a.w,a.h)+"px";b.style.left=d.w.toUsedLength(a.w,a.h)+"px"}),new p("http://www.w3.org/ns/ttml#styling rubyAlign",function(a,b,c,d){b.style.rubyAlign="spaceAround"===d?"space-around":"center"}),new p("http://www.w3.org/ns/ttml#styling rubyPosition",function(a,b,c,d){if("before"===d||"after"===d)b.parentElement.style[A]=H?d:"tb"===a.bpd?"before"===d?"over":"under":
"rl"===a.bpd?"before"===d?"over":"under":"before"===d?"under":"over"}),new p("http://www.w3.org/ns/ttml#styling showBackground",null),new p("http://www.w3.org/ns/ttml#styling textAlign",function(a,b,c,d){b.style.textAlign="start"===d?"rl"===a.ipd?"right":"left":"end"===d?"rl"===a.ipd?"left":"right":d}),new p("http://www.w3.org/ns/ttml#styling textDecoration",function(a,b,c,d){b.style.textDecoration=d.join(" ").replace("lineThrough","line-through")}),new p("http://www.w3.org/ns/ttml#styling textOutline",
function(a,b,c,d){}),new p("http://www.w3.org/ns/ttml#styling textShadow",function(a,b,c,d){c=c.styleAttrs[w.byName.textOutline.qname];var f=a.options.textOutline;if(f)if("none"===f)c=f;else{var h={};f=f.split(" ");if(0!==f.length&&2>=f.length){var k=g.parseColor(f[0]);h.color=k;null!==k&&f.shift();1===f.length&&(f=g.parseLength(f[0]))&&(h.thickness=f,c=h)}}if("none"===d&&"none"===c)b.style.textShadow="";else{h=[];"none"!==c&&(c="rgba("+c.color[0].toString()+","+c.color[1].toString()+","+c.color[2].toString()+
","+(c.color[3]/255).toString()+")",h.push("1px 1px 1px "+c),h.push("-1px 1px 1px "+c),h.push("1px -1px 1px "+c),h.push("-1px -1px 1px "+c));if("none"!==d)for(c=0;c<d.length;c++)h.push(d[c].x_off.toUsedLength(a.w,a.h)+"px "+d[c].y_off.toUsedLength(a.w,a.h)+"px "+d[c].b_radius.toUsedLength(a.w,a.h)+"px rgba("+d[c].color[0].toString()+","+d[c].color[1].toString()+","+d[c].color[2].toString()+","+(d[c].color[3]/255).toString()+")");b.style.textShadow=h.join(",")}}),new p("http://www.w3.org/ns/ttml#styling textCombine",
function(a,b,c,d){b.style.textCombineUpright=d}),new p("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,b,c,d){}),new p("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,b,c,d){b.style.unicodeBidi="bidiOverride"===d?"bidi-override":d}),new p("http://www.w3.org/ns/ttml#styling visibility",function(a,b,c,d){b.style.visibility=d}),new p("http://www.w3.org/ns/ttml#styling wrapOption",function(a,b,c,d){b.style.whiteSpace="wrap"===d?"preserve"===c.space?"pre-wrap":"normal":"preserve"===
c.space?"pre":"noWrap"}),new p("http://www.w3.org/ns/ttml#styling writingMode",function(a,b,c,d){if("lrtb"===d||"lr"===d)b.style.writingMode="horizontal-tb";else if("rltb"===d||"rl"===d)b.style.writingMode="horizontal-tb";else if("tblr"===d)b.style.writingMode="vertical-lr";else if("tbrl"===d||"tb"===d)b.style.writingMode="vertical-rl"}),new p("http://www.w3.org/ns/ttml#styling zIndex",function(a,b,c,d){b.style.zIndex=d}),new p("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(a,
b,c,d){a.displayForcedOnlyMode&&!1===d&&(b.style.visibility="hidden")})];for(e=0;e<v.length;e++);var H="webkitRubyPosition"in window.getComputedStyle(document.documentElement),A=H?"webkitRubyPosition":"rubyPosition",R="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",y="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof g?
this.imscHTML={}:g,"undefined"===typeof imscNames?e("./names"):imscNames,"undefined"===typeof imscStyles?e("./styles"):imscStyles,"undefined"===typeof imscUtils?e("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7}],3:[function(e,v,g){(function(k,e,l,g){function u(k,e,t,H,A,v,y,a,n){if(e<y.begin||e>=y.end)return null;v="regionID"in y&&""!==y.regionID?y.regionID:v;if(null!==A&&v!==t.id&&(!("contents"in y)||"contents"in y&&0===y.contents.length||""!==v))return null;var c=new h(y);if("sets"in
y)for(var d=0;d<y.sets.length;d++)e<y.sets[d].begin||e>=y.sets[d].end||(c.styleAttrs[y.sets[d].qname]=y.sets[d].value);d={};for(var B in c.styleAttrs)if(c.styleAttrs.hasOwnProperty(B)&&(d[B]=!0,"region"===c.kind&&B===l.byName.writingMode.qname&&!(l.byName.direction.qname in c.styleAttrs))){var m=c.styleAttrs[B];if("lrtb"===m||"lr"===m)c.styleAttrs[l.byName.direction.qname]="ltr";else if("rltb"===m||"rl"===m)c.styleAttrs[l.byName.direction.qname]="rtl"}if(null!==A)for(B=0;B<l.all.length;B++)if(m=l.all[B],
m.qname===l.byName.textDecoration.qname){var p=A.styleAttrs[m.qname],E=c.styleAttrs[m.qname],I=[];void 0===E?I=p:-1===E.indexOf("none")?((-1===E.indexOf("noUnderline")&&-1!==p.indexOf("underline")||-1!==E.indexOf("underline"))&&I.push("underline"),(-1===E.indexOf("noLineThrough")&&-1!==p.indexOf("lineThrough")||-1!==E.indexOf("lineThrough"))&&I.push("lineThrough"),(-1===E.indexOf("noOverline")&&-1!==p.indexOf("overline")||-1!==E.indexOf("overline"))&&I.push("overline")):I.push("none");c.styleAttrs[m.qname]=
I}else m.qname!==l.byName.fontSize.qname||m.qname in c.styleAttrs||"span"!==c.kind||"textContainer"!==c.styleAttrs[l.byName.ruby.qname]?m.qname!==l.byName.fontSize.qname||m.qname in c.styleAttrs||"span"!==c.kind||"text"!==c.styleAttrs[l.byName.ruby.qname]?m.inherit&&m.qname in A.styleAttrs&&!(m.qname in c.styleAttrs)&&(c.styleAttrs[m.qname]=A.styleAttrs[m.qname]):(p=A.styleAttrs[l.byName.fontSize.qname],c.styleAttrs[m.qname]="textContainer"===A.styleAttrs[l.byName.ruby.qname]?p:new g.ComputedLength(.5*
p.rw,.5*p.rh)):(p=A.styleAttrs[l.byName.fontSize.qname],c.styleAttrs[m.qname]=new g.ComputedLength(.5*p.rw,.5*p.rh));for(B=0;B<l.all.length;B++)if(m=l.all[B],!(m.qname in c.styleAttrs||m.qname===l.byName.position.qname&&l.byName.origin.qname in c.styleAttrs||m.qname===l.byName.origin.qname&&l.byName.position.qname in c.styleAttrs)&&(p=k.head.styling.initials[m.qname]||m.initial,null!==p&&("region"===c.kind||!1===m.inherit&&null!==p)))if(p=m.parse(p),null!==p)c.styleAttrs[m.qname]=p,d[m.qname]=!0;
else if(m="Invalid initial value for '"+m.qname+"' on element '"+c.kind,a&&a.error&&a.error(m))throw m;for(B=0;B<l.all.length;B++)if(m=l.all[B],m.qname in d&&null!==m.compute)if(p=m.compute(k,A,c,c.styleAttrs[m.qname],n),null!==p)c.styleAttrs[m.qname]=p;else if(c.styleAttrs[m.qname]=m.compute(k,A,c,m.parse(m.initial),n),m="Style '"+m.qname+"' on element '"+c.kind+"' cannot be computed",a&&a.error&&a.error(m))throw m;if("none"===c.styleAttrs[l.byName.display.qname])return null;d=null;null===A?d=null===
H?[]:[H]:"contents"in y&&(d=y.contents);for(A=0;null!==d&&A<d.length;A++)y=u(k,e,t,H,c,v,d[A],a,n),null!==y&&c.contents.push(y.element);for(var r in c.styleAttrs)c.styleAttrs.hasOwnProperty(r)&&(k=!1,"span"===c.kind&&(e=c.styleAttrs[l.byName.ruby.qname],(k=("container"===e||"textContainer"===e||"baseContainer"===e)&&-1!==G.indexOf(r))||(k="container"!==e&&r===l.byName.rubyAlign.qname),k||(k=!("textContainer"===e||"text"===e)&&r===l.byName.rubyPosition.qname)),k||(e=l.byQName[r],"applies"in e&&(k=
-1===e.applies.indexOf(c.kind))),k&&delete c.styleAttrs[r]);r=c.styleAttrs[l.byName.ruby.qname];if("p"===c.kind||"span"===c.kind&&("textContainer"===r||"text"===r))r=[],b(c,r),w(r),f(c);return"div"===c.kind&&l.byName.backgroundImage.qname in c.styleAttrs||"br"===c.kind||"image"===c.kind||"contents"in c&&0<c.contents.length||"span"===c.kind&&null!==c.text||"region"===c.kind&&"always"===c.styleAttrs[l.byName.showBackground.qname]?{region_id:v,element:c}:null}function w(b){function f(b){return"br"===
b.kind||/[\r\n\t ]$/.test(b.text)}function h(b){return"br"===b.kind||"preserve"===b.space&&/^[\r\n]/.test(b.text)}for(var k,e=0;e<b.length;)if(k=b[e],"br"===k.kind||"preserve"===k.space)e++;else{var l=k.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(l)&&(0===e||f(b[e-1]))&&(l=l.substring(1));k.text=l;0===l.length?b.splice(e,1):e++}for(e=0;e<b.length;e++)k=b[e],"br"===k.kind||"preserve"===k.space?e++:/[ ]$/.test(k.text)&&(e===b.length-1||h(b[e+1]))&&(k.text=k.text.slice(0,-1))}function b(f,h){if("contents"in
f)for(var k=0;k<f.contents.length;k++){var e=f.contents[k],t=e.styleAttrs[l.byName.ruby.qname];if("span"!==e.kind||"textContainer"!==t&&"text"!==t)"contents"in e?b(e,h):("span"===e.kind&&0!==e.text.length||"br"===e.kind)&&h.push(e)}}function f(b){if("br"===b.kind)return!1;if("text"in b)return 0===b.text.length;if("contents"in b){for(var h=b.contents.length;h--;)f(b.contents[h])&&b.contents.splice(h,1);return 0===b.contents.length}}function t(b){this.contents=[];this.aspectRatio=b.aspectRatio;this.lang=
b.lang}function h(b){this.kind=b.kind||"region";this.lang=b.lang;b.id&&(this.id=b.id);this.styleAttrs={};for(var f in b.styleAttrs)b.styleAttrs.hasOwnProperty(f)&&(this.styleAttrs[f]=b.styleAttrs[f]);"src"in b&&(this.src=b.src);"type"in b&&(this.type=b.type);if("text"in b)this.text=b.text;else if("region"===this.kind||"contents"in b)this.contents=[];"space"in b&&(this.space=b.space)}k.generateISD=function(b,f,h){function k(b,c){function d(a){return!(b<a.begin||b>=a.end)}if(c.contents){var f={},h;
for(h in c)c.hasOwnProperty(h)&&(f[h]=c[h]);f.contents=[];c.contents.filter(d).forEach(function(c){c=k(b,c);c.regionID&&(a[c.regionID]=!0);null!==c&&f.contents.push(c)});return f}return c}var e=new t(b),g={},p={},a={};p=b.head.styling.initials[l.byName.showBackground.qname];var n=b.head.styling.initials[l.byName.backgroundColor.qname];for(G in b.head.layout.regions)if(b.head.layout.regions.hasOwnProperty(G)){var c=b.head.layout.regions[G],d=c.styleAttrs[l.byName.showBackground.qname]||p,w=c.styleAttrs[l.byName.backgroundColor.qname]||
n;a[c.id]=("always"===d||void 0===d)&&void 0!==w&&!(f<c.begin||f>=c.end)}b.body&&b.body.regionID&&(a[b.body.regionID]=!0);p=null!==b.body?k(f,b.body):null;void 0!==a[""]&&(a[""]=!0);for(var m in a)if(a[m]){var G=u(b,f,b.head.layout.regions[m],p,null,"",b.head.layout.regions[m],h,g);null!==G&&e.contents.push(G.element)}return e};var G=[l.byName.color.qname,l.byName.textCombine.qname,l.byName.textDecoration.qname,l.byName.textEmphasis.qname,l.byName.textOutline.qname,l.byName.textShadow.qname]})("undefined"===
typeof g?this.imscISD={}:g,"undefined"===typeof imscNames?e("./names"):imscNames,"undefined"===typeof imscStyles?e("./styles"):imscStyles,"undefined"===typeof imscUtils?e("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7}],4:[function(e,v,g){g.generateISD=e("./isd").generateISD;g.fromXML=e("./doc").fromXML;g.renderHTML=e("./html").render},{"./doc":1,"./html":2,"./isd":3}],5:[function(e,v,g){e="undefined"===typeof g?this.imscNames={}:g;e.ns_tt="http://www.w3.org/ns/ttml";e.ns_tts="http://www.w3.org/ns/ttml#styling";
e.ns_ttp="http://www.w3.org/ns/ttml#parameter";e.ns_xml="http://www.w3.org/XML/1998/namespace";e.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";e.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";e.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";e.ns_ebutts="urn:ebu:tt:style";e.ttaf_map={"http://www.w3.org/2006/10/ttaf1":e.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":e.ns_tts,"http://www.w3.org/2006/10/ttaf1#parameter":e.ns_ttp}},{}],6:[function(e,v,g){(function(k,
e,l){function g(b,f,e,h,k,g,l,u){this.name=f;this.ns=b;this.qname=b+" "+f;this.inherit=k;this.animatable=g;this.initial=e;this.applies=h;this.parse=l;this.compute=u}k.all=[new g(e.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,l.parseColor,null),new g(e.ns_tts,"color","white",["span"],!0,!0,l.parseColor,null),new g(e.ns_tts,"direction","ltr",["p","span"],!0,!0,function(b){return b},null),new g(e.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(b){return b},
null),new g(e.ns_tts,"displayAlign","before",["region"],!1,!0,function(b){return b},null),new g(e.ns_tts,"extent","auto",["tt","region"],!1,!0,function(b){if("auto"===b)return b;var f=b.split(" ");if(2!==f.length)return null;b=l.parseLength(f[0]);return(f=l.parseLength(f[1]))&&b?{h:f,w:b}:null},function(b,f,e,h,k){if("auto"===h)f=new l.ComputedLength(0,1);else if(f=l.toComputedLength(h.h.value,h.h.unit,null,b.dimensions.h,null,b.pxLength.h),null===f)return null;if("auto"===h)b=new l.ComputedLength(1,
0);else if(b=l.toComputedLength(h.w.value,h.w.unit,null,b.dimensions.w,null,b.pxLength.w),null===b)return null;return{h:f,w:b}}),new g(e.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(b){b=b.split(",");for(var f=[],e=0;e<b.length;e++)"'"!==b[e].charAt(0)&&'"'!==b[e].charAt(0)?"default"===b[e]?f.push("monospaceSerif"):f.push(b[e]):f.push(b[e]);return f},null),new g(e.ns_tts,"shear","0%",["p"],!0,!0,l.parseLength,function(b,f,e,h){if("%"===h.unit)b=100<Math.abs(h.value)?100*Math.sign(h.value):
h.value;else return null;return b}),new g(e.ns_tts,"fontSize","1c",["span","p"],!0,!0,l.parseLength,function(b,f,e,h,g){return l.toComputedLength(h.value,h.unit,null!==f?f.styleAttrs[k.byName.fontSize.qname]:b.cellLength.h,null!==f?f.styleAttrs[k.byName.fontSize.qname]:b.cellLength.h,b.cellLength.h,b.pxLength.h)}),new g(e.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(b){return b},null),new g(e.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(b){return b},null),new g(e.ns_tts,"lineHeight",
"normal",["p"],!0,!0,function(b){return"normal"===b?b:l.parseLength(b)},function(b,f,e,h,g){if("normal"===h)b=h;else if(b=l.toComputedLength(h.value,h.unit,e.styleAttrs[k.byName.fontSize.qname],e.styleAttrs[k.byName.fontSize.qname],b.cellLength.h,b.pxLength.h),null===b)return null;return b}),new g(e.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new g(e.ns_tts,"origin","auto",["region"],!1,!0,function(b){if("auto"===b)return b;var f=b.split(" ");if(2!==f.length)return null;b=l.parseLength(f[0]);
return(f=l.parseLength(f[1]))&&b?{h:f,w:b}:null},function(b,f,e,h,k){if("auto"===h)f=new l.ComputedLength(0,0);else if(f=l.toComputedLength(h.h.value,h.h.unit,null,b.dimensions.h,null,b.pxLength.h),null===f)return null;if("auto"===h)b=new l.ComputedLength(0,0);else if(b=l.toComputedLength(h.w.value,h.w.unit,null,b.dimensions.w,null,b.pxLength.w),null===b)return null;return{h:f,w:b}}),new g(e.ns_tts,"overflow","hidden",["region"],!1,!0,function(b){return b},null),new g(e.ns_tts,"padding","0px",["region"],
!1,!0,function(b){b=b.split(" ");if(4<b.length)return null;for(var f=[],e=0;e<b.length;e++){var h=l.parseLength(b[e]);if(!h)return null;f.push(h)}return f},function(b,f,e,h,g){if(1===h.length)f=[h[0],h[0],h[0],h[0]];else if(2===h.length)f=[h[0],h[1],h[0],h[1]];else if(3===h.length)f=[h[0],h[1],h[2],h[1]];else if(4===h.length)f=[h[0],h[1],h[2],h[3]];else return null;h=e.styleAttrs[k.byName.writingMode.qname];if("lrtb"===h||"lr"===h)f=[f[0],f[3],f[2],f[1]];else if("rltb"===h||"rl"===h)f=[f[0],f[1],
f[2],f[3]];else if("tblr"===h)f=[f[3],f[0],f[1],f[2]];else if("tbrl"===h||"tb"===h)f=[f[3],f[2],f[1],f[0]];else return null;h=[];for(g=0;g<f.length;g++)if(0===f[g].value)h[g]=new l.ComputedLength(0,0);else if(h[g]=l.toComputedLength(f[g].value,f[g].unit,e.styleAttrs[k.byName.fontSize.qname],0===g||2===g?e.styleAttrs[k.byName.extent.qname].h:e.styleAttrs[k.byName.extent.qname].w,0===g||2===g?b.cellLength.h:b.cellLength.w,0===g||2===g?b.pxLength.h:b.pxLength.w),null===h[g])return null;return h}),new g(e.ns_tts,
"position","top left",["region"],!1,!0,function(b){return l.parsePosition(b)},function(b,f,e,h){f=l.toComputedLength(h.v.offset.value,h.v.offset.unit,null,new l.ComputedLength(-e.styleAttrs[k.byName.extent.qname].h.rw,b.dimensions.h.rh-e.styleAttrs[k.byName.extent.qname].h.rh),null,b.pxLength.h);if(null===f)return null;"bottom"===h.v.edge&&(f=new l.ComputedLength(-f.rw-e.styleAttrs[k.byName.extent.qname].h.rw,b.dimensions.h.rh-f.rh-e.styleAttrs[k.byName.extent.qname].h.rh));var g=l.toComputedLength(h.h.offset.value,
h.h.offset.unit,null,new l.ComputedLength(b.dimensions.w.rw-e.styleAttrs[k.byName.extent.qname].w.rw,-e.styleAttrs[k.byName.extent.qname].w.rh),null,b.pxLength.w);if(null===f)return null;"right"===h.h.edge&&(g=new l.ComputedLength(b.dimensions.w.rw-g.rw-e.styleAttrs[k.byName.extent.qname].w.rw,-g.rh-e.styleAttrs[k.byName.extent.qname].w.rh));return{h:f,w:g}}),new g(e.ns_tts,"ruby","none",["span"],!1,!0,function(b){return b},null),new g(e.ns_tts,"rubyAlign","center",["span"],!0,!0,function(b){return"center"!==
b&&"spaceAround"!==b?null:b},null),new g(e.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(b){return b},null),new g(e.ns_tts,"rubyReserve","none",["p"],!0,!0,function(b){var f=b.split(" ");b=[null,null];if(0===f.length||2<f.length||"none"!==f[0]&&"both"!==f[0]&&"after"!==f[0]&&"before"!==f[0]&&"outside"!==f[0])return null;b[0]=f[0];if(2===f.length&&"none"!==f[0])if(f=l.parseLength(f[1]))b[1]=f;else return null;return b},function(b,f,e,h,g){if("none"===h[0])return h;b=null===h[1]?new l.ComputedLength(.5*
e.styleAttrs[k.byName.fontSize.qname].rw,.5*e.styleAttrs[k.byName.fontSize.qname].rh):l.toComputedLength(h[1].value,h[1].unit,e.styleAttrs[k.byName.fontSize.qname],e.styleAttrs[k.byName.fontSize.qname],b.cellLength.h,b.pxLength.h);return null===b?null:[h[0],b]}),new g(e.ns_tts,"showBackground","whenActive",["region"],!1,!0,function(b){return b},null),new g(e.ns_tts,"textAlign","start",["p"],!0,!0,function(b){return b},function(b,f,e,h,k){return"left"===h?"start":"right"===h?"end":h}),new g(e.ns_tts,
"textCombine","none",["span"],!0,!0,function(b){return"none"===b||"all"===b?b:null},null),new g(e.ns_tts,"textDecoration","none",["span"],!0,!0,function(b){return b.split(" ")},null),new g(e.ns_tts,"textEmphasis","none",["span"],!0,!0,function(b){b=b.split(" ");for(var f={style:null,symbol:null,color:null,position:null},e=0;e<b.length;e++)if("none"===b[e]||"auto"===b[e])f.style=b[e];else if("filled"===b[e]||"open"===b[e])f.style=b[e];else if("circle"===b[e]||"dot"===b[e]||"sesame"===b[e])f.symbol=
b[e];else if("current"===b[e])f.color=b[e];else if("outside"===b[e]||"before"===b[e]||"after"===b[e])f.position=b[e];else if(f.color=l.parseColor(b[e]),null===f.color)return null;null==f.style&&null==f.symbol?f.style="auto":(f.symbol=f.symbol||"circle",f.style=f.style||"filled");f.position=f.position||"outside";f.color=f.color||"current";return f},null),new g(e.ns_tts,"textOutline","none",["span"],!0,!0,function(b){if("none"===b)return b;var f={};b=b.split(" ");if(0===b.length||2<b.length)return null;
var e=l.parseColor(b[0]);f.color=e;null!==e&&b.shift();if(1!==b.length)return null;b=l.parseLength(b[0]);if(!b)return null;f.thickness=b;return f},function(b,f,e,h,g){if("none"===h)return h;f={};f.color=null===h.color?e.styleAttrs[k.byName.color.qname]:h.color;f.thickness=l.toComputedLength(h.thickness.value,h.thickness.unit,e.styleAttrs[k.byName.fontSize.qname],e.styleAttrs[k.byName.fontSize.qname],b.cellLength.h,b.pxLength.h);return null===f.thickness?null:f}),new g(e.ns_tts,"textShadow","none",
["span"],!0,!0,l.parseTextShadow,function(b,f,e,h){if("none"===h)return h;f=[];for(var g=0;g<h.length;g++){var t={};t.x_off=l.toComputedLength(h[g][0].value,h[g][0].unit,null,e.styleAttrs[k.byName.fontSize.qname],null,b.pxLength.w);if(null===t.x_off)return null;t.y_off=l.toComputedLength(h[g][1].value,h[g][1].unit,null,e.styleAttrs[k.byName.fontSize.qname],null,b.pxLength.h);if(null===t.y_off)return null;if(null===h[g][2])t.b_radius=0;else if(t.b_radius=l.toComputedLength(h[g][2].value,h[g][2].unit,
null,e.styleAttrs[k.byName.fontSize.qname],null,b.pxLength.h),null===t.b_radius)return null;t.color=null===h[g][3]?e.styleAttrs[k.byName.color.qname]:h[g][3];f.push(t)}return f}),new g(e.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(b){return b},null),new g(e.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(b){return b},null),new g(e.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(b){return b},null),new g(e.ns_tts,"writingMode","lrtb",["region"],!1,!0,
function(b){return b},null),new g(e.ns_tts,"zIndex","auto",["region"],!1,!0,function(b){"auto"!==b&&(b=parseInt(b),isNaN(b)&&(b=null));return b},null),new g(e.ns_ebutts,"linePadding","0c",["p"],!0,!1,l.parseLength,function(b,f,e,h,g){return l.toComputedLength(h.value,h.unit,null,null,b.cellLength.w,null)}),new g(e.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(b){return b},null),new g(e.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(b){return b},null),new g(e.ns_itts,"forcedDisplay",
"false",["body","div","p","region","span"],!0,!0,function(b){return"true"===b?!0:!1},null),new g(e.ns_itts,"fillLineGap","true",["p"],!0,!0,function(b){return"true"===b?!0:!1},null)];k.byQName={};for(var u in k.all)k.all.hasOwnProperty(u)&&(k.byQName[k.all[u].qname]=k.all[u]);k.byName={};for(var v in k.all)k.all.hasOwnProperty(v)&&(k.byName[k.all[v].name]=k.all[v])})("undefined"===typeof g?this.imscStyles={}:g,"undefined"===typeof imscNames?e("./names"):imscNames,"undefined"===typeof imscUtils?e("./utils"):
imscUtils)},{"./names":5,"./utils":7}],7:[function(e,v,g){(function(e){var g=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,k=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,w=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,v={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,
255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(b){var e,l=null,h=v[b.toLowerCase()];void 0!==h?l=h:null!==(e=g.exec(b))?l=[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),void 0!==e[4]?parseInt(e[4],16):255]:null!==(e=k.exec(b))?l=[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),255]:null!==(e=w.exec(b))&&(l=[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseInt(e[4])]);
return l};var M=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;e.parseLength=function(b){var e,g=null;null!==(e=M.exec(b))&&(g={value:parseFloat(e[1]),unit:e[2]});return g};e.parseTextShadow=function(b){b=b.match(/([^\(,\)]|\([^\)]+\))+/g);for(var f=[],g=0;g<b.length;g++){var h=b[g].split(" ");if(1===h.length&&"none"===h[0])return"none";if(1<h.length&&5>h.length){var k=[null,null,null,null],l=e.parseLength(h.shift());if(null===l)return null;k[0]=l;l=e.parseLength(h.shift());if(null===l)return null;
k[1]=l;if(0!==h.length&&(l=e.parseLength(h[0]),null!==l&&(k[2]=l,h.shift()),0!==h.length)){h=e.parseColor(h[0]);if(null===h)return null;k[3]=h}f.push(k)}}return f};e.parsePosition=function(b){b=b.split(" ");var f=function(b){return"center"===b||"left"===b||"top"===b||"bottom"===b||"right"===b};if(4<b.length)return null;for(var g=0;g<b.length;g++)if(!f(b[g])){var h=e.parseLength(b[g]);if(null===h)return null;b[g]=h}g={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};
for(h=0;h<b.length;){var k=b[h++];if(f(k)){var l={value:0,unit:"%"};2!==b.length&&h<b.length&&!f(b[h])&&(l=b[h++]);"right"===k?(g.h.edge=k,g.h.offset=l):"bottom"===k?(g.v.edge=k,g.v.offset=l):"left"===k?g.h.offset=l:"top"===k&&(g.v.offset=l)}else if(1===b.length||2===b.length)1===h?g.h.offset=k:g.v.offset=k;else return null}return g};e.ComputedLength=function(b,e){this.rw=b;this.rh=e};e.ComputedLength.prototype.toUsedLength=function(b,e){return b*this.rw+e*this.rh};e.ComputedLength.prototype.multiply=
function(b,e){return e?b*e:b};e.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};e.toComputedLength=function(b,f,g,h,k,l){return"%"===f&&h?new e.ComputedLength(h.rw*b/100,h.rh*b/100):"em"===f&&g?new e.ComputedLength(g.rw*b,g.rh*b):"c"===f&&k?new e.ComputedLength(b*k.rw,b*k.rh):"px"===f&&l?new e.ComputedLength(b*l.rw,b*l.rh):"rh"===f?new e.ComputedLength(0,b/100):"rw"===f?new e.ComputedLength(b/100,0):null}})("undefined"===typeof g?this.imscUtils={}:g)},{}]},{},[4])(4)});
