/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource>  http://mths.be/fromcodepoint v0.1.0 by @mathias */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,v,m){c!=Array.prototype&&c!=Object.prototype&&(c[v]=m.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,v,m,p){if(v){m=$jscomp.global;c=c.split(".");for(p=0;p<c.length-1;p++){var g=c[p];g in m||(m[g]={});m=m[g]}c=c[c.length-1];p=m[c];v=v(p);v!=p&&null!=v&&$jscomp.defineProperty(m,c,{configurable:!0,writable:!0,value:v})}};$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(c,m,p){var g=this.length||0;0>m&&(m=Math.max(0,g+m));if(null==p||p>g)p=g;p=Number(p);0>p&&(p=Math.max(0,g+p));for(m=Number(m||0);m<p;m++)this[m]=c;return this}},"es6","es3");
$jscomp.polyfill("Number.isNaN",function(c){return c?c:function(c){return"number"===typeof c&&isNaN(c)}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(v){return $jscomp.SYMBOL_PREFIX+(v||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(c){var v=0;return $jscomp.iteratorPrototype(function(){return v<c.length?{done:!1,value:c[v++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,v){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var m=0,p={next:function(){if(m<c.length){var g=m++;return{value:v(g,c[g]),done:!1}}p.next=function(){return{done:!0,value:void 0}};return p.next()}};p[Symbol.iterator]=function(){return p};return p};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();var v=c[Symbol.iterator];return v?v.call(c):$jscomp.arrayIterator(c)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(c){function v(){this.batch_=null}function m(a){return a instanceof g?a:new g(function(l,g){l(a)})}if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;v.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};v.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var p=$jscomp.global.setTimeout;v.prototype.asyncExecuteFunction=function(a){p(a,
0)};v.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var l=0;l<a.length;++l){var g=a[l];a[l]=null;try{g()}catch(d){this.asyncThrow_(d)}}}this.batch_=null};v.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var g=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var l=this.createResolveAndReject_();try{a(l.resolve,l.reject)}catch(y){l.reject(y)}};g.prototype.createResolveAndReject_=
function(){function a(d){return function(a){g||(g=!0,d.call(l,a))}}var l=this,g=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};g.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof g)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var l=null!=a;break a;case "function":l=!0;break a;default:l=!1}l?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};g.prototype.resolveToNonPromiseObj_=function(a){var l=
void 0;try{l=a.then}catch(y){this.reject_(y);return}"function"==typeof l?this.settleSameAsThenable_(l,a):this.fulfill_(a)};g.prototype.reject_=function(a){this.settle_(2,a)};g.prototype.fulfill_=function(a){this.settle_(1,a)};g.prototype.settle_=function(a,l){if(0!=this.state_)throw Error("Cannot settle("+a+", "+l+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=l;this.executeOnSettledCallbacks_()};g.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var g=
0;g<this.onSettledCallbacks_.length;++g)a.asyncExecute(this.onSettledCallbacks_[g]);this.onSettledCallbacks_=null}};var a=new v;g.prototype.settleSameAsPromise_=function(a){var l=this.createResolveAndReject_();a.callWhenSettled_(l.resolve,l.reject)};g.prototype.settleSameAsThenable_=function(a,l){var g=this.createResolveAndReject_();try{a.call(l,g.resolve,g.reject)}catch(d){g.reject(d)}};g.prototype.then=function(a,l){function c(a,u){return"function"==typeof a?function(h){try{d(a(h))}catch(G){t(G)}}:
u}var d,t,u=new g(function(a,u){d=a;t=u});this.callWhenSettled_(c(a,d),c(l,t));return u};g.prototype.catch=function(a){return this.then(void 0,a)};g.prototype.callWhenSettled_=function(g,l){function c(){switch(d.state_){case 1:g(d.result_);break;case 2:l(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?a.asyncExecute(c):this.onSettledCallbacks_.push(c)};g.resolve=m;g.reject=function(a){return new g(function(l,g){g(a)})};g.race=function(a){return new g(function(l,
g){for(var d=$jscomp.makeIterator(a),t=d.next();!t.done;t=d.next())m(t.value).callWhenSettled_(l,g)})};g.all=function(a){var l=$jscomp.makeIterator(a),c=l.next();return c.done?m([]):new g(function(a,t){function d(d){return function(u){h[d]=u;g--;0==g&&a(h)}}var h=[],g=0;do h.push(void 0),g++,m(c.value).callWhenSettled_(d(h.length-1),t),c=l.next();while(!c.done)})};return g},"es6","es3");$jscomp.underscoreProtoCanBeSet=function(){var c={a:!0},v={};try{return v.__proto__=c,v.a}catch(m){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(c,v){c.__proto__=v;if(c.__proto__!==v)throw new TypeError(c+" is not extensible");return c}:null;$jscomp.polyfill("Object.setPrototypeOf",function(c){return c||$jscomp.setPrototypeOf},"es6","es5");
$jscomp.polyfill("String.fromCodePoint",function(c){return c?c:function(c){for(var m="",p=0;p<arguments.length;p++){var g=Number(arguments[p]);if(0>g||1114111<g||g!==Math.floor(g))throw new RangeError("invalid_code_point "+g);65535>=g?m+=String.fromCharCode(g):(g-=65536,m+=String.fromCharCode(g>>>10&1023|55296),m+=String.fromCharCode(g&1023|56320))}return m}},"es6","es3");$jscomp.owns=function(c,v){return Object.prototype.hasOwnProperty.call(c,v)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(c,v){for(var m=1;m<arguments.length;m++){var p=arguments[m];if(p)for(var g in p)$jscomp.owns(p,g)&&(c[g]=p[g])}return c};$jscomp.polyfill("Object.assign",function(c){return c||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.entries",function(c){return c?c:function(c){var m=[],p;for(p in c)$jscomp.owns(c,p)&&m.push([p,c[p]]);return m}},"es8","es3");
$jscomp.polyfill("Object.is",function(c){return c?c:function(c,m){return c===m?0!==c||1/c===1/m:c!==c&&m!==m}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(c){return c?c:function(c,m){var p=this;p instanceof String&&(p=String(p));var g=p.length;m=m||0;for(0>m&&(m=Math.max(m+g,0));m<g;m++){var a=p[m];if(a===c||Object.is(a,c))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(c,v,m){if(null==c)throw new TypeError("The 'this' value for String.prototype."+m+" must not be null or undefined");if(v instanceof RegExp)throw new TypeError("First argument to String.prototype."+m+" must not be a regular expression");return c+""};$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(c,m){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,m||0)}},"es6","es3");
$jscomp.polyfill("Math.sign",function(c){return c?c:function(c){c=Number(c);return 0===c||isNaN(c)?c:0<c?1:-1}},"es6","es3");
(function(c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=c()})(function(){return function(){function c(v,m,p){function g(l,y){if(!m[l]){if(!v[l]){var d="function"==typeof require&&require;if(!y&&d)return d(l,!0);if(a)return a(l,!0);y=Error("Cannot find module '"+l+"'");throw y.code="MODULE_NOT_FOUND",y;}y=
m[l]={exports:{}};v[l][0].call(y.exports,function(a){return g(v[l][1][a]||a)},y,y.exports,c,v,m,p)}return m[l].exports}for(var a="function"==typeof require&&require,x=0;x<p.length;x++)g(p[x]);return g}return c}()({1:[function(c,v,m){function p(a){var d=a.length;if(0<d%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");-1===a&&(a=d);return[a,a===d?0:4-a%4]}function g(l,d,t){for(var u=[],h=d;h<t;h+=3)d=(l[h]<<16&16711680)+(l[h+1]<<8&65280)+(l[h+2]&255),u.push(a[d>>18&63]+
a[d>>12&63]+a[d>>6&63]+a[d&63]);return u.join("")}m.byteLength=function(a){a=p(a);var d=a[1];return 3*(a[0]+d)/4-d};m.toByteArray=function(a){var d=p(a);var t=d[0];d=d[1];var u=new l(3*(t+d)/4-d),h=0,c=0<d?t-4:t,g;for(g=0;g<c;g+=4)t=x[a.charCodeAt(g)]<<18|x[a.charCodeAt(g+1)]<<12|x[a.charCodeAt(g+2)]<<6|x[a.charCodeAt(g+3)],u[h++]=t>>16&255,u[h++]=t>>8&255,u[h++]=t&255;2===d&&(t=x[a.charCodeAt(g)]<<2|x[a.charCodeAt(g+1)]>>4,u[h++]=t&255);1===d&&(t=x[a.charCodeAt(g)]<<10|x[a.charCodeAt(g+1)]<<4|x[a.charCodeAt(g+
2)]>>2,u[h++]=t>>8&255,u[h++]=t&255);return u};m.fromByteArray=function(l){for(var d=l.length,t=d%3,u=[],h=0,c=d-t;h<c;h+=16383)u.push(g(l,h,h+16383>c?c:h+16383));1===t?(l=l[d-1],u.push(a[l>>2]+a[l<<4&63]+"==")):2===t&&(l=(l[d-2]<<8)+l[d-1],u.push(a[l>>10]+a[l>>4&63]+a[l<<2&63]+"="));return u.join("")};var a=[],x=[],l="undefined"!==typeof Uint8Array?Uint8Array:Array;for(c=0;64>c;++c)a[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c],x["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(c)]=
c;x[45]=62;x[95]=63},{}],2:[function(c,v,m){},{}],3:[function(c,v,m){(function(p){(function(){function g(f){if(f>L)throw new RangeError('The value "'+f+'" is invalid for option "size"');f=new Uint8Array(f);f.__proto__=a.prototype;return f}function a(f,e,a){if("number"===typeof f){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return y(f)}return p(f,e,a)}function p(f,e,b){if("string"===typeof f){var q=e;if("string"!==typeof q||""===
q)q="utf8";if(!a.isEncoding(q))throw new TypeError("Unknown encoding: "+q);e=h(f,q)|0;b=g(e);f=b.write(f,q);f!==e&&(b=b.slice(0,f));return b}if(ArrayBuffer.isView(f))return d(f);if(null==f)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(J(f,ArrayBuffer)||f&&J(f.buffer,ArrayBuffer)){if(0>e||f.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<e+(b||0))throw new RangeError('"length" is outside of buffer bounds');
f=void 0===e&&void 0===b?new Uint8Array(f):void 0===b?new Uint8Array(f,e):new Uint8Array(f,e,b);f.__proto__=a.prototype;return f}if("number"===typeof f)throw new TypeError('The "value" argument must not be of type number. Received type number');q=f.valueOf&&f.valueOf();if(null!=q&&q!==f)return a.from(q,e,b);if(q=t(f))return q;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof f[Symbol.toPrimitive])return a.from(f[Symbol.toPrimitive]("string"),e,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof f);}function l(f){if("number"!==typeof f)throw new TypeError('"size" argument must be of type number');if(0>f)throw new RangeError('The value "'+f+'" is invalid for option "size"');}function y(f){l(f);return g(0>f?0:u(f)|0)}function d(f){for(var e=0>f.length?0:u(f.length)|0,a=g(e),q=0;q<e;q+=1)a[q]=f[q]&255;return a}function t(f){if(a.isBuffer(f)){var e=u(f.length)|0,b=g(e);if(0===b.length)return b;f.copy(b,0,0,e);return b}if(void 0!==f.length)return(e="number"!==typeof f.length)||(e=f.length,
e=e!==e),e?g(0):d(f);if("Buffer"===f.type&&Array.isArray(f.data))return d(f.data)}function u(f){if(f>=L)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L.toString(16)+" bytes");return f|0}function h(f,e){if(a.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||J(f,ArrayBuffer))return f.byteLength;if("string"!==typeof f)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);var b=f.length,q=2<arguments.length&&
!0===arguments[2];if(!q&&0===b)return 0;for(var d=!1;;)switch(e){case "ascii":case "latin1":case "binary":return b;case "utf8":case "utf-8":return A(f).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*b;case "hex":return b>>>1;case "base64":return v.toByteArray(k(f)).length;default:if(d)return q?-1:A(f).length;e=(""+e).toLowerCase();d=!0}}function w(f,e,a){var q=!1;if(void 0===e||0>e)e=0;if(e>this.length)return"";if(void 0===a||a>this.length)a=this.length;if(0>=a)return"";a>>>=
0;e>>>=0;if(a<=e)return"";for(f||(f="utf8");;)switch(f){case "hex":f=e;e=a;a=this.length;if(!f||0>f)f=0;if(!e||0>e||e>a)e=a;q="";for(a=f;a<e;++a)f=q,q=this[a],q=16>q?"0"+q.toString(16):q.toString(16),q=f+q;return q;case "utf8":case "utf-8":return D(this,e,a);case "ascii":f="";for(a=Math.min(this.length,a);e<a;++e)f+=String.fromCharCode(this[e]&127);return f;case "latin1":case "binary":f="";for(a=Math.min(this.length,a);e<a;++e)f+=String.fromCharCode(this[e]);return f;case "base64":return e=0===e&&
a===this.length?v.fromByteArray(this):v.fromByteArray(this.slice(e,a)),e;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=this.slice(e,a);a="";for(f=0;f<e.length;f+=2)a+=String.fromCharCode(e[f]+256*e[f+1]);return a;default:if(q)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase();q=!0}}function r(f,e,a){var q=f[e];f[e]=f[a];f[a]=q}function G(f,e,b,q,d){if(0===f.length)return-1;"string"===typeof b?(q=b,b=0):2147483647<b?b=2147483647:-2147483648>b&&(b=-2147483648);b=+b;b!==b&&
(b=d?0:f.length-1);0>b&&(b=f.length+b);if(b>=f.length){if(d)return-1;b=f.length-1}else if(0>b)if(d)b=0;else return-1;"string"===typeof e&&(e=a.from(e,q));if(a.isBuffer(e))return 0===e.length?-1:F(f,e,b,q,d);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?d?Uint8Array.prototype.indexOf.call(f,e,b):Uint8Array.prototype.lastIndexOf.call(f,e,b):F(f,[e],b,q,d);throw new TypeError("val must be string, number or Buffer");}function F(f,e,a,q,b){function d(e,f){return 1===
h?e[f]:e.readUInt16BE(f*h)}var h=1,n=f.length,k=e.length;if(void 0!==q&&(q=String(q).toLowerCase(),"ucs2"===q||"ucs-2"===q||"utf16le"===q||"utf-16le"===q)){if(2>f.length||2>e.length)return-1;h=2;n/=2;k/=2;a/=2}if(b)for(q=-1;a<n;a++)if(d(f,a)===d(e,-1===q?0:a-q)){if(-1===q&&(q=a),a-q+1===k)return q*h}else-1!==q&&(a-=a-q),q=-1;else for(a+k>n&&(a=n-k);0<=a;a--){n=!0;for(q=0;q<k;q++)if(d(f,a+q)!==d(e,q)){n=!1;break}if(n)return a}return-1}function D(f,e,a){a=Math.min(f.length,a);for(var q=[];e<a;){var b=
f[e],d=null,h=239<b?4:223<b?3:191<b?2:1;if(e+h<=a)switch(h){case 1:128>b&&(d=b);break;case 2:var n=f[e+1];128===(n&192)&&(b=(b&31)<<6|n&63,127<b&&(d=b));break;case 3:n=f[e+1];var k=f[e+2];128===(n&192)&&128===(k&192)&&(b=(b&15)<<12|(n&63)<<6|k&63,2047<b&&(55296>b||57343<b)&&(d=b));break;case 4:n=f[e+1];k=f[e+2];var l=f[e+3];128===(n&192)&&128===(k&192)&&128===(l&192)&&(b=(b&15)<<18|(n&63)<<12|(k&63)<<6|l&63,65535<b&&1114112>b&&(d=b))}null===d?(d=65533,h=1):65535<d&&(d-=65536,q.push(d>>>10&1023|55296),
d=56320|d&1023);q.push(d);e+=h}f=q.length;if(f<=I)q=String.fromCharCode.apply(String,q);else{a="";for(e=0;e<f;)a+=String.fromCharCode.apply(String,q.slice(e,e+=I));q=a}return q}function z(f,e,a){if(0!==f%1||0>f)throw new RangeError("offset is not uint");if(f+e>a)throw new RangeError("Trying to access beyond buffer length");}function H(f,e,b,q,d,h){if(!a.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>d||e<h)throw new RangeError('"value" argument is out of bounds');
if(b+q>f.length)throw new RangeError("Index out of range");}function b(f,e,a,q,b,d){if(a+q>f.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("Index out of range");}function C(f,e,a,q,d){e=+e;a>>>=0;d||b(f,e,a,4,3.4028234663852886E38,-3.4028234663852886E38);E.write(f,e,a,q,23,4);return a+4}function n(f,e,a,q,d){e=+e;a>>>=0;d||b(f,e,a,8,1.7976931348623157E308,-1.7976931348623157E308);E.write(f,e,a,q,52,8);return a+8}function k(f){f=f.split("=")[0];f=f.trim().replace(O,
"");if(2>f.length)return"";for(;0!==f.length%4;)f+="=";return f}function A(f,e){e=e||Infinity;for(var a,q=f.length,b=null,d=[],h=0;h<q;++h){a=f.charCodeAt(h);if(55295<a&&57344>a){if(!b){if(56319<a){-1<(e-=3)&&d.push(239,191,189);continue}else if(h+1===q){-1<(e-=3)&&d.push(239,191,189);continue}b=a;continue}if(56320>a){-1<(e-=3)&&d.push(239,191,189);b=a;continue}a=(b-55296<<10|a-56320)+65536}else b&&-1<(e-=3)&&d.push(239,191,189);b=null;if(128>a){if(0>--e)break;d.push(a)}else if(2048>a){if(0>(e-=2))break;
d.push(a>>6|192,a&63|128)}else if(65536>a){if(0>(e-=3))break;d.push(a>>12|224,a>>6&63|128,a&63|128)}else if(1114112>a){if(0>(e-=4))break;d.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw Error("Invalid code point");}return d}function M(f){for(var e=[],a=0;a<f.length;++a)e.push(f.charCodeAt(a)&255);return e}function B(f,e,a,q){for(var b=0;b<q&&!(b+a>=e.length||b>=f.length);++b)e[b+a]=f[b];return b}function J(f,e){return f instanceof e||null!=f&&null!=f.constructor&&null!=f.constructor.name&&
f.constructor.name===e.name}var v=c("base64-js"),E=c("ieee754");m.Buffer=a;m.SlowBuffer=function(f){+f!=f&&(f=0);return a.alloc(+f)};m.INSPECT_MAX_BYTES=50;var L=2147483647;m.kMaxLength=L;a.TYPED_ARRAY_SUPPORT=function(){try{var f=new Uint8Array(1);f.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===f.foo()}catch(e){return!1}}();a.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}});Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});a.poolSize=8192;a.from=function(f,e,a){return p(f,e,a)};a.prototype.__proto__=Uint8Array.prototype;
a.__proto__=Uint8Array;a.alloc=function(f,e,a){l(f);f=0>=f?g(f):void 0!==e?"string"===typeof a?g(f).fill(e,a):g(f).fill(e):g(f);return f};a.allocUnsafe=function(f){return y(f)};a.allocUnsafeSlow=function(f){return y(f)};a.isBuffer=function(f){return null!=f&&!0===f._isBuffer&&f!==a.prototype};a.compare=function(f,e){J(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength));J(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength));if(!a.isBuffer(f)||!a.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(f===e)return 0;for(var b=f.length,q=e.length,d=0,h=Math.min(b,q);d<h;++d)if(f[d]!==e[d]){b=f[d];q=e[d];break}return b<q?-1:q<b?1:0};a.isEncoding=function(f){switch(String(f).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};a.concat=function(f,e){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(0===f.length)return a.alloc(0);
var b;if(void 0===e)for(b=e=0;b<f.length;++b)e+=f[b].length;e=a.allocUnsafe(e);var q=0;for(b=0;b<f.length;++b){var d=f[b];J(d,Uint8Array)&&(d=a.from(d));if(!a.isBuffer(d))throw new TypeError('"list" argument must be an Array of Buffers');d.copy(e,q);q+=d.length}return e};a.byteLength=h;a.prototype._isBuffer=!0;a.prototype.swap16=function(){var f=this.length;if(0!==f%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<f;e+=2)r(this,e,e+1);return this};a.prototype.swap32=
function(){var f=this.length;if(0!==f%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<f;e+=4)r(this,e,e+3),r(this,e+1,e+2);return this};a.prototype.swap64=function(){var f=this.length;if(0!==f%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<f;e+=8)r(this,e,e+7),r(this,e+1,e+6),r(this,e+2,e+5),r(this,e+3,e+4);return this};a.prototype.toString=function(){var f=this.length;return 0===f?"":0===arguments.length?D(this,0,f):w.apply(this,
arguments)};a.prototype.toLocaleString=a.prototype.toString;a.prototype.equals=function(f){if(!a.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:0===a.compare(this,f)};a.prototype.inspect=function(){var f=m.INSPECT_MAX_BYTES;var e=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim();this.length>f&&(e+=" ... ");return"<Buffer "+e+">"};a.prototype.compare=function(f,e,b,q,d){J(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength));if(!a.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof f);void 0===e&&(e=0);void 0===b&&(b=f?f.length:0);void 0===q&&(q=0);void 0===d&&(d=this.length);if(0>e||b>f.length||0>q||d>this.length)throw new RangeError("out of range index");if(q>=d&&e>=b)return 0;if(q>=d)return-1;if(e>=b)return 1;e>>>=0;b>>>=0;q>>>=0;d>>>=0;if(this===f)return 0;var h=d-q,n=b-e,k=Math.min(h,n);q=this.slice(q,d);f=f.slice(e,b);for(e=0;e<k;++e)if(q[e]!==f[e]){h=q[e];n=f[e];break}return h<n?-1:n<h?1:0};a.prototype.includes=function(f,e,a){return-1!==this.indexOf(f,e,a)};a.prototype.indexOf=
function(f,e,a){return G(this,f,e,a,!0)};a.prototype.lastIndexOf=function(f,e,a){return G(this,f,e,a,!1)};a.prototype.write=function(f,e,a,b){if(void 0===e)b="utf8",a=this.length,e=0;else if(void 0===a&&"string"===typeof e)b=e,a=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(a)?(a>>>=0,void 0===b&&(b="utf8")):(b=a,a=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var q=this.length-e;if(void 0===a||a>q)a=q;if(0<f.length&&(0>a||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");
b||(b="utf8");for(q=!1;;)switch(b){case "hex":a:{e=Number(e)||0;b=this.length-e;a?(a=Number(a),a>b&&(a=b)):a=b;b=f.length;a>b/2&&(a=b/2);for(b=0;b<a;++b){q=parseInt(f.substr(2*b,2),16);if(q!==q){f=b;break a}this[e+b]=q}f=b}return f;case "utf8":case "utf-8":return B(A(f,this.length-e),this,e,a);case "ascii":return B(M(f),this,e,a);case "latin1":case "binary":return B(M(f),this,e,a);case "base64":return B(v.toByteArray(k(f)),this,e,a);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=f;q=this.length-
e;for(var d=[],h=0;h<b.length&&!(0>(q-=2));++h){var n=b.charCodeAt(h);f=n>>8;n%=256;d.push(n);d.push(f)}return B(d,this,e,a);default:if(q)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase();q=!0}};a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;a.prototype.slice=function(f,e){var b=this.length;f=~~f;e=void 0===e?b:~~e;0>f?(f+=b,0>f&&(f=0)):f>b&&(f=b);0>e?(e+=b,0>e&&(e=0)):e>b&&(e=b);e<f&&(e=f);f=this.subarray(f,e);f.__proto__=
a.prototype;return f};a.prototype.readUIntLE=function(f,e,a){f>>>=0;e>>>=0;a||z(f,e,this.length);a=this[f];for(var b=1,d=0;++d<e&&(b*=256);)a+=this[f+d]*b;return a};a.prototype.readUIntBE=function(f,e,a){f>>>=0;e>>>=0;a||z(f,e,this.length);a=this[f+--e];for(var b=1;0<e&&(b*=256);)a+=this[f+--e]*b;return a};a.prototype.readUInt8=function(f,e){f>>>=0;e||z(f,1,this.length);return this[f]};a.prototype.readUInt16LE=function(f,e){f>>>=0;e||z(f,2,this.length);return this[f]|this[f+1]<<8};a.prototype.readUInt16BE=
function(f,e){f>>>=0;e||z(f,2,this.length);return this[f]<<8|this[f+1]};a.prototype.readUInt32LE=function(f,e){f>>>=0;e||z(f,4,this.length);return(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]};a.prototype.readUInt32BE=function(f,e){f>>>=0;e||z(f,4,this.length);return 16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])};a.prototype.readIntLE=function(f,e,a){f>>>=0;e>>>=0;a||z(f,e,this.length);a=this[f];for(var b=1,d=0;++d<e&&(b*=256);)a+=this[f+d]*b;a>=128*b&&(a-=Math.pow(2,8*e));return a};
a.prototype.readIntBE=function(f,e,a){f>>>=0;e>>>=0;a||z(f,e,this.length);a=e;for(var b=1,d=this[f+--a];0<a&&(b*=256);)d+=this[f+--a]*b;d>=128*b&&(d-=Math.pow(2,8*e));return d};a.prototype.readInt8=function(f,e){f>>>=0;e||z(f,1,this.length);return this[f]&128?-1*(255-this[f]+1):this[f]};a.prototype.readInt16LE=function(f,e){f>>>=0;e||z(f,2,this.length);f=this[f]|this[f+1]<<8;return f&32768?f|4294901760:f};a.prototype.readInt16BE=function(f,e){f>>>=0;e||z(f,2,this.length);f=this[f+1]|this[f]<<8;return f&
32768?f|4294901760:f};a.prototype.readInt32LE=function(f,e){f>>>=0;e||z(f,4,this.length);return this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24};a.prototype.readInt32BE=function(f,e){f>>>=0;e||z(f,4,this.length);return this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]};a.prototype.readFloatLE=function(f,e){f>>>=0;e||z(f,4,this.length);return E.read(this,f,!0,23,4)};a.prototype.readFloatBE=function(f,e){f>>>=0;e||z(f,4,this.length);return E.read(this,f,!1,23,4)};a.prototype.readDoubleLE=function(f,
e){f>>>=0;e||z(f,8,this.length);return E.read(this,f,!0,52,8)};a.prototype.readDoubleBE=function(f,e){f>>>=0;e||z(f,8,this.length);return E.read(this,f,!1,52,8)};a.prototype.writeUIntLE=function(f,e,a,b){f=+f;e>>>=0;a>>>=0;b||H(this,f,e,a,Math.pow(2,8*a)-1,0);b=1;var d=0;for(this[e]=f&255;++d<a&&(b*=256);)this[e+d]=f/b&255;return e+a};a.prototype.writeUIntBE=function(f,e,a,b){f=+f;e>>>=0;a>>>=0;b||H(this,f,e,a,Math.pow(2,8*a)-1,0);b=a-1;var d=1;for(this[e+b]=f&255;0<=--b&&(d*=256);)this[e+b]=f/d&
255;return e+a};a.prototype.writeUInt8=function(f,e,a){f=+f;e>>>=0;a||H(this,f,e,1,255,0);this[e]=f&255;return e+1};a.prototype.writeUInt16LE=function(f,e,a){f=+f;e>>>=0;a||H(this,f,e,2,65535,0);this[e]=f&255;this[e+1]=f>>>8;return e+2};a.prototype.writeUInt16BE=function(f,e,a){f=+f;e>>>=0;a||H(this,f,e,2,65535,0);this[e]=f>>>8;this[e+1]=f&255;return e+2};a.prototype.writeUInt32LE=function(f,e,a){f=+f;e>>>=0;a||H(this,f,e,4,4294967295,0);this[e+3]=f>>>24;this[e+2]=f>>>16;this[e+1]=f>>>8;this[e]=f&
255;return e+4};a.prototype.writeUInt32BE=function(f,e,a){f=+f;e>>>=0;a||H(this,f,e,4,4294967295,0);this[e]=f>>>24;this[e+1]=f>>>16;this[e+2]=f>>>8;this[e+3]=f&255;return e+4};a.prototype.writeIntLE=function(f,e,a,b){f=+f;e>>>=0;b||(b=Math.pow(2,8*a-1),H(this,f,e,a,b-1,-b));b=0;var d=1,q=0;for(this[e]=f&255;++b<a&&(d*=256);)0>f&&0===q&&0!==this[e+b-1]&&(q=1),this[e+b]=(f/d>>0)-q&255;return e+a};a.prototype.writeIntBE=function(f,e,a,b){f=+f;e>>>=0;b||(b=Math.pow(2,8*a-1),H(this,f,e,a,b-1,-b));b=a-
1;var d=1,q=0;for(this[e+b]=f&255;0<=--b&&(d*=256);)0>f&&0===q&&0!==this[e+b+1]&&(q=1),this[e+b]=(f/d>>0)-q&255;return e+a};a.prototype.writeInt8=function(a,e,b){a=+a;e>>>=0;b||H(this,a,e,1,127,-128);0>a&&(a=255+a+1);this[e]=a&255;return e+1};a.prototype.writeInt16LE=function(a,e,b){a=+a;e>>>=0;b||H(this,a,e,2,32767,-32768);this[e]=a&255;this[e+1]=a>>>8;return e+2};a.prototype.writeInt16BE=function(a,e,b){a=+a;e>>>=0;b||H(this,a,e,2,32767,-32768);this[e]=a>>>8;this[e+1]=a&255;return e+2};a.prototype.writeInt32LE=
function(a,e,b){a=+a;e>>>=0;b||H(this,a,e,4,2147483647,-2147483648);this[e]=a&255;this[e+1]=a>>>8;this[e+2]=a>>>16;this[e+3]=a>>>24;return e+4};a.prototype.writeInt32BE=function(a,e,b){a=+a;e>>>=0;b||H(this,a,e,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);this[e]=a>>>24;this[e+1]=a>>>16;this[e+2]=a>>>8;this[e+3]=a&255;return e+4};a.prototype.writeFloatLE=function(a,e,b){return C(this,a,e,!0,b)};a.prototype.writeFloatBE=function(a,e,b){return C(this,a,e,!1,b)};a.prototype.writeDoubleLE=function(a,
e,b){return n(this,a,e,!0,b)};a.prototype.writeDoubleBE=function(a,e,b){return n(this,a,e,!1,b)};a.prototype.copy=function(b,e,d,q){if(!a.isBuffer(b))throw new TypeError("argument should be a Buffer");d||(d=0);q||0===q||(q=this.length);e>=b.length&&(e=b.length);e||(e=0);0<q&&q<d&&(q=d);if(q===d||0===b.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>d||d>=this.length)throw new RangeError("Index out of range");if(0>q)throw new RangeError("sourceEnd out of bounds");
q>this.length&&(q=this.length);b.length-e<q-d&&(q=b.length-e+d);var f=q-d;if(this===b&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,d,q);else if(this===b&&d<e&&e<q)for(q=f-1;0<=q;--q)b[q+e]=this[q+d];else Uint8Array.prototype.set.call(b,this.subarray(d,q),e);return f};a.prototype.fill=function(b,e,d,q){if("string"===typeof b){"string"===typeof e?(q=e,e=0,d=this.length):"string"===typeof d&&(q=d,d=this.length);if(void 0!==q&&"string"!==typeof q)throw new TypeError("encoding must be a string");
if("string"===typeof q&&!a.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(1===b.length){var f=b.charCodeAt(0);if("utf8"===q&&128>f||"latin1"===q)b=f}}else"number"===typeof b&&(b&=255);if(0>e||this.length<e||this.length<d)throw new RangeError("Out of range index");if(d<=e)return this;e>>>=0;d=void 0===d?this.length:d>>>0;b||(b=0);if("number"===typeof b)for(q=e;q<d;++q)this[q]=b;else{f=a.isBuffer(b)?b:a.from(b,q);var h=f.length;if(0===h)throw new TypeError('The value "'+b+'" is invalid for argument "value"');
for(q=0;q<d-e;++q)this[q+e]=f[q%h]}return this};var O=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,c("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:20}],4:[function(c,v,m){function p(){p.init.call(this)}function g(a){if("function"!==typeof a)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a);}function a(a,d,h,b){g(h);var l=a._events;if(void 0===l)l=a._events=Object.create(null),a._eventsCount=0;else{void 0!==l.newListener&&(a.emit("newListener",d,
h.listener?h.listener:h),l=a._events);var n=l[d]}void 0===n?(l[d]=h,++a._eventsCount):("function"===typeof n?n=l[d]=b?[h,n]:[n,h]:b?n.unshift(h):n.push(h),h=void 0===a._maxListeners?p.defaultMaxListeners:a._maxListeners,0<h&&n.length>h&&!n.warned&&(n.warned=!0,h=Error("Possible EventEmitter memory leak detected. "+n.length+" "+String(d)+" listeners added. Use emitter.setMaxListeners() to increase limit"),h.name="MaxListenersExceededWarning",h.emitter=a,h.type=d,h.count=n.length,console&&console.warn&&
console.warn(h)));return a}function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(a,d,h){a={fired:!1,wrapFn:void 0,target:a,type:d,listener:h};d=x.bind(a);d.listener=h;return a.wrapFn=d}function y(a,d,h){a=a._events;if(void 0===a)return[];d=a[d];if(void 0===d)return[];if("function"===typeof d)return h?[d.listener||d]:[d];if(h)for(h=Array(d.length),
a=0;a<h.length;++a)h[a]=d[a].listener||d[a];else h=t(d,d.length);return h}function d(a){var d=this._events;if(void 0!==d){a=d[a];if("function"===typeof a)return 1;if(void 0!==a)return a.length}return 0}function t(a,d){for(var h=Array(d),b=0;b<d;++b)h[b]=a[b];return h}function u(a,d,l){"function"===typeof a.on&&h(a,"error",d,l)}function h(a,d,h,b){if("function"===typeof a.on)if(b.once)a.once(d,h);else a.on(d,h);else if("function"===typeof a.addEventListener)a.addEventListener(d,function k(n){b.once&&
a.removeEventListener(d,k);h(n)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a);}var w=(c="object"===typeof Reflect?Reflect:null)&&"function"===typeof c.apply?c.apply:function(a,d,h){return Function.prototype.apply.call(a,d,h)};var r=c&&"function"===typeof c.ownKeys?c.ownKeys:Object.getOwnPropertySymbols?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:function(a){return Object.getOwnPropertyNames(a)};
var G=Number.isNaN||function(a){return a!==a};v.exports=p;v.exports.once=function(a,d){return new Promise(function(l,b){function c(h){a.removeListener(d,n);b(h)}function n(){"function"===typeof a.removeListener&&a.removeListener("error",c);l([].slice.call(arguments))}h(a,d,n,{once:!0});"error"!==d&&u(a,c,{once:!0})})};p.EventEmitter=p;p.prototype._events=void 0;p.prototype._eventsCount=0;p.prototype._maxListeners=void 0;var F=10;Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return F},
set:function(a){if("number"!==typeof a||0>a||G(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");F=a}});p.init=function(){if(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)this._events=Object.create(null),this._eventsCount=0;this._maxListeners=this._maxListeners||void 0};p.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||G(a))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+
a+".");this._maxListeners=a;return this};p.prototype.getMaxListeners=function(){return void 0===this._maxListeners?p.defaultMaxListeners:this._maxListeners};p.prototype.emit=function(a){for(var d=[],h=1;h<arguments.length;h++)d.push(arguments[h]);h="error"===a;var b=this._events;if(void 0!==b)h=h&&void 0===b.error;else if(!h)return!1;if(h){var l;0<d.length&&(l=d[0]);if(l instanceof Error)throw l;d=Error("Unhandled error."+(l?" ("+l.message+")":""));d.context=l;throw d;}h=b[a];if(void 0===h)return!1;
if("function"===typeof h)w(h,this,d);else for(l=h.length,b=t(h,l),h=0;h<l;++h)w(b[h],this,d);return!0};p.prototype.addListener=function(d,h){return a(this,d,h,!1)};p.prototype.on=p.prototype.addListener;p.prototype.prependListener=function(d,h){return a(this,d,h,!0)};p.prototype.once=function(a,d){g(d);this.on(a,l(this,a,d));return this};p.prototype.prependOnceListener=function(a,d){g(d);this.prependListener(a,l(this,a,d));return this};p.prototype.removeListener=function(a,d){var h;g(d);var b=this._events;
if(void 0===b)return this;var l=b[a];if(void 0===l)return this;if(l===d||l.listener===d)0===--this._eventsCount?this._events=Object.create(null):(delete b[a],b.removeListener&&this.emit("removeListener",a,l.listener||d));else if("function"!==typeof l){var n=-1;for(h=l.length-1;0<=h;h--)if(l[h]===d||l[h].listener===d){var k=l[h].listener;n=h;break}if(0>n)return this;if(0===n)l.shift();else{for(;n+1<l.length;n++)l[n]=l[n+1];l.pop()}1===l.length&&(b[a]=l[0]);void 0!==b.removeListener&&this.emit("removeListener",
a,k||d)}return this};p.prototype.off=p.prototype.removeListener;p.prototype.removeAllListeners=function(a){var d=this._events;if(void 0===d)return this;if(void 0===d.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==d[a]&&(0===--this._eventsCount?this._events=Object.create(null):delete d[a]),this;if(0===arguments.length){var h=Object.keys(d);for(d=0;d<h.length;++d){var b=h[d];"removeListener"!==b&&this.removeAllListeners(b)}this.removeAllListeners("removeListener");
this._events=Object.create(null);this._eventsCount=0;return this}h=d[a];if("function"===typeof h)this.removeListener(a,h);else if(void 0!==h)for(d=h.length-1;0<=d;d--)this.removeListener(a,h[d]);return this};p.prototype.listeners=function(a){return y(this,a,!0)};p.prototype.rawListeners=function(a){return y(this,a,!1)};p.listenerCount=function(a,h){return"function"===typeof a.listenerCount?a.listenerCount(h):d.call(a,h)};p.prototype.listenerCount=d;p.prototype.eventNames=function(){return 0<this._eventsCount?
r(this._events):[]}},{}],5:[function(c,v,m){function p(){g.call(this)}v.exports=p;var g=c("events").EventEmitter;c("inherits")(p,g);p.Readable=c("readable-stream/lib/_stream_readable.js");p.Writable=c("readable-stream/lib/_stream_writable.js");p.Duplex=c("readable-stream/lib/_stream_duplex.js");p.Transform=c("readable-stream/lib/_stream_transform.js");p.PassThrough=c("readable-stream/lib/_stream_passthrough.js");p.finished=c("readable-stream/lib/internal/streams/end-of-stream.js");p.pipeline=c("readable-stream/lib/internal/streams/pipeline.js");
p.Stream=p;p.prototype.pipe=function(a,c){function l(d){a.writable&&!1===a.write(d)&&w.pause&&w.pause()}function p(){w.readable&&w.resume&&w.resume()}function d(){r||(r=!0,a.end())}function t(){r||(r=!0,"function"===typeof a.destroy&&a.destroy())}function u(a){h();if(0===g.listenerCount(this,"error"))throw a;}function h(){w.removeListener("data",l);a.removeListener("drain",p);w.removeListener("end",d);w.removeListener("close",t);w.removeListener("error",u);a.removeListener("error",u);w.removeListener("end",
h);w.removeListener("close",h);a.removeListener("close",h)}var w=this;w.on("data",l);a.on("drain",p);a._isStdio||c&&!1===c.end||(w.on("end",d),w.on("close",t));var r=!1;w.on("error",u);a.on("error",u);w.on("end",h);w.on("close",h);a.on("close",h);a.emit("pipe",w);return a}},{events:4,inherits:21,"readable-stream/lib/_stream_duplex.js":7,"readable-stream/lib/_stream_passthrough.js":8,"readable-stream/lib/_stream_readable.js":9,"readable-stream/lib/_stream_transform.js":10,"readable-stream/lib/_stream_writable.js":11,
"readable-stream/lib/internal/streams/end-of-stream.js":15,"readable-stream/lib/internal/streams/pipeline.js":17}],6:[function(c,v,m){function p(a,c){a.prototype=Object.create(c.prototype);a.prototype.constructor=a;a.__proto__=c}function g(a,c,d){d||(d=Error);var l=function(a){function d(d,h,l){return a.call(this,"string"===typeof c?c:c(d,h,l))||this}p(d,a);return d}(d);l.prototype.name=d.name;l.prototype.code=a;x[a]=l}function a(a,c){if(Array.isArray(a)){var d=a.length;a=a.map(function(a){return String(a)});
return 2<d?"one of ".concat(c," ").concat(a.slice(0,d-1).join(", "),", or ")+a[d-1]:2===d?"one of ".concat(c," ").concat(a[0]," or ").concat(a[1]):"of ".concat(c," ").concat(a[0])}return"of ".concat(c," ").concat(String(a))}var x={};g("ERR_INVALID_OPT_VALUE",function(a,c){return'The value "'+c+'" is invalid for option "'+a+'"'},TypeError);g("ERR_INVALID_ARG_TYPE",function(l,c,d){var g;if(g="string"===typeof c)g="not "===c.substr(0,4);g?(g="must not be",c=c.replace(/^not /,"")):g="must be";var u=void 0;
if(void 0===u||u>l.length)u=l.length;" argument"===l.substring(u-9,u)?l="The ".concat(l," ").concat(g," ").concat(a(c,"type")):(u=void 0,"number"!==typeof u&&(u=0),u=u+1>l.length?!1:-1!==l.indexOf(".",u),u=u?"property":"argument",l='The "'.concat(l,'" ').concat(u," ").concat(g," ").concat(a(c,"type")));return l+=". Received type ".concat(typeof d)},TypeError);g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");g("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"});
g("ERR_STREAM_PREMATURE_CLOSE","Premature close");g("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"});g("ERR_MULTIPLE_CALLBACK","Callback called multiple times");g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");g("ERR_STREAM_WRITE_AFTER_END","write after end");g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);g("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError);g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT",
"stream.unshift() after end event");v.exports.codes=x},{}],7:[function(c,v,m){(function(p){(function(){function g(h){if(!(this instanceof g))return new g(h);y.call(this,h);d.call(this,h);this.allowHalfOpen=!0;h&&(!1===h.readable&&(this.readable=!1),!1===h.writable&&(this.writable=!1),!1===h.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||p.nextTick(x,this)}function x(a){a.end()}var l=Object.keys||function(a){var d=[],h;for(h in a)d.push(h);return d};
v.exports=g;var y=c("./_stream_readable"),d=c("./_stream_writable");c("inherits")(g,y);l=l(d.prototype);for(var t=0;t<l.length;t++){var u=l[t];g.prototype[u]||(g.prototype[u]=d.prototype[u])}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(g.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}})}).call(this)}).call(this,c("_process"))},{"./_stream_readable":9,
"./_stream_writable":11,_process:22,inherits:21}],8:[function(c,v,m){function p(a){if(!(this instanceof p))return new p(a);g.call(this,a)}v.exports=p;var g=c("./_stream_transform");c("inherits")(p,g);p.prototype._transform=function(a,c,l){l(null,a)}},{"./_stream_transform":10,inherits:21}],9:[function(c,v,m){(function(p,g){(function(){function a(a,e,b){if("function"===typeof a.prependListener)return a.prependListener(e,b);if(a._events&&a._events[e])Array.isArray(a._events[e])?a._events[e].unshift(b):
a._events[e]=[b,a._events[e]];else a.on(e,b)}function x(a,e,b){A=A||c("./_stream_duplex");a=a||{};"boolean"!==typeof b&&(b=e instanceof A);this.objectMode=!!a.objectMode;b&&(this.objectMode=this.objectMode||!!a.readableObjectMode);this.highWaterMark=I(this,a,"readableHighWaterMark",b);this.buffer=new L;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=
!1;this.paused=!0;this.emitClose=!1!==a.emitClose;this.autoDestroy=!!a.autoDestroy;this.destroyed=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;a.encoding&&(S||(S=c("string_decoder/").StringDecoder),this.decoder=new S(a.encoding),this.encoding=a.encoding)}function l(a){A=A||c("./_stream_duplex");if(!(this instanceof l))return new l(a);this._readableState=new x(a,this,this instanceof A);this.readable=!0;a&&("function"===typeof a.read&&
(this._read=a.read),"function"===typeof a.destroy&&(this._destroy=a.destroy));M.call(this)}function y(a,b,n,l,k){E("readableAddChunk",b);var c=a._readableState;if(null===b)c.reading=!1,E("onEofChunk"),c.ended||(c.decoder&&(b=c.decoder.end())&&b.length&&(c.buffer.push(b),c.length+=c.objectMode?1:b.length),c.ended=!0,c.sync?u(a):(c.needReadable=!1,c.emittedReadable||(c.emittedReadable=!0,h(a))));else{if(!k){k=b;var g;B.isBuffer(k)||k instanceof J||"string"===typeof k||void 0===k||c.objectMode||(g=new f("chunk",
["string","Buffer","Uint8Array"],k));var t=g}if(t)T(a,t);else if(c.objectMode||b&&0<b.length)if("string"===typeof b||c.objectMode||Object.getPrototypeOf(b)===B.prototype||(b=B.from(b)),l)c.endEmitted?T(a,new q):d(a,c,b,!0);else if(c.ended)T(a,new e);else{if(c.destroyed)return!1;c.reading=!1;c.decoder&&!n?(b=c.decoder.write(b),c.objectMode||0!==b.length?d(a,c,b,!1):w(a,c)):d(a,c,b,!1)}else l||(c.reading=!1,w(a,c))}return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function d(a,b,e,d){b.flowing&&
0===b.length&&!b.sync?(b.awaitDrain=0,a.emit("data",e)):(b.length+=b.objectMode?1:e.length,d?b.buffer.unshift(e):b.buffer.push(e),b.needReadable&&u(a));w(a,b)}function t(a,b){if(0>=a||0===b.length&&b.ended)return 0;if(b.objectMode)return 1;if(a!==a)return b.flowing&&b.length?b.buffer.head.data.length:b.length;if(a>b.highWaterMark){var e=a;1073741824<=e?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++);b.highWaterMark=e}return a<=b.length?a:b.ended?b.length:(b.needReadable=!0,0)}
function u(a){var b=a._readableState;E("emitReadable",b.needReadable,b.emittedReadable);b.needReadable=!1;b.emittedReadable||(E("emitReadable",b.flowing),b.emittedReadable=!0,p.nextTick(h,a))}function h(a){var b=a._readableState;E("emitReadable_",b.destroyed,b.length,b.ended);b.destroyed||!b.length&&!b.ended||(a.emit("readable"),b.emittedReadable=!1);b.needReadable=!b.flowing&&!b.ended&&b.length<=b.highWaterMark;H(a)}function w(a,b){b.readingMore||(b.readingMore=!0,p.nextTick(r,a,b))}function r(a,
b){for(;!b.reading&&!b.ended&&(b.length<b.highWaterMark||b.flowing&&0===b.length);){var e=b.length;E("maybeReadMore read 0");a.read(0);if(e===b.length)break}b.readingMore=!1}function m(a){return function(){var b=a._readableState;E("pipeOnDrain",b.awaitDrain);b.awaitDrain&&b.awaitDrain--;0===b.awaitDrain&&a.listeners("data").length&&(b.flowing=!0,H(a))}}function F(a){var b=a._readableState;b.readableListening=0<a.listenerCount("readable");b.resumeScheduled&&!b.paused?b.flowing=!0:0<a.listenerCount("data")&&
a.resume()}function D(a){E("readable nexttick read 0");a.read(0)}function z(a,b){E("resume",b.reading);b.reading||a.read(0);b.resumeScheduled=!1;a.emit("resume");H(a);b.flowing&&!b.reading&&a.read(0)}function H(a){var b=a._readableState;for(E("flow",b.flowing);b.flowing&&null!==a.read(););}function b(a,b){if(0===b.length)return null;b.objectMode?a=b.buffer.shift():!a||a>=b.length?(a=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.first():b.buffer.concat(b.length),b.buffer.clear()):a=b.buffer.consume(a,
b.decoder);return a}function C(a){var b=a._readableState;E("endReadable",b.endEmitted);b.endEmitted||(b.ended=!0,p.nextTick(n,b,a))}function n(a,b){E("endReadableNT",a.endEmitted,a.length);a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"),a.autoDestroy&&(a=b._writableState,(!a||a.autoDestroy&&a.finished)&&b.destroy()))}function k(a,b){for(var e=0,d=a.length;e<d;e++)if(a[e]===b)return e;return-1}v.exports=l;var A;l.ReadableState=x;c("events");var M=c("./internal/streams/stream"),
B=c("buffer").Buffer,J=g.Uint8Array||function(){},K=c("util");var E=K&&K.debuglog?K.debuglog("stream"):function(){};var L=c("./internal/streams/buffer_list");K=c("./internal/streams/destroy");var I=c("./internal/streams/state").getHighWaterMark,O=c("../errors").codes,f=O.ERR_INVALID_ARG_TYPE,e=O.ERR_STREAM_PUSH_AFTER_EOF,R=O.ERR_METHOD_NOT_IMPLEMENTED,q=O.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,S,U,W;c("inherits")(l,M);var T=K.errorOrDestroy,V=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,
"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}});l.prototype.destroy=K.destroy;l.prototype._undestroy=K.undestroy;l.prototype._destroy=function(a,b){b(a)};l.prototype.push=function(a,b){var e=this._readableState;if(e.objectMode)var d=!0;else"string"===typeof a&&(b=b||e.defaultEncoding,b!==e.encoding&&(a=B.from(a,b),b=""),d=!0);return y(this,a,b,!1,d)};l.prototype.unshift=
function(a){return y(this,a,null,!0,!1)};l.prototype.isPaused=function(){return!1===this._readableState.flowing};l.prototype.setEncoding=function(a){S||(S=c("string_decoder/").StringDecoder);a=new S(a);this._readableState.decoder=a;this._readableState.encoding=this._readableState.decoder.encoding;for(var b=this._readableState.buffer.head,e="";null!==b;)e+=a.write(b.data),b=b.next;this._readableState.buffer.clear();""!==e&&this._readableState.buffer.push(e);this._readableState.length=e.length;return this};
l.prototype.read=function(a){E("read",a);a=parseInt(a,10);var e=this._readableState,d=a;0!==a&&(e.emittedReadable=!1);if(0===a&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:0<e.length)||e.ended))return E("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?C(this):u(this),null;a=t(a,e);if(0===a&&e.ended)return 0===e.length&&C(this),null;var f=e.needReadable;E("need readable",f);if(0===e.length||e.length-a<e.highWaterMark)f=!0,E("length less than watermark",f);e.ended||e.reading?
E("reading or ended",!1):f&&(E("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(a=t(d,e)));f=0<a?b(a,e):null;null===f?(e.needReadable=e.length<=e.highWaterMark,a=0):(e.length-=a,e.awaitDrain=0);0===e.length&&(e.ended||(e.needReadable=!0),d!==a&&e.ended&&C(this));null!==f&&this.emit("data",f);return f};l.prototype._read=function(a){T(this,new R("_read()"))};l.prototype.pipe=function(b,e){function d(a,e){E("onunpipe");a===g&&e&&!1===
e.hasUnpiped&&(e.hasUnpiped=!0,E("cleanup"),b.removeListener("close",n),b.removeListener("finish",c),b.removeListener("drain",t),b.removeListener("error",q),b.removeListener("unpipe",d),g.removeListener("end",f),g.removeListener("end",l),g.removeListener("data",h),r=!0,!u.awaitDrain||b._writableState&&!b._writableState.needDrain||t())}function f(){E("onend");b.end()}function h(a){E("ondata");a=b.write(a);E("dest.write",a);!1===a&&((1===u.pipesCount&&u.pipes===b||1<u.pipesCount&&-1!==k(u.pipes,b))&&
!r&&(E("false write response, pause",u.awaitDrain),u.awaitDrain++),g.pause())}function q(a){E("onerror",a);l();b.removeListener("error",q);0===b.listeners("error").length&&T(b,a)}function n(){b.removeListener("finish",c);l()}function c(){E("onfinish");b.removeListener("close",n);l()}function l(){E("unpipe");g.unpipe(b)}var g=this,u=this._readableState;switch(u.pipesCount){case 0:u.pipes=b;break;case 1:u.pipes=[u.pipes,b];break;default:u.pipes.push(b)}u.pipesCount+=1;E("pipe count=%d opts=%j",u.pipesCount,
e);e=e&&!1===e.end||b===p.stdout||b===p.stderr?l:f;if(u.endEmitted)p.nextTick(e);else g.once("end",e);b.on("unpipe",d);var t=m(g);b.on("drain",t);var r=!1;g.on("data",h);a(b,"error",q);b.once("close",n);b.once("finish",c);b.emit("pipe",g);u.flowing||(E("pipe resume"),g.resume());return b};l.prototype.unpipe=function(a){var b=this._readableState,e={hasUnpiped:!1};if(0===b.pipesCount)return this;if(1===b.pipesCount){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=
!1;a&&a.emit("unpipe",this,e);return this}if(!a){a=b.pipes;e=b.pipesCount;b.pipes=null;b.pipesCount=0;b.flowing=!1;for(b=0;b<e;b++)a[b].emit("unpipe",this,{hasUnpiped:!1});return this}var d=k(b.pipes,a);if(-1===d)return this;b.pipes.splice(d,1);--b.pipesCount;1===b.pipesCount&&(b.pipes=b.pipes[0]);a.emit("unpipe",this,e);return this};l.prototype.on=function(a,b){b=M.prototype.on.call(this,a,b);var e=this._readableState;"data"===a?(e.readableListening=0<this.listenerCount("readable"),!1!==e.flowing&&
this.resume()):"readable"!==a||e.endEmitted||e.readableListening||(e.readableListening=e.needReadable=!0,e.flowing=!1,e.emittedReadable=!1,E("on readable",e.length,e.reading),e.length?u(this):e.reading||p.nextTick(D,this));return b};l.prototype.addListener=l.prototype.on;l.prototype.removeListener=function(a,b){b=M.prototype.removeListener.call(this,a,b);"readable"===a&&p.nextTick(F,this);return b};l.prototype.removeAllListeners=function(a){var b=M.prototype.removeAllListeners.apply(this,arguments);
"readable"!==a&&void 0!==a||p.nextTick(F,this);return b};l.prototype.resume=function(){var a=this._readableState;a.flowing||(E("resume"),a.flowing=!a.readableListening,a.resumeScheduled||(a.resumeScheduled=!0,p.nextTick(z,this,a)));a.paused=!1;return this};l.prototype.pause=function(){E("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(E("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};l.prototype.wrap=function(a){var b=
this,e=this._readableState,d=!1;a.on("end",function(){E("wrapped end");if(e.decoder&&!e.ended){var a=e.decoder.end();a&&a.length&&b.push(a)}b.push(null)});a.on("data",function(f){E("wrapped data");e.decoder&&(f=e.decoder.write(f));e.objectMode&&(null===f||void 0===f)||!(e.objectMode||f&&f.length)||b.push(f)||(d=!0,a.pause())});for(var f in a)void 0===this[f]&&"function"===typeof a[f]&&(this[f]=function(b){return function(){return a[b].apply(a,arguments)}}(f));for(f=0;f<V.length;f++)a.on(V[f],this.emit.bind(this,
V[f]));this._read=function(b){E("wrapped _read",b);d&&(d=!1,a.resume())};return this};"function"===typeof Symbol&&(l.prototype[Symbol.asyncIterator]=function(){void 0===U&&(U=c("./internal/streams/async_iterator"));return U(this)});Object.defineProperty(l.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(l.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});
Object.defineProperty(l.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(a){this._readableState&&(this._readableState.flowing=a)}});l._fromList=b;Object.defineProperty(l.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(l.from=function(a,b){void 0===W&&(W=c("./internal/streams/from"));return W(l,a,b)})}).call(this)}).call(this,c("_process"),"undefined"!==typeof global?
global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":6,"./_stream_duplex":7,"./internal/streams/async_iterator":12,"./internal/streams/buffer_list":13,"./internal/streams/destroy":14,"./internal/streams/from":16,"./internal/streams/state":18,"./internal/streams/stream":19,_process:22,buffer:3,events:4,inherits:21,"string_decoder/":25,util:2}],10:[function(c,v,m){function p(a,d){var h=this._transformState;h.transforming=!1;var c=h.writecb;if(null===c)return this.emit("error",
new y);h.writechunk=null;h.writecb=null;null!=d&&this.push(d);c(a);a=this._readableState;a.reading=!1;(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function g(d){if(!(this instanceof g))return new g(d);u.call(this,d);this._transformState={afterTransform:p.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;d&&("function"===typeof d.transform&&(this._transform=d.transform),
"function"===typeof d.flush&&(this._flush=d.flush));this.on("prefinish",a)}function a(){var a=this;"function"!==typeof this._flush||this._readableState.destroyed?x(this,null,null):this._flush(function(d,h){x(a,d,h)})}function x(a,c,l){if(c)return a.emit("error",c);null!=l&&a.push(l);if(a._writableState.length)throw new t;if(a._transformState.transforming)throw new d;return a.push(null)}v.exports=g;v=c("../errors").codes;var l=v.ERR_METHOD_NOT_IMPLEMENTED,y=v.ERR_MULTIPLE_CALLBACK,d=v.ERR_TRANSFORM_ALREADY_TRANSFORMING,
t=v.ERR_TRANSFORM_WITH_LENGTH_0,u=c("./_stream_duplex");c("inherits")(g,u);g.prototype.push=function(a,d){this._transformState.needTransform=!1;return u.prototype.push.call(this,a,d)};g.prototype._transform=function(a,d,c){c(new l("_transform()"))};g.prototype._write=function(a,d,c){var h=this._transformState;h.writecb=c;h.writechunk=a;h.writeencoding=d;h.transforming||(a=this._readableState,(h.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark))};g.prototype._read=
function(a){a=this._transformState;null===a.writechunk||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))};g.prototype._destroy=function(a,d){u.prototype._destroy.call(this,a,function(a){d(a)})}},{"../errors":6,"./_stream_duplex":7,inherits:21}],11:[function(c,v,m){(function(p,g){(function(){function a(a){var b=this;this.entry=this.next=null;this.finish=function(){var e=b.entry;for(b.entry=null;e;){var d=e.callback;a.pendingcb--;d(void 0);
e=e.next}a.corkedRequestsFree.next=b}}function x(){}function l(b,e,d){m=m||c("./_stream_duplex");b=b||{};"boolean"!==typeof d&&(d=e instanceof m);this.objectMode=!!b.objectMode;d&&(this.objectMode=this.objectMode||!!b.writableObjectMode);this.highWaterMark=C(this,b,"writableHighWaterMark",d);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==b.decodeStrings;this.defaultEncoding=b.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=
0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){var b=e._writableState,d=b.sync,f=b.writecb;if("function"!==typeof f)throw new M;b.writing=!1;b.writecb=null;b.length-=b.writelen;b.writelen=0;a?(--b.pendingcb,d?(p.nextTick(f,a),p.nextTick(r,e,b),e._writableState.errorEmitted=!0,I(e,a)):(f(a),e._writableState.errorEmitted=!0,I(e,a),r(e,b))):((a=h(b)||e.destroyed)||b.corked||b.bufferProcessing||!b.bufferedRequest||u(e,b),d?p.nextTick(t,e,b,a,f):t(e,b,a,f))};this.writecb=null;this.writelen=
0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==b.emitClose;this.autoDestroy=!!b.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new a(this)}function y(a){m=m||c("./_stream_duplex");var b=this instanceof m;if(!b&&!O.call(y,this))return new y(a);this._writableState=new l(a,this,b);this.writable=!0;a&&("function"===typeof a.write&&(this._write=a.write),"function"===typeof a.writev&&(this._writev=a.writev),
"function"===typeof a.destroy&&(this._destroy=a.destroy),"function"===typeof a.final&&(this._final=a.final));D.call(this)}function d(a,b,d,q,h,n,c){b.writelen=q;b.writecb=c;b.writing=!0;b.sync=!0;if(b.destroyed)b.onwrite(new J("write"));else d?a._writev(h,b.onwrite):a._write(h,n,b.onwrite);b.sync=!1}function t(a,b,d,q){!d&&0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"));b.pendingcb--;q();r(a,b)}function u(b,e){e.bufferProcessing=!0;var f=e.bufferedRequest;if(b._writev&&f&&f.next){var q=
Array(e.bufferedRequestCount),h=e.corkedRequestsFree;h.entry=f;for(var n=0,c=!0;f;)q[n]=f,f.isBuf||(c=!1),f=f.next,n+=1;q.allBuffers=c;d(b,e,!0,e.length,q,"",h.finish);e.pendingcb++;e.lastBufferedRequest=null;h.next?(e.corkedRequestsFree=h.next,h.next=null):e.corkedRequestsFree=new a(e);e.bufferedRequestCount=0}else{for(;f&&(q=f.chunk,d(b,e,!1,e.objectMode?1:q.length,q,f.encoding,f.callback),f=f.next,e.bufferedRequestCount--,!e.writing););null===f&&(e.lastBufferedRequest=null)}e.bufferedRequest=f;
e.bufferProcessing=!1}function h(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function w(a,b){a._final(function(e){b.pendingcb--;e&&I(a,e);b.prefinished=!0;a.emit("prefinish");r(a,b)})}function r(a,b){var e=h(b);e&&(b.prefinished||b.finalCalled||("function"!==typeof a._final||b.destroyed?(b.prefinished=!0,a.emit("prefinish")):(b.pendingcb++,b.finalCalled=!0,p.nextTick(w,a,b))),0===b.pendingcb&&(b.finished=!0,a.emit("finish"),b.autoDestroy&&(b=a._readableState,
(!b||b.autoDestroy&&b.endEmitted)&&a.destroy())));return e}v.exports=y;var m;y.WritableState=l;var F={deprecate:c("util-deprecate")},D=c("./internal/streams/stream"),z=c("buffer").Buffer,H=g.Uint8Array||function(){},b=c("./internal/streams/destroy"),C=c("./internal/streams/state").getHighWaterMark,n=c("../errors").codes,k=n.ERR_INVALID_ARG_TYPE,A=n.ERR_METHOD_NOT_IMPLEMENTED,M=n.ERR_MULTIPLE_CALLBACK,B=n.ERR_STREAM_CANNOT_PIPE,J=n.ERR_STREAM_DESTROYED,K=n.ERR_STREAM_NULL_VALUES,E=n.ERR_STREAM_WRITE_AFTER_END,
L=n.ERR_UNKNOWN_ENCODING,I=b.errorOrDestroy;c("inherits")(y,D);l.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b};(function(){try{Object.defineProperty(l.prototype,"buffer",{get:F.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(f){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var O=Function.prototype[Symbol.hasInstance];
Object.defineProperty(y,Symbol.hasInstance,{value:function(a){return O.call(this,a)?!0:this!==y?!1:a&&a._writableState instanceof l}})}else O=function(a){return a instanceof this};y.prototype.pipe=function(){I(this,new B)};y.prototype.write=function(a,b,h){var e=this._writableState,f=!1,n;if(n=!e.objectMode)n=a,n=z.isBuffer(n)||n instanceof H;n&&!z.isBuffer(a)&&(a=z.from(a));"function"===typeof b&&(h=b,b=null);n?b="buffer":b||(b=e.defaultEncoding);"function"!==typeof h&&(h=x);if(e.ending)e=h,h=new E,
I(this,h),p.nextTick(e,h);else{var c;if(!(c=n)){c=a;var l=h,u;null===c?u=new K:"string"===typeof c||e.objectMode||(u=new k("chunk",["string","Buffer"],c));u?(I(this,u),p.nextTick(l,u),c=!1):c=!0}c&&(e.pendingcb++,f=n,f||(u=a,e.objectMode||!1===e.decodeStrings||"string"!==typeof u||(u=z.from(u,b)),a!==u&&(f=!0,b="buffer",a=u)),n=e.objectMode?1:a.length,e.length+=n,u=e.length<e.highWaterMark,u||(e.needDrain=!0),e.writing||e.corked?(n=e.lastBufferedRequest,e.lastBufferedRequest={chunk:a,encoding:b,isBuf:f,
callback:h,next:null},n?n.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1):d(this,e,!1,n,a,b,h),f=u)}return f};y.prototype.cork=function(){this._writableState.corked++};y.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.bufferProcessing||!a.bufferedRequest||u(this,a))};y.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+
"").toLowerCase())))throw new L(a);this._writableState.defaultEncoding=a;return this};Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});y.prototype._write=function(a,b,d){d(new A("_write()"))};y.prototype._writev=null;y.prototype.end=function(a,b,d){var e=this._writableState;
"function"===typeof a?(d=a,b=a=null):"function"===typeof b&&(d=b,b=null);null!==a&&void 0!==a&&this.write(a,b);e.corked&&(e.corked=1,this.uncork());if(!e.ending){a=d;e.ending=!0;r(this,e);if(a)if(e.finished)p.nextTick(a);else this.once("finish",a);e.ended=!0;this.writable=!1}return this};Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?
!1:this._writableState.destroyed},set:function(a){this._writableState&&(this._writableState.destroyed=a)}});y.prototype.destroy=b.destroy;y.prototype._undestroy=b.undestroy;y.prototype._destroy=function(a,b){b(a)}}).call(this)}).call(this,c("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":6,"./_stream_duplex":7,"./internal/streams/destroy":14,"./internal/streams/state":18,"./internal/streams/stream":19,_process:22,buffer:3,
inherits:21,"util-deprecate":26}],12:[function(c,v,m){(function(p){(function(){function g(a,d,h){d in a?Object.defineProperty(a,d,{value:h,enumerable:!0,configurable:!0,writable:!0}):a[d]=h;return a}function a(a,d){return{value:a,done:d}}function x(b){var d=b[u];if(null!==d){var n=b[D].read();null!==n&&(b[m]=null,b[u]=null,b[h]=null,d(a(n,!1)))}}function l(a){p.nextTick(x,a)}function y(b,d){return function(h,c){b.then(function(){if(d[r])h(a(void 0,!0));else d[F](h,c)},c)}}var d,t=c("./end-of-stream"),
u=Symbol("lastResolve"),h=Symbol("lastReject"),w=Symbol("error"),r=Symbol("ended"),m=Symbol("lastPromise"),F=Symbol("handlePromise"),D=Symbol("stream"),z=Object.getPrototypeOf(function(){}),H=Object.setPrototypeOf((d={get stream(){return this[D]},next:function(){var b=this,d=this[w];if(null!==d)return Promise.reject(d);if(this[r])return Promise.resolve(a(void 0,!0));if(this[D].destroyed)return new Promise(function(d,h){p.nextTick(function(){b[w]?h(b[w]):d(a(void 0,!0))})});if(d=this[m])d=new Promise(y(d,
this));else{d=this[D].read();if(null!==d)return Promise.resolve(a(d,!1));d=new Promise(this[F])}return this[m]=d}},g(d,Symbol.asyncIterator,function(){return this}),g(d,"return",function(){var b=this;return new Promise(function(d,h){b[D].destroy(null,function(b){b?h(b):d(a(void 0,!0))})})}),d),z);v.exports=function(b){var d,n=Object.create(H,(d={},g(d,D,{value:b,writable:!0}),g(d,u,{value:null,writable:!0}),g(d,h,{value:null,writable:!0}),g(d,w,{value:null,writable:!0}),g(d,r,{value:b._readableState.endEmitted,
writable:!0}),g(d,F,{value:function(b,d){var c=n[D].read();c?(n[m]=null,n[u]=null,n[h]=null,b(a(c,!1))):(n[u]=b,n[h]=d)},writable:!0}),d));n[m]=null;t(b,function(b){if(b&&"ERR_STREAM_PREMATURE_CLOSE"!==b.code){var d=n[h];null!==d&&(n[m]=null,n[u]=null,n[h]=null,d(b));n[w]=b}else b=n[u],null!==b&&(n[m]=null,n[u]=null,n[h]=null,b(a(void 0,!0))),n[r]=!0});b.on("readable",l.bind(null,n));return n}}).call(this)}).call(this,c("_process"))},{"./end-of-stream":15,_process:22}],13:[function(c,v,m){function p(a,
d){var h=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);d&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable}));h.push.apply(h,c)}return h}function g(a){for(var d=1;d<arguments.length;d++){var h=null!=arguments[d]?arguments[d]:{};d%2?p(Object(h),!0).forEach(function(d){var c=h[d];d in a?Object.defineProperty(a,d,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[d]=c}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,
Object.getOwnPropertyDescriptors(h)):p(Object(h)).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(h,d))})}return a}function a(a,d){for(var h=0;h<d.length;h++){var c=d[h];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}function x(d,c,h){c&&a(d.prototype,c);h&&a(d,h);return d}var l=c("buffer").Buffer,y=c("util").inspect,d=y&&y.custom||"inspect";v.exports=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.tail=this.head=null;this.length=0}x(a,[{key:"push",value:function(a){a={data:a,next:null};0<this.length?this.tail.next=a:this.head=a;this.tail=a;++this.length}},{key:"unshift",value:function(a){a={data:a,next:this.head};0===this.length&&(this.tail=a);this.head=a;++this.length}},{key:"shift",value:function(){if(0!==this.length){var a=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return a}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=
0}},{key:"join",value:function(a){if(0===this.length)return"";for(var d=this.head,c=""+d.data;d=d.next;)c+=a+d.data;return c}},{key:"concat",value:function(a){if(0===this.length)return l.alloc(0);a=l.allocUnsafe(a>>>0);for(var d=this.head,c=0;d;)l.prototype.copy.call(d.data,a,c),c+=d.data.length,d=d.next;return a}},{key:"consume",value:function(a,d){a<this.head.data.length?(d=this.head.data.slice(0,a),this.head.data=this.head.data.slice(a)):d=a===this.head.data.length?this.shift():d?this._getString(a):
this._getBuffer(a);return d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(a){var d=this.head,c=1,l=d.data;for(a-=l.length;d=d.next;){var g=d.data,u=a>g.length?g.length:a;l=u===g.length?l+g:l+g.slice(0,a);a-=u;if(0===a){u===g.length?(++c,this.head=d.next?d.next:this.tail=null):(this.head=d,d.data=g.slice(u));break}++c}this.length-=c;return l}},{key:"_getBuffer",value:function(a){var d=l.allocUnsafe(a),c=this.head,g=1;c.data.copy(d);for(a-=c.data.length;c=
c.next;){var u=c.data,t=a>u.length?u.length:a;u.copy(d,d.length-a,0,t);a-=t;if(0===a){t===u.length?(++g,this.head=c.next?c.next:this.tail=null):(this.head=c,c.data=u.slice(t));break}++g}this.length-=g;return d}},{key:d,value:function(a,d){return y(this,g({},d,{depth:0,customInspect:!1}))}}]);return a}()},{buffer:3,util:2}],14:[function(c,v,m){(function(c){(function(){function g(c,g){p(c,g);a(c)}function a(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||
a.emit("close")}function p(a,c){a.emit("error",c)}v.exports={destroy:function(l,x){var d=this,t=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||t)return x?x(l):l&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,c.nextTick(p,this,l)):c.nextTick(p,this,l)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(l||null,function(l){!x&&
l?d._writableState?d._writableState.errorEmitted?c.nextTick(a,d):(d._writableState.errorEmitted=!0,c.nextTick(g,d,l)):c.nextTick(g,d,l):x?(c.nextTick(a,d),x(l)):c.nextTick(a,d)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=
!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(a,c){var d=a._readableState,l=a._writableState;d&&d.autoDestroy||l&&l.autoDestroy?a.destroy(c):a.emit("error",c)}}}).call(this)}).call(this,c("_process"))},{_process:22}],15:[function(c,v,m){function p(a){var c=!1;return function(){if(!c){c=!0;for(var d=arguments.length,l=Array(d),g=0;g<d;g++)l[g]=arguments[g];a.apply(this,l)}}}function g(){}function a(c,m,d){if("function"===
typeof m)return a(c,null,m);m||(m={});d=p(d||g);var l=m.readable||!1!==m.readable&&c.readable,u=m.writable||!1!==m.writable&&c.writable,h=function(){c.writable||r()},w=c._writableState&&c._writableState.finished,r=function(){u=!1;w=!0;l||d.call(c)},y=c._readableState&&c._readableState.endEmitted,F=function(){l=!1;y=!0;u||d.call(c)},D=function(a){d.call(c,a)},z=function(){var a;if(l&&!y)return c._readableState&&c._readableState.ended||(a=new x),d.call(c,a);if(u&&!w)return c._writableState&&c._writableState.ended||
(a=new x),d.call(c,a)},v=function(){c.req.on("finish",r)};if(c.setHeader&&"function"===typeof c.abort)if(c.on("complete",r),c.on("abort",z),c.req)v();else c.on("request",v);else u&&!c._writableState&&(c.on("end",h),c.on("close",h));c.on("end",F);c.on("finish",r);if(!1!==m.error)c.on("error",D);c.on("close",z);return function(){c.removeListener("complete",r);c.removeListener("abort",z);c.removeListener("request",v);c.req&&c.req.removeListener("finish",r);c.removeListener("end",h);c.removeListener("close",
h);c.removeListener("finish",r);c.removeListener("end",F);c.removeListener("error",D);c.removeListener("close",z)}}var x=c("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;v.exports=a},{"../../../errors":6}],16:[function(c,v,m){v.exports=function(){throw Error("Readable.from is not available in the browser");}},{}],17:[function(c,v,m){function p(a){var d=!1;return function(){d||(d=!0,a.apply(void 0,arguments))}}function g(a){if(a)throw a;}function a(a,d,g,l){l=p(l);var h=!1;a.on("close",function(){h=
!0});void 0===y&&(y=c("./end-of-stream"));y(a,{readable:d,writable:g},function(a){if(a)return l(a);h=!0;l()});var u=!1;return function(d){if(!h&&!u){u=!0;if(a.setHeader&&"function"===typeof a.abort)return a.abort();if("function"===typeof a.destroy)return a.destroy();l(d||new t("pipe"))}}}function x(a){a()}function l(a,d){return a.pipe(d)}var y;m=c("../../../errors").codes;var d=m.ERR_MISSING_ARGS,t=m.ERR_STREAM_DESTROYED;v.exports=function(){for(var c=arguments.length,h=Array(c),t=0;t<c;t++)h[t]=
arguments[t];var p=h.length?"function"!==typeof h[h.length-1]?g:h.pop():g;Array.isArray(h[0])&&(h=h[0]);if(2>h.length)throw new d("streams");var m,F=h.map(function(d,c){var g=c<h.length-1;return a(d,g,0<c,function(a){m||(m=a);a&&F.forEach(x);g||(F.forEach(x),p(m))})});return h.reduce(l)}},{"../../../errors":6,"./end-of-stream":15}],18:[function(c,v,m){var p=c("../../../errors").codes.ERR_INVALID_OPT_VALUE;v.exports={getHighWaterMark:function(c,a,m,l){a=null!=a.highWaterMark?a.highWaterMark:l?a[m]:
null;if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||0>a)throw new p(l?m:"highWaterMark",a);return Math.floor(a)}return c.objectMode?16:16384}}},{"../../../errors":6}],19:[function(c,v,m){v.exports=c("events").EventEmitter},{events:4}],20:[function(c,v,m){m.read=function(c,g,a,m,l){var p=8*l-m-1;var d=(1<<p)-1,t=d>>1,u=-7;l=a?l-1:0;var h=a?-1:1,x=c[g+l];l+=h;a=x&(1<<-u)-1;x>>=-u;for(u+=p;0<u;a=256*a+c[g+l],l+=h,u-=8);p=a&(1<<-u)-1;a>>=-u;for(u+=m;0<u;p=256*p+c[g+l],l+=h,u-=8);if(0===a)a=1-t;else{if(a===
d)return p?NaN:Infinity*(x?-1:1);p+=Math.pow(2,m);a-=t}return(x?-1:1)*p*Math.pow(2,a-m)};m.write=function(c,g,a,m,l,v){var d,t=8*v-l-1,u=(1<<t)-1,h=u>>1,p=23===l?Math.pow(2,-24)-Math.pow(2,-77):0;v=m?0:v-1;var r=m?1:-1,x=0>g||0===g&&0>1/g?1:0;g=Math.abs(g);isNaN(g)||Infinity===g?(g=isNaN(g)?1:0,m=u):(m=Math.floor(Math.log(g)/Math.LN2),1>g*(d=Math.pow(2,-m))&&(m--,d*=2),g=1<=m+h?g+p/d:g+p*Math.pow(2,1-h),2<=g*d&&(m++,d/=2),m+h>=u?(g=0,m=u):1<=m+h?(g=(g*d-1)*Math.pow(2,l),m+=h):(g=g*Math.pow(2,h-1)*
Math.pow(2,l),m=0));for(;8<=l;c[a+v]=g&255,v+=r,g/=256,l-=8);m=m<<l|g;for(t+=l;0<t;c[a+v]=m&255,v+=r,m/=256,t-=8);c[a+v-r]|=128*x}},{}],21:[function(c,v,m){v.exports="function"===typeof Object.create?function(c,g){g&&(c.super_=g,c.prototype=Object.create(g.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:function(c,g){if(g){c.super_=g;var a=function(){};a.prototype=g.prototype;c.prototype=new a;c.prototype.constructor=c}}},{}],22:[function(c,v,m){function p(){throw Error("setTimeout has not been defined");
}function g(){throw Error("clearTimeout has not been defined");}function a(a){if(u===setTimeout)return setTimeout(a,0);if((u===p||!u)&&setTimeout)return u=setTimeout,setTimeout(a,0);try{return u(a,0)}catch(z){try{return u.call(null,a,0)}catch(H){return u.call(this,a,0)}}}function x(a){if(h===clearTimeout)return clearTimeout(a);if((h===g||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(a);try{return h(a)}catch(z){try{return h.call(null,a)}catch(H){return h.call(this,a)}}}function l(){r&&G&&(r=
!1,G.length?w=G.concat(w):F=-1,w.length&&y())}function y(){if(!r){var d=a(l);r=!0;for(var c=w.length;c;){G=w;for(w=[];++F<c;)G&&G[F].run();F=-1;c=w.length}G=null;r=!1;x(d)}}function d(a,d){this.fun=a;this.array=d}function t(){}c=v.exports={};try{var u="function"===typeof setTimeout?setTimeout:p}catch(D){u=p}try{var h="function"===typeof clearTimeout?clearTimeout:g}catch(D){h=g}var w=[],r=!1,G,F=-1;c.nextTick=function(c){var h=Array(arguments.length-1);if(1<arguments.length)for(var g=1;g<arguments.length;g++)h[g-
1]=arguments[g];w.push(new d(c,h));1!==w.length||r||a(y)};d.prototype.run=function(){this.fun.apply(null,this.array)};c.title="browser";c.browser=!0;c.env={};c.argv=[];c.version="";c.versions={};c.on=t;c.addListener=t;c.once=t;c.off=t;c.removeListener=t;c.removeAllListeners=t;c.emit=t;c.prependListener=t;c.prependOnceListener=t;c.listeners=function(a){return[]};c.binding=function(a){throw Error("process.binding is not supported");};c.cwd=function(){return"/"};c.chdir=function(a){throw Error("process.chdir is not supported");
};c.umask=function(){return 0}},{}],23:[function(c,v,m){function p(a,c){for(var d in a)c[d]=a[d]}function g(a,c,d){return x(a,c,d)}var a=c("buffer"),x=a.Buffer;x.from&&x.alloc&&x.allocUnsafe&&x.allocUnsafeSlow?v.exports=a:(p(a,m),m.Buffer=g);g.prototype=Object.create(x.prototype);p(x,g);g.from=function(a,c,d){if("number"===typeof a)throw new TypeError("Argument must not be a number");return x(a,c,d)};g.alloc=function(a,c,d){if("number"!==typeof a)throw new TypeError("Argument must be a number");a=
x(a);void 0!==c?"string"===typeof d?a.fill(c,d):a.fill(c):a.fill(0);return a};g.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return x(a)};g.allocUnsafeSlow=function(c){if("number"!==typeof c)throw new TypeError("Argument must be a number");return a.SlowBuffer(c)}},{buffer:3}],24:[function(c,v,m){(function(p){(function(){(function(g){function a(b,d){if(!(this instanceof a))return new a(b,d);for(var c=0,f=n.length;c<f;c++)this[n[c]]="";this.q=this.c=
"";this.bufferCheckPosition=g.MAX_BUFFER_LENGTH;this.opt=d||{};this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags;this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase";this.tags=[];this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.strict=!!b;this.noscript=!(!b&&!this.opt.noscript);this.state=e.BEGIN;this.ENTITIES=(this.strictEntities=this.opt.strictEntities)?Object.create(g.XML_ENTITIES):Object.create(g.ENTITIES);this.attribList=[];this.opt.xmlns&&(this.ns=
Object.create(E));if(this.trackPosition=!1!==this.opt.position)this.position=this.line=this.column=0;this.onready&&this.onready(void 0)}function m(b,d){if(!(this instanceof m))return new m(b,d);k.apply(this);this._parser=new a(b,d);this.readable=this.writable=!0;var e=this;this._parser.onend=function(){e.emit("end")};this._parser.onerror=function(a){e.emit("error",a);e._parser.error=null};this._decoder=null;A.forEach(function(a){Object.defineProperty(e,"on"+a,{get:function(){return e._parser["on"+
a]},set:function(b){if(!b)return e.removeAllListeners(a),e._parser["on"+a]=b;e.on(a,b)},enumerable:!0,configurable:!1})})}function l(a){return" "===a||"\n"===a||"\r"===a||"\t"===a}function v(a){return'"'===a||"'"===a}function d(a,b,d){a.textNode&&t(a);a[b]&&a[b](d)}function t(a){a.textNode=u(a.opt,a.textNode);a.textNode&&a.ontext&&a.ontext(a.textNode);a.textNode=""}function u(a,b){a.trim&&(b=b.trim());a.normalize&&(b=b.replace(/\s+/g," "));return b}function h(a,b){t(a);a.trackPosition&&(b+="\nLine: "+
a.line+"\nColumn: "+a.column+"\nChar: "+a.c);b=Error(b);a.error=b;a.onerror&&a.onerror(b);return a}function w(b){b.sawRoot&&!b.closedRoot&&r(b,"Unclosed root tag");b.state!==e.BEGIN&&b.state!==e.BEGIN_WHITESPACE&&b.state!==e.TEXT&&h(b,"Unexpected end");t(b);b.c="";b.closed=!0;b.onend&&b.onend(void 0);a.call(b,b.strict,b.opt);return b}function r(b,d){if("object"!==typeof b||!(b instanceof a))throw Error("bad call to strictFail");b.strict&&h(b,d)}function G(a,b){var d=0>a.indexOf(":")?["",a]:a.split(":"),
e=d[0];d=d[1];b&&"xmlns"===a&&(e="xmlns",d="");return{prefix:e,local:d}}function F(a){a.strict||(a.attribName=a.attribName[a.looseCase]());if(-1===a.attribList.indexOf(a.attribName)&&!a.tag.attributes.hasOwnProperty(a.attribName))if(a.opt.xmlns){var b=G(a.attribName,!0),e=b.local;if("xmlns"===b.prefix)if("xml"===e&&a.attribValue!==J)r(a,"xml: prefix must be bound to "+J+"\nActual: "+a.attribValue);else if("xmlns"===e&&a.attribValue!==K)r(a,"xmlns: prefix must be bound to "+K+"\nActual: "+a.attribValue);
else{b=a.tag;var c=a.tags[a.tags.length-1]||a;b.ns===c.ns&&(b.ns=Object.create(c.ns));b.ns[e]=a.attribValue}a.attribList.push([a.attribName,a.attribValue])}else a.tag.attributes[a.attribName]=a.attribValue,d(a,"onattribute",{name:a.attribName,value:a.attribValue});a.attribName=a.attribValue=""}function D(a,b){if(a.opt.xmlns){var c=a.tag,f=G(a.tagName);c.prefix=f.prefix;c.local=f.local;c.uri=c.ns[f.prefix]||"";c.prefix&&!c.uri&&(r(a,"Unbound namespace prefix: "+JSON.stringify(a.tagName)),c.uri=f.prefix);
f=a.tags[a.tags.length-1]||a;c.ns&&f.ns!==c.ns&&Object.keys(c.ns).forEach(function(b){d(a,"onopennamespace",{prefix:b,uri:c.ns[b]})});f=0;for(var h=a.attribList.length;f<h;f++){var n=a.attribList[f],g=n[0],k=n[1],l=G(g,!0);n=l.prefix;var q=""===n?"":c.ns[n]||"";k={name:g,value:k,prefix:n,local:l.local,uri:q};n&&"xmlns"!==n&&!q&&(r(a,"Unbound namespace prefix: "+JSON.stringify(n)),k.uri=n);a.tag.attributes[g]=k;d(a,"onattribute",k)}a.attribList.length=0}a.tag.isSelfClosing=!!b;a.sawRoot=!0;a.tags.push(a.tag);
d(a,"onopentag",a.tag);b||(a.noscript||"script"!==a.tagName.toLowerCase()?a.state=e.TEXT:a.state=e.SCRIPT,a.tag=null,a.tagName="");a.attribName=a.attribValue="";a.attribList.length=0}function z(a){if(a.tagName){if(a.script){if("script"!==a.tagName){a.script+="</"+a.tagName+">";a.tagName="";a.state=e.SCRIPT;return}d(a,"onscript",a.script);a.script=""}var b=a.tags.length,c=a.tagName;a.strict||(c=c[a.looseCase]());for(var f=c;b--;)if(a.tags[b].name!==f)r(a,"Unexpected close tag");else break;if(0>b)r(a,
"Unmatched closing tag: "+a.tagName),a.textNode+="</"+a.tagName+">";else{a.tagName=c;for(c=a.tags.length;c-- >b;){var h=a.tag=a.tags.pop();a.tagName=a.tag.name;d(a,"onclosetag",a.tagName);for(var n in h.ns);f=a.tags[a.tags.length-1]||a;a.opt.xmlns&&h.ns!==f.ns&&Object.keys(h.ns).forEach(function(b){d(a,"onclosenamespace",{prefix:b,uri:h.ns[b]})})}0===b&&(a.closedRoot=!0);a.tagName=a.attribValue=a.attribName="";a.attribList.length=0}}else r(a,"Weird empty close tag."),a.textNode+="</>";a.state=e.TEXT}
function H(a){var b=a.entity,d=b.toLowerCase(),e="";if(a.ENTITIES[b])return a.ENTITIES[b];if(a.ENTITIES[d])return a.ENTITIES[d];b=d;if("#"===b.charAt(0))if("x"===b.charAt(1)){b=b.slice(2);var c=parseInt(b,16);e=c.toString(16)}else b=b.slice(1),c=parseInt(b,10),e=c.toString(10);b=b.replace(/^0+/,"");return isNaN(c)||e.toLowerCase()!==b?(r(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(c)}function b(a,b){"<"===b?(a.state=e.OPEN_WAKA,a.startTagPosition=a.position):l(b)||(r(a,"Non-whitespace before first tag."),
a.textNode=b,a.state=e.TEXT)}function C(a,b){var d="";b<a.length&&(d=a.charAt(b));return d}g.parser=function(b,d){return new a(b,d)};g.SAXParser=a;g.SAXStream=m;g.createStream=function(a,b){return new m(a,b)};g.MAX_BUFFER_LENGTH=65536;var n="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" ");g.EVENTS="text processinginstruction sgmldeclaration doctype comment opentagstart attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" ");
Object.create||(Object.create=function(a){function b(){}b.prototype=a;return new b});Object.keys||(Object.keys=function(a){var b=[],d;for(d in a)a.hasOwnProperty(d)&&b.push(d);return b});a.prototype={end:function(){w(this)},write:function(a){if(this.error)throw this.error;if(this.closed)return h(this,"Cannot write after close. Assign an onready handler.");if(null===a)return w(this);"object"===typeof a&&(a=a.toString());for(var c=0,k;;){this.c=k=C(a,c++);if(!k)break;this.trackPosition&&(this.position++,
"\n"===k?(this.line++,this.column=0):this.column++);switch(this.state){case e.BEGIN:this.state=e.BEGIN_WHITESPACE;if("\ufeff"===k)continue;b(this,k);continue;case e.BEGIN_WHITESPACE:b(this,k);continue;case e.TEXT:if(this.sawRoot&&!this.closedRoot){for(var p=c-1;k&&"<"!==k&&"&"!==k;)(k=C(a,c++))&&this.trackPosition&&(this.position++,"\n"===k?(this.line++,this.column=0):this.column++);this.textNode+=a.substring(p,c-1)}"<"!==k||this.sawRoot&&this.closedRoot&&!this.strict?(l(k)||this.sawRoot&&!this.closedRoot||
r(this,"Text data outside of root node."),"&"===k?this.state=e.TEXT_ENTITY:this.textNode+=k):(this.state=e.OPEN_WAKA,this.startTagPosition=this.position);continue;case e.SCRIPT:"<"===k?this.state=e.SCRIPT_ENDING:this.script+=k;continue;case e.SCRIPT_ENDING:"/"===k?this.state=e.CLOSE_TAG:(this.script+="<"+k,this.state=e.SCRIPT);continue;case e.OPEN_WAKA:"!"===k?(this.state=e.SGML_DECL,this.sgmlDecl=""):l(k)||(L.test(k)?(this.state=e.OPEN_TAG,this.tagName=k):"/"===k?(this.state=e.CLOSE_TAG,this.tagName=
""):"?"===k?(this.state=e.PROC_INST,this.procInstName=this.procInstBody=""):(r(this,"Unencoded <"),this.startTagPosition+1<this.position&&(k=Array(this.position-this.startTagPosition).join(" ")+k),this.textNode+="<"+k,this.state=e.TEXT));continue;case e.SGML_DECL:(this.sgmlDecl+k).toUpperCase()===M?(d(this,"onopencdata"),this.state=e.CDATA,this.cdata=this.sgmlDecl=""):"--"===this.sgmlDecl+k?(this.state=e.COMMENT,this.sgmlDecl=this.comment=""):(this.sgmlDecl+k).toUpperCase()===B?(this.state=e.DOCTYPE,
(this.doctype||this.sawRoot)&&r(this,"Inappropriately located doctype declaration"),this.sgmlDecl=this.doctype=""):">"===k?(d(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=e.TEXT):(v(k)&&(this.state=e.SGML_DECL_QUOTED),this.sgmlDecl+=k);continue;case e.SGML_DECL_QUOTED:k===this.q&&(this.state=e.SGML_DECL,this.q="");this.sgmlDecl+=k;continue;case e.DOCTYPE:">"===k?(this.state=e.TEXT,d(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=k,"["===k?this.state=e.DOCTYPE_DTD:
v(k)&&(this.state=e.DOCTYPE_QUOTED,this.q=k));continue;case e.DOCTYPE_QUOTED:this.doctype+=k;k===this.q&&(this.q="",this.state=e.DOCTYPE);continue;case e.DOCTYPE_DTD:this.doctype+=k;"]"===k?this.state=e.DOCTYPE:v(k)&&(this.state=e.DOCTYPE_DTD_QUOTED,this.q=k);continue;case e.DOCTYPE_DTD_QUOTED:this.doctype+=k;k===this.q&&(this.state=e.DOCTYPE_DTD,this.q="");continue;case e.COMMENT:"-"===k?this.state=e.COMMENT_ENDING:this.comment+=k;continue;case e.COMMENT_ENDING:"-"===k?(this.state=e.COMMENT_ENDED,
(this.comment=u(this.opt,this.comment))&&d(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+k,this.state=e.COMMENT);continue;case e.COMMENT_ENDED:">"!==k?(r(this,"Malformed comment"),this.comment+="--"+k,this.state=e.COMMENT):this.state=e.TEXT;continue;case e.CDATA:"]"===k?this.state=e.CDATA_ENDING:this.cdata+=k;continue;case e.CDATA_ENDING:"]"===k?this.state=e.CDATA_ENDING_2:(this.cdata+="]"+k,this.state=e.CDATA);continue;case e.CDATA_ENDING_2:">"===k?(this.cdata&&d(this,"oncdata",
this.cdata),d(this,"onclosecdata"),this.cdata="",this.state=e.TEXT):"]"===k?this.cdata+="]":(this.cdata+="]]"+k,this.state=e.CDATA);continue;case e.PROC_INST:"?"===k?this.state=e.PROC_INST_ENDING:l(k)?this.state=e.PROC_INST_BODY:this.procInstName+=k;continue;case e.PROC_INST_BODY:if(!this.procInstBody&&l(k))continue;else"?"===k?this.state=e.PROC_INST_ENDING:this.procInstBody+=k;continue;case e.PROC_INST_ENDING:">"===k?(d(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),
this.procInstName=this.procInstBody="",this.state=e.TEXT):(this.procInstBody+="?"+k,this.state=e.PROC_INST_BODY);continue;case e.OPEN_TAG:if(I.test(k))this.tagName+=k;else{this.strict||(this.tagName=this.tagName[this.looseCase]());p=this.tags[this.tags.length-1]||this;var q=this.tag={name:this.tagName,attributes:{}};this.opt.xmlns&&(q.ns=p.ns);this.attribList.length=0;d(this,"onopentagstart",q);">"===k?D(this):"/"===k?this.state=e.OPEN_TAG_SLASH:(l(k)||r(this,"Invalid character in tag name"),this.state=
e.ATTRIB)}continue;case e.OPEN_TAG_SLASH:">"===k?(D(this,!0),z(this)):(r(this,"Forward-slash in opening tag not followed by >"),this.state=e.ATTRIB);continue;case e.ATTRIB:if(l(k))continue;else">"===k?D(this):"/"===k?this.state=e.OPEN_TAG_SLASH:L.test(k)?(this.attribName=k,this.attribValue="",this.state=e.ATTRIB_NAME):r(this,"Invalid attribute name");continue;case e.ATTRIB_NAME:"="===k?this.state=e.ATTRIB_VALUE:">"===k?(r(this,"Attribute without value"),this.attribValue=this.attribName,F(this),D(this)):
l(k)?this.state=e.ATTRIB_NAME_SAW_WHITE:I.test(k)?this.attribName+=k:r(this,"Invalid attribute name");continue;case e.ATTRIB_NAME_SAW_WHITE:if("="===k)this.state=e.ATTRIB_VALUE;else if(l(k))continue;else r(this,"Attribute without value"),this.attribValue=this.tag.attributes[this.attribName]="",d(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===k?D(this):L.test(k)?(this.attribName=k,this.state=e.ATTRIB_NAME):(r(this,"Invalid attribute name"),this.state=e.ATTRIB);continue;
case e.ATTRIB_VALUE:if(l(k))continue;else v(k)?(this.q=k,this.state=e.ATTRIB_VALUE_QUOTED):(r(this,"Unquoted attribute value"),this.state=e.ATTRIB_VALUE_UNQUOTED,this.attribValue=k);continue;case e.ATTRIB_VALUE_QUOTED:if(k!==this.q){"&"===k?this.state=e.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=k;continue}F(this);this.q="";this.state=e.ATTRIB_VALUE_CLOSED;continue;case e.ATTRIB_VALUE_CLOSED:l(k)?this.state=e.ATTRIB:">"===k?D(this):"/"===k?this.state=e.OPEN_TAG_SLASH:L.test(k)?(r(this,"No whitespace between attributes"),
this.attribName=k,this.attribValue="",this.state=e.ATTRIB_NAME):r(this,"Invalid attribute name");continue;case e.ATTRIB_VALUE_UNQUOTED:if(">"!==k&&!l(k)){"&"===k?this.state=e.ATTRIB_VALUE_ENTITY_U:this.attribValue+=k;continue}F(this);">"===k?D(this):this.state=e.ATTRIB;continue;case e.CLOSE_TAG:if(this.tagName)">"===k?z(this):I.test(k)?this.tagName+=k:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=e.SCRIPT):(l(k)||r(this,"Invalid tagname in closing tag"),this.state=e.CLOSE_TAG_SAW_WHITE);
else if(l(k))continue;else L.test(k)?this.tagName=k:this.script?(this.script+="</"+k,this.state=e.SCRIPT):r(this,"Invalid tagname in closing tag.");continue;case e.CLOSE_TAG_SAW_WHITE:if(l(k))continue;">"===k?z(this):r(this,"Invalid characters in closing tag");continue;case e.TEXT_ENTITY:case e.ATTRIB_VALUE_ENTITY_Q:case e.ATTRIB_VALUE_ENTITY_U:switch(this.state){case e.TEXT_ENTITY:var m=e.TEXT;var x="textNode";break;case e.ATTRIB_VALUE_ENTITY_Q:m=e.ATTRIB_VALUE_QUOTED;x="attribValue";break;case e.ATTRIB_VALUE_ENTITY_U:m=
e.ATTRIB_VALUE_UNQUOTED,x="attribValue"}";"===k?(this[x]+=H(this),this.entity="",this.state=m):(this.entity.length?f:O).test(k)?this.entity+=k:(r(this,"Invalid character in entity name"),this[x]+="&"+this.entity+k,this.entity="",this.state=m);continue;default:throw Error(this,"Unknown state: "+this.state);}}if(this.position>=this.bufferCheckPosition){a=Math.max(g.MAX_BUFFER_LENGTH,10);k=c=0;for(m=n.length;k<m;k++){x=this[n[k]].length;if(x>a)switch(n[k]){case "textNode":t(this);break;case "cdata":d(this,
"oncdata",this.cdata);this.cdata="";break;case "script":d(this,"onscript",this.script);this.script="";break;default:h(this,"Max buffer length exceeded: "+n[k])}c=Math.max(c,x)}this.bufferCheckPosition=g.MAX_BUFFER_LENGTH-c+this.position}return this},resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){t(this);""!==this.cdata&&(d(this,"oncdata",this.cdata),this.cdata="");""!==this.script&&(d(this,"onscript",this.script),this.script="")}};try{var k=
c("stream").Stream}catch(q){k=function(){}}var A=g.EVENTS.filter(function(a){return"error"!==a&&"end"!==a});m.prototype=Object.create(k.prototype,{constructor:{value:m}});m.prototype.write=function(a){"function"===typeof p&&"function"===typeof p.isBuffer&&p.isBuffer(a)&&(this._decoder||(this._decoder=new (c("string_decoder").StringDecoder)("utf8")),a=this._decoder.write(a));this._parser.write(a.toString());this.emit("data",a);return!0};m.prototype.end=function(a){a&&a.length&&this.write(a);this._parser.end();
return!0};m.prototype.on=function(a,b){var d=this;d._parser["on"+a]||-1===A.indexOf(a)||(d._parser["on"+a]=function(){var b=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);b.splice(0,0,a);d.emit.apply(d,b)});return k.prototype.on.call(d,a,b)};var M="[CDATA[",B="DOCTYPE",J="http://www.w3.org/XML/1998/namespace",K="http://www.w3.org/2000/xmlns/",E={xml:J,xmlns:K},L=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
I=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,
e=0;g.STATE={BEGIN:e++,BEGIN_WHITESPACE:e++,TEXT:e++,TEXT_ENTITY:e++,OPEN_WAKA:e++,SGML_DECL:e++,SGML_DECL_QUOTED:e++,DOCTYPE:e++,DOCTYPE_QUOTED:e++,DOCTYPE_DTD:e++,DOCTYPE_DTD_QUOTED:e++,COMMENT_STARTING:e++,COMMENT:e++,COMMENT_ENDING:e++,COMMENT_ENDED:e++,CDATA:e++,CDATA_ENDING:e++,CDATA_ENDING_2:e++,PROC_INST:e++,PROC_INST_BODY:e++,PROC_INST_ENDING:e++,OPEN_TAG:e++,OPEN_TAG_SLASH:e++,ATTRIB:e++,ATTRIB_NAME:e++,ATTRIB_NAME_SAW_WHITE:e++,ATTRIB_VALUE:e++,ATTRIB_VALUE_QUOTED:e++,ATTRIB_VALUE_CLOSED:e++,
ATTRIB_VALUE_UNQUOTED:e++,ATTRIB_VALUE_ENTITY_Q:e++,ATTRIB_VALUE_ENTITY_U:e++,CLOSE_TAG:e++,CLOSE_TAG_SAW_WHITE:e++,SCRIPT:e++,SCRIPT_ENDING:e++};g.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};g.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,
THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,
laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,
Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,
lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,
ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(g.ENTITIES).forEach(function(a){var b=g.ENTITIES[a];b="number"===typeof b?String.fromCharCode(b):b;g.ENTITIES[a]=b});for(var R in g.STATE)g.STATE[g.STATE[R]]=R;e=g.STATE;String.fromCodePoint||function(){var a=String.fromCharCode,b=Math.floor,d=function(){var d=[],e=-1,
c=arguments.length;if(!c)return"";for(var f="";++e<c;){var k=Number(arguments[e]);if(!isFinite(k)||0>k||1114111<k||b(k)!==k)throw RangeError("Invalid code point: "+k);if(65535>=k)d.push(k);else{k-=65536;var h=(k>>10)+55296;k=k%1024+56320;d.push(h,k)}if(e+1===c||16384<d.length)f+=a.apply(null,d),d.length=0}return f};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:d,configurable:!0,writable:!0}):String.fromCodePoint=d}()})("undefined"===typeof m?this.sax={}:m)}).call(this)}).call(this,
c("buffer").Buffer)},{buffer:3,stream:5,string_decoder:25}],25:[function(c,v,m){function p(a){if(!a)return"utf8";for(var d;;)switch(a){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return a;default:if(d)return;a=(""+a).toLowerCase();d=!0}}function g(a){var c=p(a);if("string"!==typeof c&&(r.isEncoding===G||!G(a)))throw Error("Unknown encoding: "+a);this.encoding=
c||a;switch(this.encoding){case "utf16le":this.text=y;this.end=d;a=4;break;case "utf8":this.fillLast=l;a=4;break;case "base64":this.text=t;this.end=u;a=3;break;default:this.write=h;this.end=w;return}this.lastTotal=this.lastNeed=0;this.lastChar=r.allocUnsafe(a)}function a(a){return 127>=a?0:6===a>>5?2:14===a>>4?3:30===a>>3?4:2===a>>6?-1:-2}function x(d,c,h){var g=c.length-1;if(g<h)return 0;var b=a(c[g]);if(0<=b)return 0<b&&(d.lastNeed=b-1),b;if(--g<h||-2===b)return 0;b=a(c[g]);if(0<=b)return 0<b&&
(d.lastNeed=b-2),b;if(--g<h||-2===b)return 0;b=a(c[g]);return 0<=b?(0<b&&(2===b?b=0:d.lastNeed=b-3),b):0}function l(a){var d=this.lastTotal-this.lastNeed;a:if(128!==(a[0]&192)){this.lastNeed=0;var c="\ufffd"}else{if(1<this.lastNeed&&1<a.length){if(128!==(a[1]&192)){this.lastNeed=1;c="\ufffd";break a}if(2<this.lastNeed&&2<a.length&&128!==(a[2]&192)){this.lastNeed=2;c="\ufffd";break a}}c=void 0}if(void 0!==c)return c;if(this.lastNeed<=a.length)return a.copy(this.lastChar,d,0,this.lastNeed),this.lastChar.toString(this.encoding,
0,this.lastTotal);a.copy(this.lastChar,d,0,a.length);this.lastNeed-=a.length}function y(a,d){if(0===(a.length-d)%2){if(d=a.toString("utf16le",d)){var c=d.charCodeAt(d.length-1);if(55296<=c&&56319>=c)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],d.slice(0,-1)}return d}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",d,a.length-1)}function d(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("utf16le",
0,this.lastTotal-this.lastNeed):a}function t(a,d){var c=(a.length-d)%3;if(0===c)return a.toString("base64",d);this.lastNeed=3-c;this.lastTotal=3;1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",d,a.length-c)}function u(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function h(a){return a.toString(this.encoding)}function w(a){return a&&a.length?this.write(a):
""}var r=c("safe-buffer").Buffer,G=r.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};m.StringDecoder=g;g.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var d=this.fillLast(a);if(void 0===d)return"";var c=this.lastNeed;this.lastNeed=0}else c=0;return c<a.length?d?d+this.text(a,c):this.text(a,c):
d||""};g.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};g.prototype.text=function(a,d){var c=x(this,a,d);if(!this.lastNeed)return a.toString("utf8",d);this.lastTotal=c;c=a.length-(c-this.lastNeed);a.copy(this.lastChar,0,c);return a.toString("utf8",d,c)};g.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length}},{"safe-buffer":23}],26:[function(c,v,m){(function(c){(function(){function g(a){try{if(!c.localStorage)return!1}catch(x){return!1}a=c.localStorage[a];return null==a?!1:"true"===String(a).toLowerCase()}v.exports=function(a,c){if(g("noDeprecation"))return a;var l=!1;return function(){if(!l){if(g("throwDeprecation"))throw Error(c);g("traceDeprecation")?console.trace(c):console.warn(c);l=!0}return a.apply(this,arguments)}}}).call(this)}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],27:[function(c,v,m){(function(c,g,a,m,l){function p(a,b){var d=a.styleAttrs&&a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===a.kind)!d&&b&&(a.styleAttrs||(a.styleAttrs={}),a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=b);else if(d&&delete a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],a.contents)for(var e=0;e<a.contents.length;e++)p(a.contents[e],
d||b)}function d(a){if("contents"in a){var b="styleAttrs"in a?a.styleAttrs[m.byName.ruby.qname]:null;b="span"===a.kind&&("container"===b||"textContainer"===b||"baseContainer"===b);for(var e=a.contents.length-1;0<=e;e--)!b||"styleAttrs"in a.contents[e]&&m.byName.ruby.qname in a.contents[e].styleAttrs?d(a.contents[e]):delete a.contents[e]}}function t(a,b,d,e){var c=e&&"seq"===e.timeContainer,f=0;e&&(f=c&&d?d.end:e.begin);b.begin=b.explicit_begin?b.explicit_begin+f:f;d=b.begin;e=null;if("sets"in b)for(var k=
0;k<b.sets.length;k++)t(a,b.sets[k],e,b),d="seq"===b.timeContainer?b.sets[k].end:Math.max(d,b.sets[k].end),e=b.sets[k];if(!("contents"in b))d=c?b.begin:Number.POSITIVE_INFINITY;else if("contents"in b)for(c=0;c<b.contents.length;c++)t(a,b.contents[c],e,b),d="seq"===b.timeContainer?b.contents[c].end:Math.max(d,b.contents[c].end),e=b.contents[c];b.end=null!==b.explicit_end&&null!==b.explicit_dur?Math.min(b.begin+b.explicit_dur,f+b.explicit_end):null===b.explicit_end&&null!==b.explicit_dur?b.begin+b.explicit_dur:
null!==b.explicit_end&&null===b.explicit_dur?f+b.explicit_end:d;delete b.explicit_begin;delete b.explicit_dur;delete b.explicit_end;a._registerEvent(b)}function u(a){this.node=a}function h(){this.events=[];this.head=new x;this.body=null}function x(){this.styling=new r;this.layout=new D}function r(){this.styles={};this.initials={}}function v(){this.styleRefs=this.styleAttrs=this.id=null}function F(){this.styleAttrs=null}function D(){this.regions={}}function z(a,b){this.kind="image";this.src=a;this.type=
b}function H(a){this.id=a}function b(a){this.regionID=a}function C(a){this.styleAttrs=a}function n(a){this.sets=a}function k(a){this.contents=a}function A(a,b,d){this.explicit_begin=a;this.explicit_end=b;this.explicit_dur=d}function M(){this.kind="body"}function B(){this.kind="div"}function J(){this.kind="p"}function K(){this.kind="span"}function E(){this.kind="span"}function L(){this.kind="br"}function I(){}function O(){}function f(a){var b=null;a&&(a=a.attributes["xml:id"]||a.attributes.id)&&(b=
a.value||null);return b}function e(a){return a&&"style"in a.attributes?a.attributes.style.value.split(" "):[]}function R(a,b){var d={};if(null!==a)for(var e in a.attributes)if(a.attributes.hasOwnProperty(e)){var c=a.attributes[e].uri+" "+a.attributes[e].local,f=m.byQName[c];if(void 0!==f){var k=f.parse(a.attributes[e].value);null!==k?(d[c]=k,f===m.byName.zIndex&&Q(b,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):P(b,"Cannot parse styling attribute "+c+" --\x3e "+a.attributes[e].value)}}return d}
function q(a,b,d){for(var e in a.attributes)if(a.attributes.hasOwnProperty(e)&&a.attributes[e].uri===b&&a.attributes[e].local===d)return a.attributes[e].value;return null}function S(b,d){b=q(b,a.ns_tts,"extent");if(null===b)return null;var e=b.split(" ");if(2!==e.length)return Q(d,"Malformed extent (ignoring)"),null;b=l.parseLength(e[0]);e=l.parseLength(e[1]);return e&&b?{h:e,w:b}:(Q(d,"Malformed extent values (ignoring)"),null)}function U(a,b,d){var e=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,c=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,
f=/^(\d+(?:\.\d+)?)t$/,k=/^(\d+(?:\.\d+)?)ms$/,h=/^(\d+(?:\.\d+)?)s$/,n=/^(\d+(?:\.\d+)?)h$/,g=/^(\d+(?:\.\d+)?)m$/,l,t=null;null!==(l=/^(\d+(?:\.\d+)?)f$/.exec(d))?null!==b&&(t=parseFloat(l[1])/b):null!==(l=f.exec(d))?null!==a&&(t=parseFloat(l[1])/a):null!==(l=k.exec(d))?t=parseFloat(l[1])/1E3:null!==(l=h.exec(d))?t=parseFloat(l[1]):null!==(l=n.exec(d))?t=3600*parseFloat(l[1]):null!==(l=g.exec(d))?t=60*parseFloat(l[1]):null!==(l=e.exec(d))?t=3600*parseInt(l[1])+60*parseInt(l[2])+parseFloat(l[3]):
null!==(l=c.exec(d))&&null!==b&&(t=3600*parseInt(l[1])+60*parseInt(l[2])+parseInt(l[3])+(null===l[4]?0:parseInt(l[4])/b));return t}function W(a,b,d){for(;0<b.styleRefs.length;){var e=b.styleRefs.pop();e in a.styles?(W(a,a.styles[e],d),V(a.styles[e].styleAttrs,b.styleAttrs)):P(d,"Non-existant style id referenced")}}function T(a,b,d,e){for(var c=b.length-1;0<=c;c--){var f=b[c];f in a.styles?V(a.styles[f].styleAttrs,d):P(e,"Non-existant style id referenced")}}function V(a,b){for(var d in a)a.hasOwnProperty(d)&&
(d in b||(b[d]=a[d]))}function Q(a,b){if(a&&a.warn&&a.warn(b))throw b;}function P(a,b){if(a&&a.error&&a.error(b))throw b;}function N(a,b){a&&a.fatal&&a.fatal(b);throw b;}function X(a,b){for(var d=0,e=a.length-1,c;d<=e;){c=Math.floor((d+e)/2);var f=a[c];if(f<b)d=c+1;else if(f>b)e=c-1;else return{found:!0,index:c}}return{found:!1,index:d}}c.fromXML=function(b,e,c,f){var k=g.parser(!0,{xmlns:!0}),n=[],l=[],q=[],C=0,A=null;k.onclosetag=function(b){if(f&&"function"===typeof f.onclosetag)f.onclosetag(b);
if(n[0]instanceof I)null!==A.head&&null!==A.head.styling&&T(A.head.styling,n[0].styleRefs,n[0].styleAttrs,e),delete n[0].styleRefs;else if(n[0]instanceof r)for(var d in n[0].styles)n[0].styles.hasOwnProperty(d)&&W(n[0],n[0].styles[d],e);else if(n[0]instanceof J||n[0]instanceof K){if(1<n[0].contents.length){b=[n[0].contents[0]];for(d=1;d<n[0].contents.length;d++)n[0].contents[d]instanceof E&&b[b.length-1]instanceof E?b[b.length-1].text+=n[0].contents[d].text:b.push(n[0].contents[d]);n[0].contents=
b}n[0]instanceof K&&1===n[0].contents.length&&n[0].contents[0]instanceof E&&(n[0].text=n[0].contents[0].text,delete n[0].contents)}else if(n[0]instanceof u)if(n[0].node.uri===a.ns_tt&&"metadata"===n[0].node.local)C--;else if(0<C&&c&&"onCloseTag"in c)c.onCloseTag();q.shift();l.shift();n.shift()};k.ontext=function(a){if(f&&"function"===typeof f.ontext)f.ontext(a);if(void 0!==n[0])if(n[0]instanceof K||n[0]instanceof J){if(n[0]instanceof K){var b=n[0].styleAttrs[m.byName.ruby.qname];if("container"===
b||"textContainer"===b||"baseContainer"===b)return}b=new E;b.initFromText(A,n[0],a,l[0],q[0],e);n[0].contents.push(b)}else if(n[0]instanceof u&&0<C&&c&&"onText"in c)c.onText(a)};k.onopentag=function(b){function d(b){a.ttaf_map[b.uri]&&(b.uri=a.ttaf_map[b.uri])}if(f&&"function"===typeof f.onopentag)f.onopentag(b);var k=b.attributes["xml:space"];k?q.unshift(k.value):0===q.length?q.unshift("default"):q.unshift(q[0]);(k=b.attributes["xml:lang"])?l.unshift(k.value):0===l.length?l.unshift(""):l.unshift(l[0]);
d(b);if(b.attributes)for(var g in b.attributes)b.attributes.hasOwnProperty(g)&&d(b.attributes[g]);if(b.uri===a.ns_tt)if("tt"===b.local)null!==A&&N(e,"Two <tt> elements at ("+this.line+","+this.column+")"),A=new h,A.initFromNode(b,l[0],e),n.unshift(A);else if("head"===b.local)n[0]instanceof h||N(e,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),n.unshift(A.head);else if("styling"===b.local)n[0]instanceof x||N(e,"Parent of <styling> element is not <head> at ("+this.line+","+
this.column+")"),n.unshift(A.head.styling);else if("style"===b.local)if(n[0]instanceof r){var t=new v;t.initFromNode(b,e);t.id?A.head.styling.styles[t.id]=t:P(e,"<style> element missing @id attribute");n.unshift(t)}else n[0]instanceof I?(t=new v,t.initFromNode(b,e),V(t.styleAttrs,n[0].styleAttrs),n.unshift(t)):N(e,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===b.local)if(n[0]instanceof r){g=new F;g.initFromNode(b,e);for(t in g.styleAttrs)g.styleAttrs.hasOwnProperty(t)&&
(A.head.styling.initials[t]=g.styleAttrs[t]);n.unshift(g)}else N(e,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===b.local)n[0]instanceof x||N(e,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),n.unshift(A.head.layout);else if("region"===b.local)n[0]instanceof D||N(e,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),t=new I,t.initFromNode(A,b,l[0],e),!t.id||t.id in A.head.layout.regions?
P(e,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):A.head.layout.regions[t.id]=t,n.unshift(t);else if("body"===b.local)n[0]instanceof h||N(e,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==A.body&&N(e,"Second <body> element at "+this.line+","+this.column+")"),t=new M,t.initFromNode(A,b,l[0],e),A.body=t,n.unshift(t);else if("div"===b.local){n[0]instanceof B||n[0]instanceof M||N(e,"Parent of <div> element is not <body> or <div> at "+
this.line+","+this.column+")");t=new B;t.initFromNode(A,n[0],b,l[0],e);if(g=t.styleAttrs[m.byName.backgroundImage.qname])t.contents.push(new z(g)),delete t.styleAttrs[m.byName.backgroundImage.qname];n[0].contents.push(t);n.unshift(t)}else"image"===b.local?(n[0]instanceof B||N(e,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),t=new z,t.initFromNode(A,n[0],b,l[0],e),n[0].contents.push(t),n.unshift(t)):"p"===b.local?(n[0]instanceof B||N(e,"Parent of <p> element is not <div> at "+
this.line+","+this.column+")"),t=new J,t.initFromNode(A,n[0],b,l[0],e),n[0].contents.push(t),n.unshift(t)):"span"===b.local?(n[0]instanceof K||n[0]instanceof J||N(e,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),t=new K,t.initFromNode(A,n[0],b,l[0],q[0],e),n[0].contents.push(t),n.unshift(t)):"br"===b.local?(n[0]instanceof K||n[0]instanceof J||N(e,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),t=new L,t.initFromNode(A,n[0],b,l[0],
e),n[0].contents.push(t),n.unshift(t)):"set"===b.local?(n[0]instanceof K||n[0]instanceof J||n[0]instanceof B||n[0]instanceof M||n[0]instanceof I||n[0]instanceof L||N(e,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),t=new O,t.initFromNode(A,n[0],b,e),n[0].sets.push(t),n.unshift(t)):n.unshift(new u(b));else n.unshift(new u(b));if(n[0]instanceof u)if(b.uri===a.ns_tt&&"metadata"===b.local)C++;else if(0<C&&c&&"onOpenTag"in c){t=[];for(var p in b.attributes)b.attributes.hasOwnProperty(p)&&
(t[b.attributes[p].uri+" "+b.attributes[p].local]={uri:b.attributes[p].uri,local:b.attributes[p].local,value:b.attributes[p].value});c.onOpenTag(b.uri,b.local,t)}};k.write(b).close();delete A.head.styling.styles;b=!1;for(var w in A.head.layout.regions)if(A.head.layout.regions.hasOwnProperty(w)){b=!0;break}b||(w=I.prototype.createDefaultRegion(A,e),A.head.layout.regions[w.id]=w);for(var Y in A.head.layout.regions)A.head.layout.regions.hasOwnProperty(Y)&&t(A,A.head.layout.regions[Y],null,null);A.body&&
t(A,A.body,null,null);A.body&&d(A.body);A.body&&p(A.body);return A};h.prototype.initFromNode=function(b,d,e){var c=q(b,a.ns_ttp,"cellResolution"),f=15;var n=32;null!==c&&(c=/(\d+) (\d+)/.exec(c),null!==c?(n=parseInt(c[1]),f=parseInt(c[2])):Q(e,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new l.ComputedLength(0,1/f),w:new l.ComputedLength(1/n,0)};f=q(b,a.ns_ttp,"frameRate");c=30;null!==f&&(n=/(\d+)/.exec(f),null!==n?c=parseInt(n[1]):Q(e,"Malformed frame rate attribute (using initial value instead)"));
n=q(b,a.ns_ttp,"frameRateMultiplier");var k=1;null!==n&&(n=/(\d+) (\d+)/.exec(n),null!==n?k=parseInt(n[1])/parseInt(n[2]):Q(e,"Malformed frame rate multiplier attribute (using initial value instead)"));c*=k;k=1;n=q(b,a.ns_ttp,"tickRate");null===n?null!==f&&(k=c):(n=/(\d+)/.exec(n),null!==n?k=parseInt(n[1]):Q(e,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=c;this.tickRate=k;n=q(b,a.ns_ittp,"aspectRatio");null===n&&(n=q(b,a.ns_ttp,"displayAspectRatio"));f=null;
null!==n&&(c=/(\d+)\s+(\d+)/.exec(n),null!==c?(n=parseInt(c[1]),c=parseInt(c[2]),0!==n&&0!==c?f=n/c:P(e,"Illegal aspectRatio values (ignoring)")):P(e,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=f;f=q(b,a.ns_ttp,"timeBase");null!==f&&"media"!==f&&N(e,"Unsupported time base");b=S(b,e);null===b?this.pxLength={h:null,w:null}:("px"===b.h.unit&&"px"===b.w.unit||N(e,"Extent on TT must be in px or absent"),this.pxLength={h:new l.ComputedLength(0,1/b.h.value),w:new l.ComputedLength(1/b.w.value,
0)});this.dimensions={h:new l.ComputedLength(0,1),w:new l.ComputedLength(1,0)};this.lang=d};h.prototype._registerEvent=function(a){if(!(a.end<=a.begin)){var b=X(this.events,a.begin);b.found||this.events.splice(b.index,0,a.begin);a.end!==Number.POSITIVE_INFINITY&&(b=X(this.events,a.end),b.found||this.events.splice(b.index,0,a.end))}};h.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]};h.prototype.getMediaTimeEvents=function(){return this.events};v.prototype.initFromNode=
function(a,b){this.id=f(a);this.styleAttrs=R(a,b);this.styleRefs=e(a)};F.prototype.initFromNode=function(b,d){this.styleAttrs={};for(var e in b.attributes)!b.attributes.hasOwnProperty(e)||b.attributes[e].uri!==a.ns_itts&&b.attributes[e].uri!==a.ns_ebutts&&b.attributes[e].uri!==a.ns_tts||(this.styleAttrs[b.attributes[e].uri+" "+b.attributes[e].local]=b.attributes[e].value)};z.prototype.initFromNode=function(a,d,e,c,f){(this.src="src"in e.attributes?e.attributes.src.value:null)||P(f,"Invalid image@src attribute");
(this.type="type"in e.attributes?e.attributes.type.value:null)||P(f,"Invalid image@type attribute");C.prototype.initFromNode.call(this,a,d,e,f);A.prototype.initFromNode.call(this,a,d,e,f);n.prototype.initFromNode.call(this,a,d,e,f);b.prototype.initFromNode.call(this,a,d,e,f);this.lang=c};H.prototype.initFromNode=function(a,b,d,e){this.id=f(d)};b.prototype.initFromNode=function(a,b,d,e){if(b=d&&"region"in d.attributes?d.attributes.region.value:"")if(a.head.layout.regions[b])this.regionID=b;else{var c;
for(c in a.head.layout.regions)if(a.head.layout.regions.hasOwnProperty(c)&&a.head.layout.regions[c].isDefaultRegion){var f=a.head.layout.regions[c];break}f||(f=I.prototype.createDefaultRegion(a,e),a.head.layout.regions[f.id]=f);P(e,"Cannot find specified region: "+b)}};C.prototype.initFromNode=function(a,b,d,c){this.styleAttrs=R(d,c);null!==a.head&&null!==a.head.styling&&T(a.head.styling,e(d),this.styleAttrs,c)};n.prototype.initFromNode=function(a,b,d,e){this.sets=[]};k.prototype.initFromNode=function(a,
b,d,e){this.contents=[]};A.prototype.initFromNode=function(a,b,d,e){b=null;d&&"begin"in d.attributes&&(b=U(a.tickRate,a.effectiveFrameRate,d.attributes.begin.value),null===b&&Q(e,"Malformed begin value "+d.attributes.begin.value+" (using 0)"));var c=null;d&&"dur"in d.attributes&&(c=U(a.tickRate,a.effectiveFrameRate,d.attributes.dur.value),null===c&&Q(e,"Malformed dur value "+d.attributes.dur.value+" (ignoring)"));var f=null;d&&"end"in d.attributes&&(f=U(a.tickRate,a.effectiveFrameRate,d.attributes.end.value),
null===f&&Q(e,"Malformed end value (ignoring)"));this.explicit_begin=b;this.explicit_end=f;this.explicit_dur=c;(a=d&&"timeContainer"in d.attributes?d.attributes.timeContainer.value:null)&&"par"!==a?"seq"===a?e="seq":(P(e,"Illegal value of timeContainer (assuming 'par')"),e="par"):e="par";this.timeContainer=e};M.prototype.initFromNode=function(a,d,e,c){C.prototype.initFromNode.call(this,a,null,d,c);A.prototype.initFromNode.call(this,a,null,d,c);n.prototype.initFromNode.call(this,a,null,d,c);b.prototype.initFromNode.call(this,
a,null,d,c);k.prototype.initFromNode.call(this,a,null,d,c);this.lang=e};B.prototype.initFromNode=function(a,d,e,c,f){C.prototype.initFromNode.call(this,a,d,e,f);A.prototype.initFromNode.call(this,a,d,e,f);n.prototype.initFromNode.call(this,a,d,e,f);b.prototype.initFromNode.call(this,a,d,e,f);k.prototype.initFromNode.call(this,a,d,e,f);this.lang=c};J.prototype.initFromNode=function(a,d,e,c,f){C.prototype.initFromNode.call(this,a,d,e,f);A.prototype.initFromNode.call(this,a,d,e,f);n.prototype.initFromNode.call(this,
a,d,e,f);b.prototype.initFromNode.call(this,a,d,e,f);k.prototype.initFromNode.call(this,a,d,e,f);this.lang=c};K.prototype.initFromNode=function(a,d,e,c,f,h){C.prototype.initFromNode.call(this,a,d,e,h);A.prototype.initFromNode.call(this,a,d,e,h);n.prototype.initFromNode.call(this,a,d,e,h);b.prototype.initFromNode.call(this,a,d,e,h);k.prototype.initFromNode.call(this,a,d,e,h);this.space=f;this.lang=c};E.prototype.initFromText=function(a,b,d,e,c,f){A.prototype.initFromNode.call(this,a,b,null,f);this.text=
d;this.space=c;this.lang=e};L.prototype.initFromNode=function(a,d,e,c,f){b.prototype.initFromNode.call(this,a,d,e,f);A.prototype.initFromNode.call(this,a,d,e,f);this.lang=c};I.prototype.createDefaultRegion=function(a,b){var d=new I;d.id="";C.prototype.initFromNode.call(d,a,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",value:"after",prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",
uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",ebutts:"urn:ebu:tt:style",ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",
ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},b);d.sets=[];A.call(d,0,Number.POSITIVE_INFINITY,null);this.lang=a.xmllang;d.isDefaultRegion=!0;return d};I.prototype.initFromNode=function(a,b,d,c){H.prototype.initFromNode.call(this,a,null,b,c);A.prototype.initFromNode.call(this,a,null,b,c);n.prototype.initFromNode.call(this,a,null,b,c);this.styleAttrs=
R(b,c);this.styleRefs=e(b);this.lang=d};O.prototype.initFromNode=function(a,b,d,e){A.prototype.initFromNode.call(this,a,b,d,e);a=R(d,e);this.value=this.qname=null;for(var c in a)if(a.hasOwnProperty(c)){if(this.qname){P(e,"More than one style specified on set");break}this.qname=c;this.value=a[c]}}})("undefined"===typeof m?this.imscDoc={}:m,"undefined"===typeof sax?c("sax"):sax,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===
typeof imscUtils?c("./utils"):imscUtils)},{"./names":31,"./styles":32,"./utils":33,sax:24}],28:[function(c,v,m){(function(c,g,a,m){function l(a){var b={};a=Object.entries(a);for(var d in a)if(a.hasOwnProperty(d)){var c=m.parseColor(a[d][0]),h=m.parseColor(a[d][1]);c&&h&&(b[c.toString()]=h)}return b}function p(b,c,n,k){if("region"===n.kind){var g=document.createElement("div");g.style.position="absolute"}else if("body"===n.kind)g=document.createElement("div");else if("div"===n.kind)g=document.createElement("div");
else if("image"===n.kind){if(g=document.createElement("img"),null!==b.imgResolver&&null!==n.src){var l=b.imgResolver(n.src,g);l&&(g.src=l);g.height=b.regionH;g.width=b.regionW}}else if("p"===n.kind)g=document.createElement("p");else if("span"===n.kind)if("container"===n.styleAttrs[a.byName.ruby.qname])g=document.createElement("ruby"),b.ruby=!0;else if("base"===n.styleAttrs[a.byName.ruby.qname])g=document.createElement("rb");else if("text"===n.styleAttrs[a.byName.ruby.qname])g=document.createElement("rt");
else if("baseContainer"===n.styleAttrs[a.byName.ruby.qname])g=document.createElement("rbc");else if("textContainer"===n.styleAttrs[a.byName.ruby.qname])g=document.createElement("rtc");else{if("delimiter"===n.styleAttrs[a.byName.ruby.qname])return;g=document.createElement("span")}else"br"===n.kind&&(g=document.createElement("br"));if(g){!n.lang||"region"!==n.kind&&n.lang===k.lang||(g.lang=n.lang);c.appendChild(g);g.style.margin="0";if("region"===n.kind)if(c=n.styleAttrs[a.byName.writingMode.qname],
"lrtb"===c||"lr"===c)b.ipd="lr",b.bpd="tb";else if("rltb"===c||"rl"===c)b.ipd="rl",b.bpd="tb";else if("tblr"===c)b.ipd="tb",b.bpd="lr";else{if("tbrl"===c||"tb"===c)b.ipd="tb",b.bpd="rl"}else"p"===n.kind&&"tb"===b.bpd&&(b.ipd="ltr"===n.styleAttrs[a.byName.direction.qname]?"lr":"rl");for(c=0;c<x.length;c++)k=x[c],l=n.styleAttrs[k.qname],void 0!==l&&null!==k.map&&k.map(b,g,n,l);c=g;(k=n.styleAttrs[a.byName.linePadding.qname])&&!k.isZero()&&(l=k.multiply(k.toUsedLength(b.w,b.h),b.options.sizeAdjust),
0<l&&(l=Math.ceil(l)+"px","tb"===b.bpd?(c.style.paddingLeft=l,c.style.paddingRight=l):(c.style.paddingTop=l,c.style.paddingBottom=l),b.removePaddingElement=c,b.lp=k));(k=n.styleAttrs[a.byName.multiRowAlign.qname])&&"auto"!==k&&(c=document.createElement("span"),c.style.display="inline-block",c.style.textAlign=k,g.appendChild(c),b.mra=k);(k=n.styleAttrs[a.byName.rubyReserve.qname])&&"none"!==k[0]&&(b.rubyReserve=k);n.styleAttrs[a.byName.fillLineGap.qname]&&(b.flg=!0);if("span"===n.kind&&n.text)if((k=
n.styleAttrs[a.byName.textEmphasis.qname])&&"none"!==k.style&&(b.textEmphasis=!0),a.byName.textCombine.qname in n.styleAttrs&&"all"===n.styleAttrs[a.byName.textCombine.qname])g.textContent=n.text,k&&v(b,g,n,k);else{l="";for(var r=0;r<n.text.length;r++){l+=n.text.charAt(r);var m=n.text.charCodeAt(r);if(55296>m||56319<m||r===n.text.length-1)m=document.createElement("span"),m.textContent=l,k&&v(b,m,n,k),g.appendChild(m),l="",m._isd_element=n}}if("contents"in n)for(k=0;k<n.contents.length;k++)p(b,c,n.contents[k],
n);k=[];if("p"===n.kind){h(b,c,k,null);if(b.rubyReserve){for(l=0;l<k.length;l++){r=document.createElement("ruby");m=document.createElement("rb");m.textContent="\u200b";r.appendChild(m);var C=b.rubyReserve[1].toUsedLength(b.w,b.h)+"px";if("both"===b.rubyReserve[0]||"outside"===b.rubyReserve[0]&&1==k.length){m=document.createElement("rtc");m.style[D]=F?"after":"under";m.textContent="\u200b";m.style.fontSize=C;var w=document.createElement("rtc");w.style[D]=F?"before":"over";w.textContent="\u200b";w.style.fontSize=
C;r.appendChild(m);r.appendChild(w)}else m=document.createElement("rtc"),m.textContent="\u200b",m.style.fontSize=C,m.style[D]="after"===b.rubyReserve[0]||"outside"===b.rubyReserve[0]&&0<l?F?"after":"tb"===b.bpd||"rl"===b.bpd?"under":"over":F?"before":"tb"===b.bpd||"rl"===b.bpd?"over":"under",r.appendChild(m);m=null;for(w=0;w<k[l].rbc.length;w++)if("ruby"===k[l].rbc[w].localName){m=k[l].rbc[w];for(w=0;w<m.style.length;w++)r.style.setProperty(m.style.item(w),m.style.getPropertyValue(m.style.item(w)));
break}m=m||k[l].elements[0].node;m.parentElement.insertBefore(r,m)}b.rubyReserve=null}if(b.ruby||b.rubyReserve){for(l=0;l<k.length;l++)for(r=0;r<k[l].rbc.length;r++)k[l].rbc[r].style[D]||(k[l].rbc[r].style[D]=F?0===l?"before":"after":"tb"===b.bpd?0===l?"over":"under":"rl"===b.bpd?0===l?"over":"under":0===l?"under":"over");b.ruby=null}if(b.textEmphasis){for(l=0;l<k.length;l++)for(r=0;r<k[l].te.length;r++)k[l].te[r].style[H]&&"none"!==k[l].te[r].style[H]||(k[l].te[r].style[H]="tb"===b.bpd?0===l?"left over":
"left under":"rl"===b.bpd?0===l?"right under":"left under":0===l?"left under":"right under");b.textEmphasis=null}if(b.mra){for(l=0;l<k.length-1;l++)m=k[l].elements.length,0!==m&&!1===k[l].br&&(r=document.createElement("br"),m=k[l].elements[m-1].node,m.parentElement.insertBefore(r,m.nextSibling));b.mra=null}if(b.lp){l=b.lp.multiply(b.lp.toUsedLength(b.w,b.h),b.options.sizeAdjust);if(null!==k)for(r=0;r<k.length;r++)if(m=Math.ceil(l)+"px",w="-"+Math.ceil(l)+"px",0!==k[r].elements.length){C=k[r].elements[k[r].start_elem];
var z=k[r].elements[k[r].end_elem];if(C===z&&(elementBoundingRect=C.node.getBoundingClientRect(),0==elementBoundingRect.width||0==elementBoundingRect.height))continue;"lr"===b.ipd?(C.node.style.marginLeft=w,C.node.style.paddingLeft=m):"rl"===b.ipd?(C.node.style.paddingRight=m,C.node.style.marginRight=w):"tb"===b.ipd&&(C.node.style.paddingTop=m,C.node.style.marginTop=w);"lr"===b.ipd?(z.node.style.marginRight=w,z.node.style.paddingRight=m):"rl"===b.ipd?(z.node.style.paddingLeft=m,z.node.style.marginLeft=
w):"tb"===b.ipd&&(z.node.style.paddingBottom=m,z.node.style.marginBottom=w)}"tb"===b.bpd?(b.removePaddingElement.style.paddingLeft=0,b.removePaddingElement.style.paddingRight=0):(b.removePaddingElement.style.paddingTop=0,b.removePaddingElement.style.paddingBottom=0);b.lp=null}for(l=0;l<k.length;l++)for(r=k[l],m=1;m<r.elements.length;){w=r.elements[m-1].node;C=r.elements[m].node;if("SPAN"===w.tagName&&"SPAN"===C.tagName&&w._isd_element===C._isd_element){w.textContent+=C.textContent;for(z=0;z<C.style.length;z++){var y=
C.style[z];if(0<=y.indexOf("border")||0<=y.indexOf("padding")||0<=y.indexOf("margin"))w.style[y]=C.style[y]}C.parentElement.removeChild(C);w=!0}else w=!1;w?r.elements.splice(m,1):m++}l=[];for(w=0;w<k.length;w++)for(C=0;C<k[w].elements.length;C++)if(r=k[w].elements[C].node,m=d(r,l,!1))r.style.backgroundColor=m;for(r=0;r<l.length;r++)l[r].style.backgroundColor="";if(b.flg){r=u(c.getBoundingClientRect(),b);l=r.before;r=r.after;m=Math.sign(r-l);for(w=0;w<=k.length;w++){C=0===w?Math.round(l):w===k.length?
Math.round(r):Math.round((k[w-1].after+k[w].before)/2);if(0<w&&k[w-1])for(y=0;y<k[w-1].elements.length;y++){var G=k[w-1].elements[y];z=m*(C-G.after)+"px";"lr"===b.bpd?G.node.style.paddingRight=z:"rl"===b.bpd?G.node.style.paddingLeft=z:"tb"===b.bpd&&(G.node.style.paddingBottom=z)}if(w<k.length)for(y=0;y<k[w].elements.length;y++)G=k[w].elements[y],z=m*(G.before-C)+"px","lr"===b.bpd?G.node.style.paddingLeft=z:"rl"===b.bpd?G.node.style.paddingRight=z:"tb"===b.bpd&&(G.node.style.paddingTop=z)}b.flg=null}}"region"===
n.kind&&"tb"===b.bpd&&b.enableRollUp&&0<n.contents.length&&"after"===n.styleAttrs[a.byName.displayAlign.qname]&&(h(b,c,k,null),n=new t(""===n.id?"_":n.id,k),b.currentISDState[n.id]=n,b.previousISDState&&n.id in b.previousISDState&&0<b.previousISDState[n.id].plist.length&&1<n.plist.length&&n.plist[n.plist.length-2].text===b.previousISDState[n.id].plist[b.previousISDState[n.id].plist.length-1].text&&(b=g.firstElementChild,n=n.plist[n.plist.length-1].after-n.plist[n.plist.length-1].before,b.style.bottom=
"-"+n+"px",b.style.transition="transform 0.4s",b.style.position="relative",b.style.transform="translateY(-"+n+"px)"))}else if(b=b.errorHandler,n="Error processing ISD element kind: "+n.kind,b&&b.error&&b.error(n))throw n;}function d(a,c,n){if(a.style.backgroundColor)return n&&!c.includes(a)&&c.push(a),a.style.backgroundColor;if("SPAN"===a.parentElement.nodeName)return d(a.parentElement,c,!0)}function t(a,d){this.id=a;this.plist=d}function u(a,d){var b={before:null,after:null,start:null,end:null};
"tb"===d.bpd?(b.before=a.top,b.after=a.bottom,"lr"===d.ipd?(b.start=a.left,b.end=a.right):(b.start=a.right,b.end=a.left)):"lr"===d.bpd?(b.before=a.left,b.after=a.right,b.start=a.top,b.end=a.bottom):"rl"===d.bpd&&(b.before=a.right,b.after=a.left,b.start=a.top,b.end=a.bottom);return b}function h(a,d,c,k){if("rt"!==d.localName&&"rtc"!==d.localName)if(k=d.style.backgroundColor||k,0===d.childElementCount)if("span"===d.localName||"rb"===d.localName){var b=d.getBoundingClientRect();a=u(b,a);if(!(b=0===c.length)){b=
a.before;var n=a.after,l=c[c.length-1].before,g=c[c.length-1].after;b=!(n<g&&b>l||g<=n&&l>=b)}b?c.push({before:a.before,after:a.after,start:a.start,end:a.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(b=Math.sign(a.after-a.before),n=Math.sign(a.end-a.start),0>b*(a.before-c[c.length-1].before)&&(c[c.length-1].before=a.before),0<b*(a.after-c[c.length-1].after)&&(c[c.length-1].after=a.after),0>n*(a.start-c[c.length-1].start)&&(c[c.length-1].start=a.start,c[c.length-1].start_elem=
c[c.length-1].elements.length),0<n*(a.end-c[c.length-1].end)&&(c[c.length-1].end=a.end,c[c.length-1].end_elem=c[c.length-1].elements.length));c[c.length-1].text+=d.textContent;c[c.length-1].elements.push({node:d,bgcolor:k,before:a.before,after:a.after})}else"br"===d.localName&&0!==c.length&&(c[c.length-1].br=!0);else for(d=d.firstChild;d;)d.nodeType===Node.ELEMENT_NODE&&(h(a,d,c,k),"ruby"===d.localName||"rtc"===d.localName?0<c.length&&c[c.length-1].rbc.push(d):"span"===d.localName&&d.style[z]&&"none"!==
d.style[z]&&0<c.length&&c[c.length-1].te.push(d)),d=d.nextSibling}function v(a,d,c,k){"none"!==k.style&&(d.style[z]="auto"===k.style?"filled":k.style+" "+k.symbol,"before"===k.position||"after"===k.position)&&(d.style[H]="tb"===a.bpd?"before"===k.position?"left over":"left under":"rl"===a.bpd?"before"===k.position?"right under":"left under":"before"===k.position?"left under":"right under")}function r(a,d){this.qname=a;this.map=d}c.render=function(a,d,c,k,h,g,t,u,r,m){k=k||d.clientHeight;var b=h||
d.clientWidth;null!==a.aspectRatio&&(h=k*a.aspectRatio,h>b?k=Math.round(b/a.aspectRatio):b=h);h=document.createElement("div");h.style.position="relative";h.style.width=b+"px";h.style.height=k+"px";h.style.margin="auto";h.style.top=0;h.style.bottom=0;h.style.left=0;h.style.right=0;h.style.zIndex=0;c={h:k,w:b,regionH:null,regionW:null,imgResolver:c,displayForcedOnlyMode:g||!1,isd:a,errorHandler:t,previousISDState:u,enableRollUp:r||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,
textEmphasis:null,rubyReserve:null,options:Object.assign({},m)||{}};c.options.colorAdjust&&(c.options.colorAdjust=l(c.options.colorAdjust));g=["region","body","div","p","span"];for(var n in g)g.hasOwnProperty(n)&&(t=g[n]+"BackgroundColorAdjust",c.options[t]&&(c.options[t]=l(c.options[t])));d.appendChild(h);if("contents"in a)for(d=0;d<a.contents.length;d++)p(c,h,a.contents[d],a);return c.currentISDState};var x=[new r("http://www.w3.org/ns/ttml#styling backgroundColor",function(a,d,c,k){(c=(c=a.options[c.kind+
"BackgroundColorAdjust"])&&c[k.toString()])&&(k=c);c=k[3];0!==c&&(void 0!=a.options.backgroundOpacityScale&&(c*=a.options.backgroundOpacityScale),d.style.backgroundColor="rgba("+k[0].toString()+","+k[1].toString()+","+k[2].toString()+","+(c/255).toString()+")")}),new r("http://www.w3.org/ns/ttml#styling color",function(a,d,c,k){c=a.options.colorOpacityScale||1;a=a.options.colorAdjust;void 0!=a&&(a=a[k.toString()])&&(k=a);d.style.color="rgba("+k[0].toString()+","+k[1].toString()+","+k[2].toString()+
","+(c*k[3]/255).toString()+")"}),new r("http://www.w3.org/ns/ttml#styling direction",function(a,d,c,k){d.style.direction=k}),new r("http://www.w3.org/ns/ttml#styling display",function(a,d,c,k){}),new r("http://www.w3.org/ns/ttml#styling displayAlign",function(a,d,c,k){d.style.display="flex";d.style.flexDirection="column";"before"===k?d.style.justifyContent="flex-start":"center"===k?d.style.justifyContent="center":"after"===k&&(d.style.justifyContent="flex-end")}),new r("http://www.w3.org/ns/ttml#styling extent",
function(a,d,c,k){a.regionH=k.h.toUsedLength(a.w,a.h);a.regionW=k.w.toUsedLength(a.w,a.h);var b=k=0;if(c=c.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])k=c[0].toUsedLength(a.w,a.h)+c[2].toUsedLength(a.w,a.h),b=c[1].toUsedLength(a.w,a.h)+c[3].toUsedLength(a.w,a.h);d.style.height=a.regionH-k+"px";d.style.width=a.regionW-b+"px"}),new r("http://www.w3.org/ns/ttml#styling fontFamily",function(a,d,c,k){c=[];a.options.fontFamily&&(k=a.options.fontFamily.split(","));for(a=0;a<k.length;a++)k[a]=
k[a].trim(),"monospaceSerif"===k[a]?(c.push("Courier New"),c.push('"Liberation Mono"'),c.push("Courier"),c.push("monospace")):"proportionalSansSerif"===k[a]||"default"===k[a]?(c.push("Arial"),c.push("Helvetica"),c.push('"Liberation Sans"'),c.push("sans-serif")):"monospace"===k[a]?c.push("monospace"):"sansSerif"===k[a]?c.push("sans-serif"):"serif"===k[a]?c.push("serif"):"monospaceSansSerif"===k[a]?(c.push("Consolas"),c.push("monospace")):"proportionalSerif"===k[a]?c.push("serif"):c.push(k[a]);if(0<
c.length){k=[c[0]];for(a=1;a<c.length;a++)-1==k.indexOf(c[a])&&k.push(c[a]);c=k}d.style.fontFamily=c.join(",")}),new r("http://www.w3.org/ns/ttml#styling shear",function(a,d,c,k){0!==k&&(c=-.9*k,d.style.transform="tb"===a.bpd?"skewX("+c+"deg)":"skewY("+c+"deg)")}),new r("http://www.w3.org/ns/ttml#styling fontSize",function(a,d,c,k){d.style.fontSize=k.multiply(k.toUsedLength(a.w,a.h),a.options.sizeAdjust)+"px"}),new r("http://www.w3.org/ns/ttml#styling fontStyle",function(a,d,c,k){d.style.fontStyle=
k}),new r("http://www.w3.org/ns/ttml#styling fontWeight",function(a,d,c,k){d.style.fontWeight=k}),new r("http://www.w3.org/ns/ttml#styling lineHeight",function(a,d,c,k){d.style.lineHeight="normal"===k?"normal":k.multiply(k.multiply(k.toUsedLength(a.w,a.h),a.options.sizeAdjust),a.options.lineHeightAdjust)+"px"}),new r("http://www.w3.org/ns/ttml#styling opacity",function(a,d,c,k){c=k;void 0!=a.options.regionOpacityScale&&(c*=a.options.regionOpacityScale);d.style.opacity=c}),new r("http://www.w3.org/ns/ttml#styling origin",
function(a,d,c,k){d.style.top=k.h.toUsedLength(a.w,a.h)+"px";d.style.left=k.w.toUsedLength(a.w,a.h)+"px"}),new r("http://www.w3.org/ns/ttml#styling overflow",function(a,d,c,k){d.style.overflow=k}),new r("http://www.w3.org/ns/ttml#styling padding",function(a,d,c,k){c=[];c[0]=k[0].toUsedLength(a.w,a.h)+"px";c[1]=k[3].toUsedLength(a.w,a.h)+"px";c[2]=k[2].toUsedLength(a.w,a.h)+"px";c[3]=k[1].toUsedLength(a.w,a.h)+"px";d.style.padding=c.join(" ")}),new r("http://www.w3.org/ns/ttml#styling position",function(a,
d,c,k){d.style.top=k.h.toUsedLength(a.w,a.h)+"px";d.style.left=k.w.toUsedLength(a.w,a.h)+"px"}),new r("http://www.w3.org/ns/ttml#styling rubyAlign",function(a,d,c,k){d.style.rubyAlign="spaceAround"===k?"space-around":"center"}),new r("http://www.w3.org/ns/ttml#styling rubyPosition",function(a,d,c,k){if("before"===k||"after"===k)d.parentElement.style[D]=F?k:"tb"===a.bpd?"before"===k?"over":"under":"rl"===a.bpd?"before"===k?"over":"under":"before"===k?"under":"over"}),new r("http://www.w3.org/ns/ttml#styling showBackground",
null),new r("http://www.w3.org/ns/ttml#styling textAlign",function(a,d,c,k){d.style.textAlign="start"===k?"rl"===a.ipd?"right":"left":"end"===k?"rl"===a.ipd?"left":"right":k}),new r("http://www.w3.org/ns/ttml#styling textDecoration",function(a,d,c,k){d.style.textDecoration=k.join(" ").replace("lineThrough","line-through")}),new r("http://www.w3.org/ns/ttml#styling textOutline",function(a,d,c,k){}),new r("http://www.w3.org/ns/ttml#styling textShadow",function(b,d,c,k){c=c.styleAttrs[a.byName.textOutline.qname];
var h=b.options.textOutline;if(h)if("none"===h)c=h;else{var l={};h=h.split(" ");if(0!==h.length&&2>=h.length){var g=m.parseColor(h[0]);l.color=g;null!==g&&h.shift();1===h.length&&(h=m.parseLength(h[0]))&&(l.thickness=h,c=l)}}if("none"===k&&"none"===c)d.style.textShadow="";else{l=[];"none"!==c&&(c="rgba("+c.color[0].toString()+","+c.color[1].toString()+","+c.color[2].toString()+","+(c.color[3]/255).toString()+")",l.push("1px 1px 1px "+c),l.push("-1px 1px 1px "+c),l.push("1px -1px 1px "+c),l.push("-1px -1px 1px "+
c));if("none"!==k)for(c=0;c<k.length;c++)l.push(k[c].x_off.toUsedLength(b.w,b.h)+"px "+k[c].y_off.toUsedLength(b.w,b.h)+"px "+k[c].b_radius.toUsedLength(b.w,b.h)+"px rgba("+k[c].color[0].toString()+","+k[c].color[1].toString()+","+k[c].color[2].toString()+","+(k[c].color[3]/255).toString()+")");d.style.textShadow=l.join(",")}}),new r("http://www.w3.org/ns/ttml#styling textCombine",function(a,d,c,k){d.style.textCombineUpright=k}),new r("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,d,
c,k){}),new r("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,d,c,k){d.style.unicodeBidi="bidiOverride"===k?"bidi-override":k}),new r("http://www.w3.org/ns/ttml#styling visibility",function(a,d,c,k){d.style.visibility=k}),new r("http://www.w3.org/ns/ttml#styling wrapOption",function(a,d,c,k){d.style.whiteSpace="wrap"===k?"preserve"===c.space?"pre-wrap":"normal":"preserve"===c.space?"pre":"noWrap"}),new r("http://www.w3.org/ns/ttml#styling writingMode",function(a,d,c,k){if("lrtb"===k||"lr"===
k)d.style.writingMode="horizontal-tb";else if("rltb"===k||"rl"===k)d.style.writingMode="horizontal-tb";else if("tblr"===k)d.style.writingMode="vertical-lr";else if("tbrl"===k||"tb"===k)d.style.writingMode="vertical-rl"}),new r("http://www.w3.org/ns/ttml#styling zIndex",function(a,d,c,k){d.style.zIndex=k}),new r("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(a,d,c,k){a.displayForcedOnlyMode&&!1===k&&(d.style.visibility="hidden")})];for(c=0;c<x.length;c++);var F="webkitRubyPosition"in
window.getComputedStyle(document.documentElement),D=F?"webkitRubyPosition":"rubyPosition",z="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",H="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof m?this.imscHTML={}:m,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,
"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":31,"./styles":32,"./utils":33}],29:[function(c,v,m){(function(c,g,a,m){function l(c,g,u,v,x,y,b,C,n){if(g<b.begin||g>=b.end)return null;y="regionID"in b&&""!==b.regionID?b.regionID:y;if(null!==x&&y!==u.id&&(!("contents"in b)||"contents"in b&&0===b.contents.length||""!==y))return null;var k=new h(b);if("sets"in b)for(var r=0;r<b.sets.length;r++)g<b.sets[r].begin||g>=b.sets[r].end||(k.styleAttrs[b.sets[r].qname]=b.sets[r].value);r={};
for(var z in k.styleAttrs)if(k.styleAttrs.hasOwnProperty(z)&&(r[z]=!0,"region"===k.kind&&z===a.byName.writingMode.qname&&!(a.byName.direction.qname in k.styleAttrs))){var B=k.styleAttrs[z];if("lrtb"===B||"lr"===B)k.styleAttrs[a.byName.direction.qname]="ltr";else if("rltb"===B||"rl"===B)k.styleAttrs[a.byName.direction.qname]="rtl"}if(null!==x)for(z=0;z<a.all.length;z++)if(B=a.all[z],B.qname===a.byName.textDecoration.qname){var D=x.styleAttrs[B.qname],G=k.styleAttrs[B.qname],E=[];void 0===G?E=D:-1===
G.indexOf("none")?((-1===G.indexOf("noUnderline")&&-1!==D.indexOf("underline")||-1!==G.indexOf("underline"))&&E.push("underline"),(-1===G.indexOf("noLineThrough")&&-1!==D.indexOf("lineThrough")||-1!==G.indexOf("lineThrough"))&&E.push("lineThrough"),(-1===G.indexOf("noOverline")&&-1!==D.indexOf("overline")||-1!==G.indexOf("overline"))&&E.push("overline")):E.push("none");k.styleAttrs[B.qname]=E}else B.qname!==a.byName.fontSize.qname||B.qname in k.styleAttrs||"span"!==k.kind||"textContainer"!==k.styleAttrs[a.byName.ruby.qname]?
B.qname!==a.byName.fontSize.qname||B.qname in k.styleAttrs||"span"!==k.kind||"text"!==k.styleAttrs[a.byName.ruby.qname]?B.inherit&&B.qname in x.styleAttrs&&!(B.qname in k.styleAttrs)&&(k.styleAttrs[B.qname]=x.styleAttrs[B.qname]):(D=x.styleAttrs[a.byName.fontSize.qname],k.styleAttrs[B.qname]="textContainer"===x.styleAttrs[a.byName.ruby.qname]?D:new m.ComputedLength(.5*D.rw,.5*D.rh)):(D=x.styleAttrs[a.byName.fontSize.qname],k.styleAttrs[B.qname]=new m.ComputedLength(.5*D.rw,.5*D.rh));for(z=0;z<a.all.length;z++)if(B=
a.all[z],!(B.qname in k.styleAttrs||B.qname===a.byName.position.qname&&a.byName.origin.qname in k.styleAttrs||B.qname===a.byName.origin.qname&&a.byName.position.qname in k.styleAttrs)&&(D=c.head.styling.initials[B.qname]||B.initial,null!==D&&("region"===k.kind||!1===B.inherit&&null!==D)))if(D=B.parse(D),null!==D)k.styleAttrs[B.qname]=D,r[B.qname]=!0;else if(B="Invalid initial value for '"+B.qname+"' on element '"+k.kind,C&&C.error&&C.error(B))throw B;for(z=0;z<a.all.length;z++)if(B=a.all[z],B.qname in
r&&null!==B.compute)if(D=B.compute(c,x,k,k.styleAttrs[B.qname],n),null!==D)k.styleAttrs[B.qname]=D;else if(k.styleAttrs[B.qname]=B.compute(c,x,k,B.parse(B.initial),n),B="Style '"+B.qname+"' on element '"+k.kind+"' cannot be computed",C&&C.error&&C.error(B))throw B;if("none"===k.styleAttrs[a.byName.display.qname])return null;r=null;null===x?r=null===v?[]:[v]:"contents"in b&&(r=b.contents);for(x=0;null!==r&&x<r.length;x++)b=l(c,g,u,v,k,y,r[x],C,n),null!==b&&k.contents.push(b.element);for(var F in k.styleAttrs)k.styleAttrs.hasOwnProperty(F)&&
(c=!1,"span"===k.kind&&(g=k.styleAttrs[a.byName.ruby.qname],(c=("container"===g||"textContainer"===g||"baseContainer"===g)&&-1!==w.indexOf(F))||(c="container"!==g&&F===a.byName.rubyAlign.qname),c||(c=!("textContainer"===g||"text"===g)&&F===a.byName.rubyPosition.qname)),c||(g=a.byQName[F],"applies"in g&&(c=-1===g.applies.indexOf(k.kind))),c&&delete k.styleAttrs[F]);F=k.styleAttrs[a.byName.ruby.qname];if("p"===k.kind||"span"===k.kind&&("textContainer"===F||"text"===F))F=[],d(k,F),p(F),t(k);return"div"===
k.kind&&a.byName.backgroundImage.qname in k.styleAttrs||"br"===k.kind||"image"===k.kind||"contents"in k&&0<k.contents.length||"span"===k.kind&&null!==k.text||"region"===k.kind&&"always"===k.styleAttrs[a.byName.showBackground.qname]?{region_id:y,element:k}:null}function p(a){function d(a){return"br"===a.kind||/[\r\n\t ]$/.test(a.text)}function c(a){return"br"===a.kind||"preserve"===a.space&&/^[\r\n]/.test(a.text)}for(var h,g=0;g<a.length;)if(h=a[g],"br"===h.kind||"preserve"===h.space)g++;else{var l=
h.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(l)&&(0===g||d(a[g-1]))&&(l=l.substring(1));h.text=l;0===l.length?a.splice(g,1):g++}for(g=0;g<a.length;g++)h=a[g],"br"===h.kind||"preserve"===h.space?g++:/[ ]$/.test(h.text)&&(g===a.length-1||c(a[g+1]))&&(h.text=h.text.slice(0,-1))}function d(c,h){if("contents"in c)for(var g=0;g<c.contents.length;g++){var l=c.contents[g],t=l.styleAttrs[a.byName.ruby.qname];if("span"!==l.kind||"textContainer"!==t&&"text"!==t)"contents"in l?d(l,h):("span"===l.kind&&0!==l.text.length||
"br"===l.kind)&&h.push(l)}}function t(a){if("br"===a.kind)return!1;if("text"in a)return 0===a.text.length;if("contents"in a){for(var d=a.contents.length;d--;)t(a.contents[d])&&a.contents.splice(d,1);return 0===a.contents.length}}function u(a){this.contents=[];this.aspectRatio=a.aspectRatio;this.lang=a.lang}function h(a){this.kind=a.kind||"region";this.lang=a.lang;a.id&&(this.id=a.id);this.styleAttrs={};for(var d in a.styleAttrs)a.styleAttrs.hasOwnProperty(d)&&(this.styleAttrs[d]=a.styleAttrs[d]);
"src"in a&&(this.src=a.src);"type"in a&&(this.type=a.type);if("text"in a)this.text=a.text;else if("region"===this.kind||"contents"in a)this.contents=[];"space"in a&&(this.space=a.space)}c.generateISD=function(d,c,h){function g(a,b){function d(b){return!(a<b.begin||a>=b.end)}if(b.contents){var c={},h;for(h in b)b.hasOwnProperty(h)&&(c[h]=b[h]);c.contents=[];b.contents.filter(d).forEach(function(b){b=g(a,b);b.regionID&&(p[b.regionID]=!0);null!==b&&c.contents.push(b)});return c}return b}var t=new u(d),
m={},b={},p={};b=d.head.styling.initials[a.byName.showBackground.qname];var n=d.head.styling.initials[a.byName.backgroundColor.qname];for(v in d.head.layout.regions)if(d.head.layout.regions.hasOwnProperty(v)){var k=d.head.layout.regions[v],r=k.styleAttrs[a.byName.showBackground.qname]||b,w=k.styleAttrs[a.byName.backgroundColor.qname]||n;p[k.id]=("always"===r||void 0===r)&&void 0!==w&&!(c<k.begin||c>=k.end)}d.body&&d.body.regionID&&(p[d.body.regionID]=!0);b=null!==d.body?g(c,d.body):null;void 0!==
p[""]&&(p[""]=!0);for(var x in p)if(p[x]){var v=l(d,c,d.head.layout.regions[x],b,null,"",d.head.layout.regions[x],h,m);null!==v&&t.contents.push(v.element)}return t};var w=[a.byName.color.qname,a.byName.textCombine.qname,a.byName.textDecoration.qname,a.byName.textEmphasis.qname,a.byName.textOutline.qname,a.byName.textShadow.qname]})("undefined"===typeof m?this.imscISD={}:m,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===
typeof imscUtils?c("./utils"):imscUtils)},{"./names":31,"./styles":32,"./utils":33}],30:[function(c,v,m){m.generateISD=c("./isd").generateISD;m.fromXML=c("./doc").fromXML;m.renderHTML=c("./html").render},{"./doc":27,"./html":28,"./isd":29}],31:[function(c,v,m){c="undefined"===typeof m?this.imscNames={}:m;c.ns_tt="http://www.w3.org/ns/ttml";c.ns_tts="http://www.w3.org/ns/ttml#styling";c.ns_ttp="http://www.w3.org/ns/ttml#parameter";c.ns_xml="http://www.w3.org/XML/1998/namespace";c.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";
c.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";c.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";c.ns_ebutts="urn:ebu:tt:style";c.ttaf_map={"http://www.w3.org/2006/10/ttaf1":c.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":c.ns_tts,"http://www.w3.org/2006/10/ttaf1#parameter":c.ns_ttp}},{}],32:[function(c,v,m){(function(c,g,a){function m(a,c,g,h,l,m,p,v){this.name=c;this.ns=a;this.qname=a+" "+c;this.inherit=l;this.animatable=m;this.initial=g;this.applies=h;this.parse=
p;this.compute=v}c.all=[new m(g.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,a.parseColor,null),new m(g.ns_tts,"color","white",["span"],!0,!0,a.parseColor,null),new m(g.ns_tts,"direction","ltr",["p","span"],!0,!0,function(a){return a},null),new m(g.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(a){return a},null),new m(g.ns_tts,"displayAlign","before",["region"],!1,!0,function(a){return a},null),new m(g.ns_tts,"extent","auto",["tt","region"],
!1,!0,function(d){if("auto"===d)return d;var c=d.split(" ");if(2!==c.length)return null;d=a.parseLength(c[0]);return(c=a.parseLength(c[1]))&&d?{h:c,w:d}:null},function(d,c,g,h,l){if("auto"===h)c=new a.ComputedLength(0,1);else if(c=a.toComputedLength(h.h.value,h.h.unit,null,d.dimensions.h,null,d.pxLength.h),null===c)return null;if("auto"===h)d=new a.ComputedLength(1,0);else if(d=a.toComputedLength(h.w.value,h.w.unit,null,d.dimensions.w,null,d.pxLength.w),null===d)return null;return{h:c,w:d}}),new m(g.ns_tts,
"fontFamily","default",["span","p"],!0,!0,function(a){a=a.split(",");for(var d=[],c=0;c<a.length;c++)"'"!==a[c].charAt(0)&&'"'!==a[c].charAt(0)?"default"===a[c]?d.push("monospaceSerif"):d.push(a[c]):d.push(a[c]);return d},null),new m(g.ns_tts,"shear","0%",["p"],!0,!0,a.parseLength,function(a,c,g,h){if("%"===h.unit)a=100<Math.abs(h.value)?100*Math.sign(h.value):h.value;else return null;return a}),new m(g.ns_tts,"fontSize","1c",["span","p"],!0,!0,a.parseLength,function(d,g,l,h,m){return a.toComputedLength(h.value,
h.unit,null!==g?g.styleAttrs[c.byName.fontSize.qname]:d.cellLength.h,null!==g?g.styleAttrs[c.byName.fontSize.qname]:d.cellLength.h,d.cellLength.h,d.pxLength.h)}),new m(g.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(a){return a},null),new m(g.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(a){return a},null),new m(g.ns_tts,"lineHeight","normal",["p"],!0,!0,function(d){return"normal"===d?d:a.parseLength(d)},function(d,g,l,h,m){if("normal"===h)d=h;else if(d=a.toComputedLength(h.value,
h.unit,l.styleAttrs[c.byName.fontSize.qname],l.styleAttrs[c.byName.fontSize.qname],d.cellLength.h,d.pxLength.h),null===d)return null;return d}),new m(g.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new m(g.ns_tts,"origin","auto",["region"],!1,!0,function(d){if("auto"===d)return d;var c=d.split(" ");if(2!==c.length)return null;d=a.parseLength(c[0]);return(c=a.parseLength(c[1]))&&d?{h:c,w:d}:null},function(d,c,g,h,l){if("auto"===h)c=new a.ComputedLength(0,0);else if(c=a.toComputedLength(h.h.value,
h.h.unit,null,d.dimensions.h,null,d.pxLength.h),null===c)return null;if("auto"===h)d=new a.ComputedLength(0,0);else if(d=a.toComputedLength(h.w.value,h.w.unit,null,d.dimensions.w,null,d.pxLength.w),null===d)return null;return{h:c,w:d}}),new m(g.ns_tts,"overflow","hidden",["region"],!1,!0,function(a){return a},null),new m(g.ns_tts,"padding","0px",["region"],!1,!0,function(d){d=d.split(" ");if(4<d.length)return null;for(var c=[],g=0;g<d.length;g++){var h=a.parseLength(d[g]);if(!h)return null;c.push(h)}return c},
function(d,g,l,h,m){if(1===h.length)g=[h[0],h[0],h[0],h[0]];else if(2===h.length)g=[h[0],h[1],h[0],h[1]];else if(3===h.length)g=[h[0],h[1],h[2],h[1]];else if(4===h.length)g=[h[0],h[1],h[2],h[3]];else return null;h=l.styleAttrs[c.byName.writingMode.qname];if("lrtb"===h||"lr"===h)g=[g[0],g[3],g[2],g[1]];else if("rltb"===h||"rl"===h)g=[g[0],g[1],g[2],g[3]];else if("tblr"===h)g=[g[3],g[0],g[1],g[2]];else if("tbrl"===h||"tb"===h)g=[g[3],g[2],g[1],g[0]];else return null;h=[];for(m=0;m<g.length;m++)if(0===
g[m].value)h[m]=new a.ComputedLength(0,0);else if(h[m]=a.toComputedLength(g[m].value,g[m].unit,l.styleAttrs[c.byName.fontSize.qname],0===m||2===m?l.styleAttrs[c.byName.extent.qname].h:l.styleAttrs[c.byName.extent.qname].w,0===m||2===m?d.cellLength.h:d.cellLength.w,0===m||2===m?d.pxLength.h:d.pxLength.w),null===h[m])return null;return h}),new m(g.ns_tts,"position","top left",["region"],!1,!0,function(d){return a.parsePosition(d)},function(d,g,l,h){g=a.toComputedLength(h.v.offset.value,h.v.offset.unit,
null,new a.ComputedLength(-l.styleAttrs[c.byName.extent.qname].h.rw,d.dimensions.h.rh-l.styleAttrs[c.byName.extent.qname].h.rh),null,d.pxLength.h);if(null===g)return null;"bottom"===h.v.edge&&(g=new a.ComputedLength(-g.rw-l.styleAttrs[c.byName.extent.qname].h.rw,d.dimensions.h.rh-g.rh-l.styleAttrs[c.byName.extent.qname].h.rh));var m=a.toComputedLength(h.h.offset.value,h.h.offset.unit,null,new a.ComputedLength(d.dimensions.w.rw-l.styleAttrs[c.byName.extent.qname].w.rw,-l.styleAttrs[c.byName.extent.qname].w.rh),
null,d.pxLength.w);if(null===g)return null;"right"===h.h.edge&&(m=new a.ComputedLength(d.dimensions.w.rw-m.rw-l.styleAttrs[c.byName.extent.qname].w.rw,-m.rh-l.styleAttrs[c.byName.extent.qname].w.rh));return{h:g,w:m}}),new m(g.ns_tts,"ruby","none",["span"],!1,!0,function(a){return a},null),new m(g.ns_tts,"rubyAlign","center",["span"],!0,!0,function(a){return"center"!==a&&"spaceAround"!==a?null:a},null),new m(g.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(a){return a},null),new m(g.ns_tts,
"rubyReserve","none",["p"],!0,!0,function(d){var c=d.split(" ");d=[null,null];if(0===c.length||2<c.length||"none"!==c[0]&&"both"!==c[0]&&"after"!==c[0]&&"before"!==c[0]&&"outside"!==c[0])return null;d[0]=c[0];if(2===c.length&&"none"!==c[0])if(c=a.parseLength(c[1]))d[1]=c;else return null;return d},function(d,g,l,h,m){if("none"===h[0])return h;d=null===h[1]?new a.ComputedLength(.5*l.styleAttrs[c.byName.fontSize.qname].rw,.5*l.styleAttrs[c.byName.fontSize.qname].rh):a.toComputedLength(h[1].value,h[1].unit,
l.styleAttrs[c.byName.fontSize.qname],l.styleAttrs[c.byName.fontSize.qname],d.cellLength.h,d.pxLength.h);return null===d?null:[h[0],d]}),new m(g.ns_tts,"showBackground","whenActive",["region"],!1,!0,function(a){return a},null),new m(g.ns_tts,"textAlign","start",["p"],!0,!0,function(a){return a},function(a,c,g,h,l){return"left"===h?"start":"right"===h?"end":h}),new m(g.ns_tts,"textCombine","none",["span"],!0,!0,function(a){return"none"===a||"all"===a?a:null},null),new m(g.ns_tts,"textDecoration","none",
["span"],!0,!0,function(a){return a.split(" ")},null),new m(g.ns_tts,"textEmphasis","none",["span"],!0,!0,function(d){d=d.split(" ");for(var c={style:null,symbol:null,color:null,position:null},g=0;g<d.length;g++)if("none"===d[g]||"auto"===d[g])c.style=d[g];else if("filled"===d[g]||"open"===d[g])c.style=d[g];else if("circle"===d[g]||"dot"===d[g]||"sesame"===d[g])c.symbol=d[g];else if("current"===d[g])c.color=d[g];else if("outside"===d[g]||"before"===d[g]||"after"===d[g])c.position=d[g];else if(c.color=
a.parseColor(d[g]),null===c.color)return null;null==c.style&&null==c.symbol?c.style="auto":(c.symbol=c.symbol||"circle",c.style=c.style||"filled");c.position=c.position||"outside";c.color=c.color||"current";return c},null),new m(g.ns_tts,"textOutline","none",["span"],!0,!0,function(d){if("none"===d)return d;var c={};d=d.split(" ");if(0===d.length||2<d.length)return null;var g=a.parseColor(d[0]);c.color=g;null!==g&&d.shift();if(1!==d.length)return null;d=a.parseLength(d[0]);if(!d)return null;c.thickness=
d;return c},function(d,g,l,h,m){if("none"===h)return h;g={};g.color=null===h.color?l.styleAttrs[c.byName.color.qname]:h.color;g.thickness=a.toComputedLength(h.thickness.value,h.thickness.unit,l.styleAttrs[c.byName.fontSize.qname],l.styleAttrs[c.byName.fontSize.qname],d.cellLength.h,d.pxLength.h);return null===g.thickness?null:g}),new m(g.ns_tts,"textShadow","none",["span"],!0,!0,a.parseTextShadow,function(d,g,l,h){if("none"===h)return h;g=[];for(var m=0;m<h.length;m++){var p={};p.x_off=a.toComputedLength(h[m][0].value,
h[m][0].unit,null,l.styleAttrs[c.byName.fontSize.qname],null,d.pxLength.w);if(null===p.x_off)return null;p.y_off=a.toComputedLength(h[m][1].value,h[m][1].unit,null,l.styleAttrs[c.byName.fontSize.qname],null,d.pxLength.h);if(null===p.y_off)return null;if(null===h[m][2])p.b_radius=0;else if(p.b_radius=a.toComputedLength(h[m][2].value,h[m][2].unit,null,l.styleAttrs[c.byName.fontSize.qname],null,d.pxLength.h),null===p.b_radius)return null;p.color=null===h[m][3]?l.styleAttrs[c.byName.color.qname]:h[m][3];
g.push(p)}return g}),new m(g.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(a){return a},null),new m(g.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(a){return a},null),new m(g.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(a){return a},null),new m(g.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(a){return a},null),new m(g.ns_tts,"zIndex","auto",["region"],!1,!0,function(a){"auto"!==a&&(a=parseInt(a),isNaN(a)&&(a=null));return a},null),new m(g.ns_ebutts,
"linePadding","0c",["p"],!0,!1,a.parseLength,function(d,c,g,h,l){return a.toComputedLength(h.value,h.unit,null,null,d.cellLength.w,null)}),new m(g.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(a){return a},null),new m(g.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(a){return a},null),new m(g.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(a){return"true"===a?!0:!1},null),new m(g.ns_itts,"fillLineGap","true",["p"],!0,!0,function(a){return"true"===
a?!0:!1},null)];c.byQName={};for(var l in c.all)c.all.hasOwnProperty(l)&&(c.byQName[c.all[l].qname]=c.all[l]);c.byName={};for(var p in c.all)c.all.hasOwnProperty(p)&&(c.byName[c.all[p].name]=c.all[p])})("undefined"===typeof m?this.imscStyles={}:m,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":31,"./utils":33}],33:[function(c,v,m){(function(c){var g=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,a=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,
m=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,l={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};c.parseColor=function(c){var d,p=
null,h=l[c.toLowerCase()];void 0!==h?p=h:null!==(d=g.exec(c))?p=[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16),void 0!==d[4]?parseInt(d[4],16):255]:null!==(d=a.exec(c))?p=[parseInt(d[1]),parseInt(d[2]),parseInt(d[3]),255]:null!==(d=m.exec(c))&&(p=[parseInt(d[1]),parseInt(d[2]),parseInt(d[3]),parseInt(d[4])]);return p};var p=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;c.parseLength=function(a){var c,d=null;null!==(c=p.exec(a))&&(d={value:parseFloat(c[1]),unit:c[2]});return d};c.parseTextShadow=
function(a){a=a.match(/([^\(,\)]|\([^\)]+\))+/g);for(var d=[],g=0;g<a.length;g++){var h=a[g].split(" ");if(1===h.length&&"none"===h[0])return"none";if(1<h.length&&5>h.length){var l=[null,null,null,null],m=c.parseLength(h.shift());if(null===m)return null;l[0]=m;m=c.parseLength(h.shift());if(null===m)return null;l[1]=m;if(0!==h.length&&(m=c.parseLength(h[0]),null!==m&&(l[2]=m,h.shift()),0!==h.length)){h=c.parseColor(h[0]);if(null===h)return null;l[3]=h}d.push(l)}}return d};c.parsePosition=function(a){a=
a.split(" ");var d=function(a){return"center"===a||"left"===a||"top"===a||"bottom"===a||"right"===a};if(4<a.length)return null;for(var g=0;g<a.length;g++)if(!d(a[g])){var h=c.parseLength(a[g]);if(null===h)return null;a[g]=h}g={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(h=0;h<a.length;){var l=a[h++];if(d(l)){var m={value:0,unit:"%"};2!==a.length&&h<a.length&&!d(a[h])&&(m=a[h++]);"right"===l?(g.h.edge=l,g.h.offset=m):"bottom"===l?(g.v.edge=l,g.v.offset=
m):"left"===l?g.h.offset=m:"top"===l&&(g.v.offset=m)}else if(1===a.length||2===a.length)1===h?g.h.offset=l:g.v.offset=l;else return null}return g};c.ComputedLength=function(a,c){this.rw=a;this.rh=c};c.ComputedLength.prototype.toUsedLength=function(a,c){return a*this.rw+c*this.rh};c.ComputedLength.prototype.multiply=function(a,c){return c?a*c:a};c.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};c.toComputedLength=function(a,g,l,h,m,p){return"%"===g&&h?new c.ComputedLength(h.rw*
a/100,h.rh*a/100):"em"===g&&l?new c.ComputedLength(l.rw*a,l.rh*a):"c"===g&&m?new c.ComputedLength(a*m.rw,a*m.rh):"px"===g&&p?new c.ComputedLength(a*p.rw,a*p.rh):"rh"===g?new c.ComputedLength(0,a/100):"rw"===g?new c.ComputedLength(a/100,0):null}})("undefined"===typeof m?this.imscUtils={}:m)},{}]},{},[30])(30)});
