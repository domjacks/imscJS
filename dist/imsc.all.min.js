/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource>  http://mths.be/fromcodepoint v0.1.0 by @mathias */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,u,r){c!=Array.prototype&&c!=Object.prototype&&(c[u]=r.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,u,r,p){if(u){r=$jscomp.global;c=c.split(".");for(p=0;p<c.length-1;p++){var g=c[p];g in r||(r[g]={});r=r[g]}c=c[c.length-1];p=r[c];u=u(p);u!=p&&null!=u&&$jscomp.defineProperty(r,c,{configurable:!0,writable:!0,value:u})}};$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(c,r,p){var g=this.length||0;0>r&&(r=Math.max(0,g+r));if(null==p||p>g)p=g;p=Number(p);0>p&&(p=Math.max(0,g+p));for(r=Number(r||0);r<p;r++)this[r]=c;return this}},"es6","es3");
$jscomp.polyfill("Number.isNaN",function(c){return c?c:function(c){return"number"===typeof c&&isNaN(c)}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(u){return $jscomp.SYMBOL_PREFIX+(u||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(c){var u=0;return $jscomp.iteratorPrototype(function(){return u<c.length?{done:!1,value:c[u++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,u){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var r=0,p={next:function(){if(r<c.length){var g=r++;return{value:u(g,c[g]),done:!1}}p.next=function(){return{done:!0,value:void 0}};return p.next()}};p[Symbol.iterator]=function(){return p};return p};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();var u=c[Symbol.iterator];return u?u.call(c):$jscomp.arrayIterator(c)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(c){function u(){this.batch_=null}function r(a){return a instanceof g?a:new g(function(e,g){e(a)})}if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;u.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};u.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var p=$jscomp.global.setTimeout;u.prototype.asyncExecuteFunction=function(a){p(a,
0)};u.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var e=0;e<a.length;++e){var g=a[e];a[e]=null;try{g()}catch(b){this.asyncThrow_(b)}}}this.batch_=null};u.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var g=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var e=this.createResolveAndReject_();try{a(e.resolve,e.reject)}catch(z){e.reject(z)}};g.prototype.createResolveAndReject_=
function(){function a(b){return function(a){g||(g=!0,b.call(e,a))}}var e=this,g=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};g.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof g)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var e=null!=a;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};g.prototype.resolveToNonPromiseObj_=function(a){var e=
void 0;try{e=a.then}catch(z){this.reject_(z);return}"function"==typeof e?this.settleSameAsThenable_(e,a):this.fulfill_(a)};g.prototype.reject_=function(a){this.settle_(2,a)};g.prototype.fulfill_=function(a){this.settle_(1,a)};g.prototype.settle_=function(a,e){if(0!=this.state_)throw Error("Cannot settle("+a+", "+e+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=e;this.executeOnSettledCallbacks_()};g.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var g=
0;g<this.onSettledCallbacks_.length;++g)a.asyncExecute(this.onSettledCallbacks_[g]);this.onSettledCallbacks_=null}};var a=new u;g.prototype.settleSameAsPromise_=function(a){var e=this.createResolveAndReject_();a.callWhenSettled_(e.resolve,e.reject)};g.prototype.settleSameAsThenable_=function(a,e){var g=this.createResolveAndReject_();try{a.call(e,g.resolve,g.reject)}catch(b){g.reject(b)}};g.prototype.then=function(a,e){function c(a,q){return"function"==typeof a?function(k){try{b(a(k))}catch(v){n(v)}}:
q}var b,n,q=new g(function(a,q){b=a;n=q});this.callWhenSettled_(c(a,b),c(e,n));return q};g.prototype.catch=function(a){return this.then(void 0,a)};g.prototype.callWhenSettled_=function(g,e){function c(){switch(b.state_){case 1:g(b.result_);break;case 2:e(b.result_);break;default:throw Error("Unexpected state: "+b.state_);}}var b=this;null==this.onSettledCallbacks_?a.asyncExecute(c):this.onSettledCallbacks_.push(c)};g.resolve=r;g.reject=function(a){return new g(function(e,g){g(a)})};g.race=function(a){return new g(function(e,
g){for(var b=$jscomp.makeIterator(a),n=b.next();!n.done;n=b.next())r(n.value).callWhenSettled_(e,g)})};g.all=function(a){var e=$jscomp.makeIterator(a),c=e.next();return c.done?r([]):new g(function(b,a){function q(a){return function(q){k[a]=q;n--;0==n&&b(k)}}var k=[],n=0;do k.push(void 0),n++,r(c.value).callWhenSettled_(q(k.length-1),a),c=e.next();while(!c.done)})};return g},"es6","es3");$jscomp.underscoreProtoCanBeSet=function(){var c={a:!0},u={};try{return u.__proto__=c,u.a}catch(r){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(c,u){c.__proto__=u;if(c.__proto__!==u)throw new TypeError(c+" is not extensible");return c}:null;$jscomp.polyfill("Object.setPrototypeOf",function(c){return c||$jscomp.setPrototypeOf},"es6","es5");
$jscomp.polyfill("String.fromCodePoint",function(c){return c?c:function(c){for(var r="",p=0;p<arguments.length;p++){var g=Number(arguments[p]);if(0>g||1114111<g||g!==Math.floor(g))throw new RangeError("invalid_code_point "+g);65535>=g?r+=String.fromCharCode(g):(g-=65536,r+=String.fromCharCode(g>>>10&1023|55296),r+=String.fromCharCode(g&1023|56320))}return r}},"es6","es3");$jscomp.owns=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(c,u){for(var r=1;r<arguments.length;r++){var p=arguments[r];if(p)for(var g in p)$jscomp.owns(p,g)&&(c[g]=p[g])}return c};$jscomp.polyfill("Object.assign",function(c){return c||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.entries",function(c){return c?c:function(c){var r=[],p;for(p in c)$jscomp.owns(c,p)&&r.push([p,c[p]]);return r}},"es8","es3");
$jscomp.polyfill("Object.is",function(c){return c?c:function(c,r){return c===r?0!==c||1/c===1/r:c!==c&&r!==r}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(c){return c?c:function(c,r){var p=this;p instanceof String&&(p=String(p));var g=p.length;r=r||0;for(0>r&&(r=Math.max(r+g,0));r<g;r++){var a=p[r];if(a===c||Object.is(a,c))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(c,u,r){if(null==c)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(u instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return c+""};$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(c,r){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,r||0)}},"es6","es3");
$jscomp.polyfill("Math.sign",function(c){return c?c:function(c){c=Number(c);return 0===c||isNaN(c)?c:0<c?1:-1}},"es6","es3");
(function(c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=c()})(function(){return function(){function c(u,r,p){function g(e,z){if(!r[e]){if(!u[e]){var b="function"==typeof require&&require;if(!z&&b)return b(e,!0);if(a)return a(e,!0);z=Error("Cannot find module '"+e+"'");throw z.code="MODULE_NOT_FOUND",z;}z=
r[e]={exports:{}};u[e][0].call(z.exports,function(a){return g(u[e][1][a]||a)},z,z.exports,c,u,r,p)}return r[e].exports}for(var a="function"==typeof require&&require,m=0;m<p.length;m++)g(p[m]);return g}return c}()({1:[function(c,u,r){function p(a){var b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");-1===a&&(a=b);return[a,a===b?0:4-a%4]}function g(e,b,n){for(var q=[],k=b;k<n;k+=3)b=(e[k]<<16&16711680)+(e[k+1]<<8&65280)+(e[k+2]&255),q.push(a[b>>18&63]+
a[b>>12&63]+a[b>>6&63]+a[b&63]);return q.join("")}r.byteLength=function(a){a=p(a);var b=a[1];return 3*(a[0]+b)/4-b};r.toByteArray=function(a){var b=p(a);var n=b[0];b=b[1];var q=new e(3*(n+b)/4-b),k=0,c=0<b?n-4:n,g;for(g=0;g<c;g+=4)n=m[a.charCodeAt(g)]<<18|m[a.charCodeAt(g+1)]<<12|m[a.charCodeAt(g+2)]<<6|m[a.charCodeAt(g+3)],q[k++]=n>>16&255,q[k++]=n>>8&255,q[k++]=n&255;2===b&&(n=m[a.charCodeAt(g)]<<2|m[a.charCodeAt(g+1)]>>4,q[k++]=n&255);1===b&&(n=m[a.charCodeAt(g)]<<10|m[a.charCodeAt(g+1)]<<4|m[a.charCodeAt(g+
2)]>>2,q[k++]=n>>8&255,q[k++]=n&255);return q};r.fromByteArray=function(e){for(var b=e.length,n=b%3,q=[],k=0,c=b-n;k<c;k+=16383)q.push(g(e,k,k+16383>c?c:k+16383));1===n?(e=e[b-1],q.push(a[e>>2]+a[e<<4&63]+"==")):2===n&&(e=(e[b-2]<<8)+e[b-1],q.push(a[e>>10]+a[e>>4&63]+a[e<<2&63]+"="));return q.join("")};var a=[],m=[],e="undefined"!==typeof Uint8Array?Uint8Array:Array;for(c=0;64>c;++c)a[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c],m["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(c)]=
c;m[45]=62;m[95]=63},{}],2:[function(c,u,r){},{}],3:[function(c,u,r){(function(p){(function(){function g(f){if(f>L)throw new RangeError('The value "'+f+'" is invalid for option "size"');f=new Uint8Array(f);f.__proto__=a.prototype;return f}function a(f,d,a){if("number"===typeof f){if("string"===typeof d)throw new TypeError('The "string" argument must be of type string. Received type number');return z(f)}return p(f,d,a)}function p(f,d,h){if("string"===typeof f){var t=d;if("string"!==typeof t||""===
t)t="utf8";if(!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);d=k(f,t)|0;h=g(d);f=h.write(f,t);f!==d&&(h=h.slice(0,f));return h}if(ArrayBuffer.isView(f))return b(f);if(null==f)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(K(f,ArrayBuffer)||f&&K(f.buffer,ArrayBuffer)){if(0>d||f.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<d+(h||0))throw new RangeError('"length" is outside of buffer bounds');
f=void 0===d&&void 0===h?new Uint8Array(f):void 0===h?new Uint8Array(f,d):new Uint8Array(f,d,h);f.__proto__=a.prototype;return f}if("number"===typeof f)throw new TypeError('The "value" argument must not be of type number. Received type number');t=f.valueOf&&f.valueOf();if(null!=t&&t!==f)return a.from(t,d,h);if(t=n(f))return t;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof f[Symbol.toPrimitive])return a.from(f[Symbol.toPrimitive]("string"),d,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof f);}function e(f){if("number"!==typeof f)throw new TypeError('"size" argument must be of type number');if(0>f)throw new RangeError('The value "'+f+'" is invalid for option "size"');}function z(f){e(f);return g(0>f?0:q(f)|0)}function b(f){for(var d=0>f.length?0:q(f.length)|0,a=g(d),t=0;t<d;t+=1)a[t]=f[t]&255;return a}function n(f){if(a.isBuffer(f)){var d=q(f.length)|0,h=g(d);if(0===h.length)return h;f.copy(h,0,0,d);return h}if(void 0!==f.length)return(d="number"!==typeof f.length)||(d=f.length,
d=d!==d),d?g(0):b(f);if("Buffer"===f.type&&Array.isArray(f.data))return b(f.data)}function q(f){if(f>=L)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L.toString(16)+" bytes");return f|0}function k(f,d){if(a.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||K(f,ArrayBuffer))return f.byteLength;if("string"!==typeof f)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);var b=f.length,t=2<arguments.length&&
!0===arguments[2];if(!t&&0===b)return 0;for(var h=!1;;)switch(d){case "ascii":case "latin1":case "binary":return b;case "utf8":case "utf-8":return y(f).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*b;case "hex":return b>>>1;case "base64":return I.toByteArray(l(f)).length;default:if(h)return t?-1:y(f).length;d=(""+d).toLowerCase();h=!0}}function x(f,d,a){var t=!1;if(void 0===d||0>d)d=0;if(d>this.length)return"";if(void 0===a||a>this.length)a=this.length;if(0>=a)return"";a>>>=
0;d>>>=0;if(a<=d)return"";for(f||(f="utf8");;)switch(f){case "hex":f=d;d=a;a=this.length;if(!f||0>f)f=0;if(!d||0>d||d>a)d=a;t="";for(a=f;a<d;++a)f=t,t=this[a],t=16>t?"0"+t.toString(16):t.toString(16),t=f+t;return t;case "utf8":case "utf-8":return G(this,d,a);case "ascii":f="";for(a=Math.min(this.length,a);d<a;++d)f+=String.fromCharCode(this[d]&127);return f;case "latin1":case "binary":f="";for(a=Math.min(this.length,a);d<a;++d)f+=String.fromCharCode(this[d]);return f;case "base64":return d=0===d&&
a===this.length?I.fromByteArray(this):I.fromByteArray(this.slice(d,a)),d;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=this.slice(d,a);a="";for(f=0;f<d.length;f+=2)a+=String.fromCharCode(d[f]+256*d[f+1]);return a;default:if(t)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase();t=!0}}function w(f,d,a){var t=f[d];f[d]=f[a];f[a]=t}function v(f,d,b,t,h){if(0===f.length)return-1;"string"===typeof b?(t=b,b=0):2147483647<b?b=2147483647:-2147483648>b&&(b=-2147483648);b=+b;b!==b&&
(b=h?0:f.length-1);0>b&&(b=f.length+b);if(b>=f.length){if(h)return-1;b=f.length-1}else if(0>b)if(h)b=0;else return-1;"string"===typeof d&&(d=a.from(d,t));if(a.isBuffer(d))return 0===d.length?-1:H(f,d,b,t,h);if("number"===typeof d)return d&=255,"function"===typeof Uint8Array.prototype.indexOf?h?Uint8Array.prototype.indexOf.call(f,d,b):Uint8Array.prototype.lastIndexOf.call(f,d,b):H(f,[d],b,t,h);throw new TypeError("val must be string, number or Buffer");}function H(f,d,a,t,b){function h(d,f){return 1===
l?d[f]:d.readUInt16BE(f*l)}var l=1,k=f.length,e=d.length;if(void 0!==t&&(t=String(t).toLowerCase(),"ucs2"===t||"ucs-2"===t||"utf16le"===t||"utf-16le"===t)){if(2>f.length||2>d.length)return-1;l=2;k/=2;e/=2;a/=2}if(b)for(t=-1;a<k;a++)if(h(f,a)===h(d,-1===t?0:a-t)){if(-1===t&&(t=a),a-t+1===e)return t*l}else-1!==t&&(a-=a-t),t=-1;else for(a+e>k&&(a=k-e);0<=a;a--){k=!0;for(t=0;t<e;t++)if(h(f,a+t)!==h(d,t)){k=!1;break}if(k)return a}return-1}function G(f,d,a){a=Math.min(f.length,a);for(var t=[];d<a;){var b=
f[d],h=null,k=239<b?4:223<b?3:191<b?2:1;if(d+k<=a)switch(k){case 1:128>b&&(h=b);break;case 2:var l=f[d+1];128===(l&192)&&(b=(b&31)<<6|l&63,127<b&&(h=b));break;case 3:l=f[d+1];var e=f[d+2];128===(l&192)&&128===(e&192)&&(b=(b&15)<<12|(l&63)<<6|e&63,2047<b&&(55296>b||57343<b)&&(h=b));break;case 4:l=f[d+1];e=f[d+2];var q=f[d+3];128===(l&192)&&128===(e&192)&&128===(q&192)&&(b=(b&15)<<18|(l&63)<<12|(e&63)<<6|q&63,65535<b&&1114112>b&&(h=b))}null===h?(h=65533,k=1):65535<h&&(h-=65536,t.push(h>>>10&1023|55296),
h=56320|h&1023);t.push(h);d+=k}f=t.length;if(f<=J)t=String.fromCharCode.apply(String,t);else{a="";for(d=0;d<f;)a+=String.fromCharCode.apply(String,t.slice(d,d+=J));t=a}return t}function B(f,d,a){if(0!==f%1||0>f)throw new RangeError("offset is not uint");if(f+d>a)throw new RangeError("Trying to access beyond buffer length");}function D(f,d,b,t,h,l){if(!a.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>h||d<l)throw new RangeError('"value" argument is out of bounds');
if(b+t>f.length)throw new RangeError("Index out of range");}function F(f,d,a,t,b,h){if(a+t>f.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("Index out of range");}function h(f,d,a,t,b){d=+d;a>>>=0;b||F(f,d,a,4,3.4028234663852886E38,-3.4028234663852886E38);u.write(f,d,a,t,23,4);return a+4}function C(f,d,a,t,b){d=+d;a>>>=0;b||F(f,d,a,8,1.7976931348623157E308,-1.7976931348623157E308);u.write(f,d,a,t,52,8);return a+8}function l(f){f=f.split("=")[0];f=f.trim().replace(O,
"");if(2>f.length)return"";for(;0!==f.length%4;)f+="=";return f}function y(f,d){d=d||Infinity;for(var a,t=f.length,b=null,h=[],l=0;l<t;++l){a=f.charCodeAt(l);if(55295<a&&57344>a){if(!b){if(56319<a){-1<(d-=3)&&h.push(239,191,189);continue}else if(l+1===t){-1<(d-=3)&&h.push(239,191,189);continue}b=a;continue}if(56320>a){-1<(d-=3)&&h.push(239,191,189);b=a;continue}a=(b-55296<<10|a-56320)+65536}else b&&-1<(d-=3)&&h.push(239,191,189);b=null;if(128>a){if(0>--d)break;h.push(a)}else if(2048>a){if(0>(d-=2))break;
h.push(a>>6|192,a&63|128)}else if(65536>a){if(0>(d-=3))break;h.push(a>>12|224,a>>6&63|128,a&63|128)}else if(1114112>a){if(0>(d-=4))break;h.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw Error("Invalid code point");}return h}function M(f){for(var d=[],a=0;a<f.length;++a)d.push(f.charCodeAt(a)&255);return d}function A(f,d,a,t){for(var b=0;b<t&&!(b+a>=d.length||b>=f.length);++b)d[b+a]=f[b];return b}function K(f,d){return f instanceof d||null!=f&&null!=f.constructor&&null!=f.constructor.name&&
f.constructor.name===d.name}var I=c("base64-js"),u=c("ieee754");r.Buffer=a;r.SlowBuffer=function(f){+f!=f&&(f=0);return a.alloc(+f)};r.INSPECT_MAX_BYTES=50;var L=2147483647;r.kMaxLength=L;a.TYPED_ARRAY_SUPPORT=function(){try{var f=new Uint8Array(1);f.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===f.foo()}catch(d){return!1}}();a.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}});Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});a.poolSize=8192;a.from=function(f,d,a){return p(f,d,a)};a.prototype.__proto__=Uint8Array.prototype;
a.__proto__=Uint8Array;a.alloc=function(f,d,a){e(f);f=0>=f?g(f):void 0!==d?"string"===typeof a?g(f).fill(d,a):g(f).fill(d):g(f);return f};a.allocUnsafe=function(f){return z(f)};a.allocUnsafeSlow=function(f){return z(f)};a.isBuffer=function(f){return null!=f&&!0===f._isBuffer&&f!==a.prototype};a.compare=function(f,d){K(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength));K(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength));if(!a.isBuffer(f)||!a.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(f===d)return 0;for(var b=f.length,t=d.length,h=0,l=Math.min(b,t);h<l;++h)if(f[h]!==d[h]){b=f[h];t=d[h];break}return b<t?-1:t<b?1:0};a.isEncoding=function(f){switch(String(f).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};a.concat=function(f,d){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(0===f.length)return a.alloc(0);
var b;if(void 0===d)for(b=d=0;b<f.length;++b)d+=f[b].length;d=a.allocUnsafe(d);var t=0;for(b=0;b<f.length;++b){var h=f[b];K(h,Uint8Array)&&(h=a.from(h));if(!a.isBuffer(h))throw new TypeError('"list" argument must be an Array of Buffers');h.copy(d,t);t+=h.length}return d};a.byteLength=k;a.prototype._isBuffer=!0;a.prototype.swap16=function(){var f=this.length;if(0!==f%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<f;d+=2)w(this,d,d+1);return this};a.prototype.swap32=
function(){var f=this.length;if(0!==f%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<f;d+=4)w(this,d,d+3),w(this,d+1,d+2);return this};a.prototype.swap64=function(){var f=this.length;if(0!==f%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<f;d+=8)w(this,d,d+7),w(this,d+1,d+6),w(this,d+2,d+5),w(this,d+3,d+4);return this};a.prototype.toString=function(){var f=this.length;return 0===f?"":0===arguments.length?G(this,0,f):x.apply(this,
arguments)};a.prototype.toLocaleString=a.prototype.toString;a.prototype.equals=function(f){if(!a.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:0===a.compare(this,f)};a.prototype.inspect=function(){var f=r.INSPECT_MAX_BYTES;var d=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim();this.length>f&&(d+=" ... ");return"<Buffer "+d+">"};a.prototype.compare=function(f,d,b,t,h){K(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength));if(!a.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof f);void 0===d&&(d=0);void 0===b&&(b=f?f.length:0);void 0===t&&(t=0);void 0===h&&(h=this.length);if(0>d||b>f.length||0>t||h>this.length)throw new RangeError("out of range index");if(t>=h&&d>=b)return 0;if(t>=h)return-1;if(d>=b)return 1;d>>>=0;b>>>=0;t>>>=0;h>>>=0;if(this===f)return 0;var l=h-t,k=b-d,e=Math.min(l,k);t=this.slice(t,h);f=f.slice(d,b);for(d=0;d<e;++d)if(t[d]!==f[d]){l=t[d];k=f[d];break}return l<k?-1:k<l?1:0};a.prototype.includes=function(f,d,a){return-1!==this.indexOf(f,d,a)};a.prototype.indexOf=
function(f,d,a){return v(this,f,d,a,!0)};a.prototype.lastIndexOf=function(f,d,a){return v(this,f,d,a,!1)};a.prototype.write=function(f,d,a,t){if(void 0===d)t="utf8",a=this.length,d=0;else if(void 0===a&&"string"===typeof d)t=d,a=this.length,d=0;else if(isFinite(d))d>>>=0,isFinite(a)?(a>>>=0,void 0===t&&(t="utf8")):(t=a,a=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var b=this.length-d;if(void 0===a||a>b)a=b;if(0<f.length&&(0>a||0>d)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");
t||(t="utf8");for(b=!1;;)switch(t){case "hex":a:{d=Number(d)||0;t=this.length-d;a?(a=Number(a),a>t&&(a=t)):a=t;t=f.length;a>t/2&&(a=t/2);for(t=0;t<a;++t){b=parseInt(f.substr(2*t,2),16);if(b!==b){f=t;break a}this[d+t]=b}f=t}return f;case "utf8":case "utf-8":return A(y(f,this.length-d),this,d,a);case "ascii":return A(M(f),this,d,a);case "latin1":case "binary":return A(M(f),this,d,a);case "base64":return A(I.toByteArray(l(f)),this,d,a);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":t=f;b=this.length-
d;for(var h=[],k=0;k<t.length&&!(0>(b-=2));++k){var e=t.charCodeAt(k);f=e>>8;e%=256;h.push(e);h.push(f)}return A(h,this,d,a);default:if(b)throw new TypeError("Unknown encoding: "+t);t=(""+t).toLowerCase();b=!0}};a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;a.prototype.slice=function(f,d){var b=this.length;f=~~f;d=void 0===d?b:~~d;0>f?(f+=b,0>f&&(f=0)):f>b&&(f=b);0>d?(d+=b,0>d&&(d=0)):d>b&&(d=b);d<f&&(d=f);f=this.subarray(f,d);f.__proto__=
a.prototype;return f};a.prototype.readUIntLE=function(f,d,a){f>>>=0;d>>>=0;a||B(f,d,this.length);a=this[f];for(var b=1,h=0;++h<d&&(b*=256);)a+=this[f+h]*b;return a};a.prototype.readUIntBE=function(f,d,a){f>>>=0;d>>>=0;a||B(f,d,this.length);a=this[f+--d];for(var b=1;0<d&&(b*=256);)a+=this[f+--d]*b;return a};a.prototype.readUInt8=function(f,d){f>>>=0;d||B(f,1,this.length);return this[f]};a.prototype.readUInt16LE=function(f,d){f>>>=0;d||B(f,2,this.length);return this[f]|this[f+1]<<8};a.prototype.readUInt16BE=
function(f,d){f>>>=0;d||B(f,2,this.length);return this[f]<<8|this[f+1]};a.prototype.readUInt32LE=function(f,d){f>>>=0;d||B(f,4,this.length);return(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]};a.prototype.readUInt32BE=function(f,d){f>>>=0;d||B(f,4,this.length);return 16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])};a.prototype.readIntLE=function(f,d,a){f>>>=0;d>>>=0;a||B(f,d,this.length);a=this[f];for(var b=1,h=0;++h<d&&(b*=256);)a+=this[f+h]*b;a>=128*b&&(a-=Math.pow(2,8*d));return a};
a.prototype.readIntBE=function(f,d,a){f>>>=0;d>>>=0;a||B(f,d,this.length);a=d;for(var b=1,h=this[f+--a];0<a&&(b*=256);)h+=this[f+--a]*b;h>=128*b&&(h-=Math.pow(2,8*d));return h};a.prototype.readInt8=function(f,d){f>>>=0;d||B(f,1,this.length);return this[f]&128?-1*(255-this[f]+1):this[f]};a.prototype.readInt16LE=function(f,d){f>>>=0;d||B(f,2,this.length);f=this[f]|this[f+1]<<8;return f&32768?f|4294901760:f};a.prototype.readInt16BE=function(f,d){f>>>=0;d||B(f,2,this.length);f=this[f+1]|this[f]<<8;return f&
32768?f|4294901760:f};a.prototype.readInt32LE=function(f,d){f>>>=0;d||B(f,4,this.length);return this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24};a.prototype.readInt32BE=function(f,d){f>>>=0;d||B(f,4,this.length);return this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]};a.prototype.readFloatLE=function(f,d){f>>>=0;d||B(f,4,this.length);return u.read(this,f,!0,23,4)};a.prototype.readFloatBE=function(f,d){f>>>=0;d||B(f,4,this.length);return u.read(this,f,!1,23,4)};a.prototype.readDoubleLE=function(f,
d){f>>>=0;d||B(f,8,this.length);return u.read(this,f,!0,52,8)};a.prototype.readDoubleBE=function(f,d){f>>>=0;d||B(f,8,this.length);return u.read(this,f,!1,52,8)};a.prototype.writeUIntLE=function(f,d,a,b){f=+f;d>>>=0;a>>>=0;b||D(this,f,d,a,Math.pow(2,8*a)-1,0);b=1;var t=0;for(this[d]=f&255;++t<a&&(b*=256);)this[d+t]=f/b&255;return d+a};a.prototype.writeUIntBE=function(f,d,a,b){f=+f;d>>>=0;a>>>=0;b||D(this,f,d,a,Math.pow(2,8*a)-1,0);b=a-1;var t=1;for(this[d+b]=f&255;0<=--b&&(t*=256);)this[d+b]=f/t&
255;return d+a};a.prototype.writeUInt8=function(f,d,a){f=+f;d>>>=0;a||D(this,f,d,1,255,0);this[d]=f&255;return d+1};a.prototype.writeUInt16LE=function(f,d,a){f=+f;d>>>=0;a||D(this,f,d,2,65535,0);this[d]=f&255;this[d+1]=f>>>8;return d+2};a.prototype.writeUInt16BE=function(f,d,a){f=+f;d>>>=0;a||D(this,f,d,2,65535,0);this[d]=f>>>8;this[d+1]=f&255;return d+2};a.prototype.writeUInt32LE=function(f,d,a){f=+f;d>>>=0;a||D(this,f,d,4,4294967295,0);this[d+3]=f>>>24;this[d+2]=f>>>16;this[d+1]=f>>>8;this[d]=f&
255;return d+4};a.prototype.writeUInt32BE=function(f,d,a){f=+f;d>>>=0;a||D(this,f,d,4,4294967295,0);this[d]=f>>>24;this[d+1]=f>>>16;this[d+2]=f>>>8;this[d+3]=f&255;return d+4};a.prototype.writeIntLE=function(f,d,a,b){f=+f;d>>>=0;b||(b=Math.pow(2,8*a-1),D(this,f,d,a,b-1,-b));b=0;var t=1,h=0;for(this[d]=f&255;++b<a&&(t*=256);)0>f&&0===h&&0!==this[d+b-1]&&(h=1),this[d+b]=(f/t>>0)-h&255;return d+a};a.prototype.writeIntBE=function(f,d,a,b){f=+f;d>>>=0;b||(b=Math.pow(2,8*a-1),D(this,f,d,a,b-1,-b));b=a-
1;var t=1,h=0;for(this[d+b]=f&255;0<=--b&&(t*=256);)0>f&&0===h&&0!==this[d+b+1]&&(h=1),this[d+b]=(f/t>>0)-h&255;return d+a};a.prototype.writeInt8=function(f,d,a){f=+f;d>>>=0;a||D(this,f,d,1,127,-128);0>f&&(f=255+f+1);this[d]=f&255;return d+1};a.prototype.writeInt16LE=function(f,d,a){f=+f;d>>>=0;a||D(this,f,d,2,32767,-32768);this[d]=f&255;this[d+1]=f>>>8;return d+2};a.prototype.writeInt16BE=function(f,d,a){f=+f;d>>>=0;a||D(this,f,d,2,32767,-32768);this[d]=f>>>8;this[d+1]=f&255;return d+2};a.prototype.writeInt32LE=
function(f,d,a){f=+f;d>>>=0;a||D(this,f,d,4,2147483647,-2147483648);this[d]=f&255;this[d+1]=f>>>8;this[d+2]=f>>>16;this[d+3]=f>>>24;return d+4};a.prototype.writeInt32BE=function(f,d,a){f=+f;d>>>=0;a||D(this,f,d,4,2147483647,-2147483648);0>f&&(f=4294967295+f+1);this[d]=f>>>24;this[d+1]=f>>>16;this[d+2]=f>>>8;this[d+3]=f&255;return d+4};a.prototype.writeFloatLE=function(f,d,a){return h(this,f,d,!0,a)};a.prototype.writeFloatBE=function(f,d,a){return h(this,f,d,!1,a)};a.prototype.writeDoubleLE=function(f,
d,a){return C(this,f,d,!0,a)};a.prototype.writeDoubleBE=function(f,d,a){return C(this,f,d,!1,a)};a.prototype.copy=function(f,d,b,h){if(!a.isBuffer(f))throw new TypeError("argument should be a Buffer");b||(b=0);h||0===h||(h=this.length);d>=f.length&&(d=f.length);d||(d=0);0<h&&h<b&&(h=b);if(h===b||0===f.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");if(0>b||b>=this.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("sourceEnd out of bounds");
h>this.length&&(h=this.length);f.length-d<h-b&&(h=f.length-d+b);var t=h-b;if(this===f&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(d,b,h);else if(this===f&&b<d&&d<h)for(h=t-1;0<=h;--h)f[h+d]=this[h+b];else Uint8Array.prototype.set.call(f,this.subarray(b,h),d);return t};a.prototype.fill=function(f,d,b,h){if("string"===typeof f){"string"===typeof d?(h=d,d=0,b=this.length):"string"===typeof b&&(h=b,b=this.length);if(void 0!==h&&"string"!==typeof h)throw new TypeError("encoding must be a string");
if("string"===typeof h&&!a.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(1===f.length){var t=f.charCodeAt(0);if("utf8"===h&&128>t||"latin1"===h)f=t}}else"number"===typeof f&&(f&=255);if(0>d||this.length<d||this.length<b)throw new RangeError("Out of range index");if(b<=d)return this;d>>>=0;b=void 0===b?this.length:b>>>0;f||(f=0);if("number"===typeof f)for(h=d;h<b;++h)this[h]=f;else{t=a.isBuffer(f)?f:a.from(f,h);var l=t.length;if(0===l)throw new TypeError('The value "'+f+'" is invalid for argument "value"');
for(h=0;h<b-d;++h)this[h+d]=t[h%l]}return this};var O=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,c("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:20}],4:[function(c,u,r){function p(){p.init.call(this)}function g(a){if("function"!==typeof a)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a);}function a(a,b,k,e){g(k);var h=a._events;if(void 0===h)h=a._events=Object.create(null),a._eventsCount=0;else{void 0!==h.newListener&&(a.emit("newListener",b,
k.listener?k.listener:k),h=a._events);var q=h[b]}void 0===q?(h[b]=k,++a._eventsCount):("function"===typeof q?q=h[b]=e?[k,q]:[q,k]:e?q.unshift(k):q.push(k),k=void 0===a._maxListeners?p.defaultMaxListeners:a._maxListeners,0<k&&q.length>k&&!q.warned&&(q.warned=!0,k=Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit"),k.name="MaxListenersExceededWarning",k.emitter=a,k.type=b,k.count=q.length,console&&console.warn&&
console.warn(k)));return a}function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function e(a,b,k){a={fired:!1,wrapFn:void 0,target:a,type:b,listener:k};b=m.bind(a);b.listener=k;return a.wrapFn=b}function z(a,b,k){a=a._events;if(void 0===a)return[];b=a[b];if(void 0===b)return[];if("function"===typeof b)return k?[b.listener||b]:[b];if(k)for(k=Array(b.length),
a=0;a<k.length;++a)k[a]=b[a].listener||b[a];else k=n(b,b.length);return k}function b(a){var b=this._events;if(void 0!==b){a=b[a];if("function"===typeof a)return 1;if(void 0!==a)return a.length}return 0}function n(a,b){for(var k=Array(b),e=0;e<b;++e)k[e]=a[e];return k}function q(a,b,e){"function"===typeof a.on&&k(a,"error",b,e)}function k(a,b,k,e){if("function"===typeof a.on)if(e.once)a.once(b,k);else a.on(b,k);else if("function"===typeof a.addEventListener)a.addEventListener(b,function l(q){e.once&&
a.removeEventListener(b,l);k(q)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a);}var x=(c="object"===typeof Reflect?Reflect:null)&&"function"===typeof c.apply?c.apply:function(a,b,k){return Function.prototype.apply.call(a,b,k)};var w=c&&"function"===typeof c.ownKeys?c.ownKeys:Object.getOwnPropertySymbols?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:function(a){return Object.getOwnPropertyNames(a)};
var v=Number.isNaN||function(a){return a!==a};u.exports=p;u.exports.once=function(a,b){return new Promise(function(e,n){function h(h){a.removeListener(b,c);n(h)}function c(){"function"===typeof a.removeListener&&a.removeListener("error",h);e([].slice.call(arguments))}k(a,b,c,{once:!0});"error"!==b&&q(a,h,{once:!0})})};p.EventEmitter=p;p.prototype._events=void 0;p.prototype._eventsCount=0;p.prototype._maxListeners=void 0;var H=10;Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return H},
set:function(a){if("number"!==typeof a||0>a||v(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");H=a}});p.init=function(){if(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)this._events=Object.create(null),this._eventsCount=0;this._maxListeners=this._maxListeners||void 0};p.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||v(a))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+
a+".");this._maxListeners=a;return this};p.prototype.getMaxListeners=function(){return void 0===this._maxListeners?p.defaultMaxListeners:this._maxListeners};p.prototype.emit=function(a){for(var b=[],k=1;k<arguments.length;k++)b.push(arguments[k]);k="error"===a;var e=this._events;if(void 0!==e)k=k&&void 0===e.error;else if(!k)return!1;if(k){var h;0<b.length&&(h=b[0]);if(h instanceof Error)throw h;b=Error("Unhandled error."+(h?" ("+h.message+")":""));b.context=h;throw b;}k=e[a];if(void 0===k)return!1;
if("function"===typeof k)x(k,this,b);else for(h=k.length,e=n(k,h),k=0;k<h;++k)x(e[k],this,b);return!0};p.prototype.addListener=function(b,k){return a(this,b,k,!1)};p.prototype.on=p.prototype.addListener;p.prototype.prependListener=function(b,k){return a(this,b,k,!0)};p.prototype.once=function(a,b){g(b);this.on(a,e(this,a,b));return this};p.prototype.prependOnceListener=function(a,b){g(b);this.prependListener(a,e(this,a,b));return this};p.prototype.removeListener=function(a,b){var k;g(b);var e=this._events;
if(void 0===e)return this;var h=e[a];if(void 0===h)return this;if(h===b||h.listener===b)0===--this._eventsCount?this._events=Object.create(null):(delete e[a],e.removeListener&&this.emit("removeListener",a,h.listener||b));else if("function"!==typeof h){var q=-1;for(k=h.length-1;0<=k;k--)if(h[k]===b||h[k].listener===b){var l=h[k].listener;q=k;break}if(0>q)return this;if(0===q)h.shift();else{for(;q+1<h.length;q++)h[q]=h[q+1];h.pop()}1===h.length&&(e[a]=h[0]);void 0!==e.removeListener&&this.emit("removeListener",
a,l||b)}return this};p.prototype.off=p.prototype.removeListener;p.prototype.removeAllListeners=function(a){var b=this._events;if(void 0===b)return this;if(void 0===b.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==b[a]&&(0===--this._eventsCount?this._events=Object.create(null):delete b[a]),this;if(0===arguments.length){var k=Object.keys(b);for(b=0;b<k.length;++b){var e=k[b];"removeListener"!==e&&this.removeAllListeners(e)}this.removeAllListeners("removeListener");
this._events=Object.create(null);this._eventsCount=0;return this}k=b[a];if("function"===typeof k)this.removeListener(a,k);else if(void 0!==k)for(b=k.length-1;0<=b;b--)this.removeListener(a,k[b]);return this};p.prototype.listeners=function(a){return z(this,a,!0)};p.prototype.rawListeners=function(a){return z(this,a,!1)};p.listenerCount=function(a,k){return"function"===typeof a.listenerCount?a.listenerCount(k):b.call(a,k)};p.prototype.listenerCount=b;p.prototype.eventNames=function(){return 0<this._eventsCount?
w(this._events):[]}},{}],5:[function(c,u,r){function p(){g.call(this)}u.exports=p;var g=c("events").EventEmitter;c("inherits")(p,g);p.Readable=c("readable-stream/lib/_stream_readable.js");p.Writable=c("readable-stream/lib/_stream_writable.js");p.Duplex=c("readable-stream/lib/_stream_duplex.js");p.Transform=c("readable-stream/lib/_stream_transform.js");p.PassThrough=c("readable-stream/lib/_stream_passthrough.js");p.finished=c("readable-stream/lib/internal/streams/end-of-stream.js");p.pipeline=c("readable-stream/lib/internal/streams/pipeline.js");
p.Stream=p;p.prototype.pipe=function(a,c){function e(b){a.writable&&!1===a.write(b)&&x.pause&&x.pause()}function p(){x.readable&&x.resume&&x.resume()}function b(){w||(w=!0,a.end())}function n(){w||(w=!0,"function"===typeof a.destroy&&a.destroy())}function q(a){k();if(0===g.listenerCount(this,"error"))throw a;}function k(){x.removeListener("data",e);a.removeListener("drain",p);x.removeListener("end",b);x.removeListener("close",n);x.removeListener("error",q);a.removeListener("error",q);x.removeListener("end",
k);x.removeListener("close",k);a.removeListener("close",k)}var x=this;x.on("data",e);a.on("drain",p);a._isStdio||c&&!1===c.end||(x.on("end",b),x.on("close",n));var w=!1;x.on("error",q);a.on("error",q);x.on("end",k);x.on("close",k);a.on("close",k);a.emit("pipe",x);return a}},{events:4,inherits:21,"readable-stream/lib/_stream_duplex.js":7,"readable-stream/lib/_stream_passthrough.js":8,"readable-stream/lib/_stream_readable.js":9,"readable-stream/lib/_stream_transform.js":10,"readable-stream/lib/_stream_writable.js":11,
"readable-stream/lib/internal/streams/end-of-stream.js":15,"readable-stream/lib/internal/streams/pipeline.js":17}],6:[function(c,u,r){function p(a,c){a.prototype=Object.create(c.prototype);a.prototype.constructor=a;a.__proto__=c}function g(a,c,b){b||(b=Error);var e=function(a){function b(b,k,e){return a.call(this,"string"===typeof c?c:c(b,k,e))||this}p(b,a);return b}(b);e.prototype.name=b.name;e.prototype.code=a;m[a]=e}function a(a,c){if(Array.isArray(a)){var b=a.length;a=a.map(function(a){return String(a)});
return 2<b?"one of ".concat(c," ").concat(a.slice(0,b-1).join(", "),", or ")+a[b-1]:2===b?"one of ".concat(c," ").concat(a[0]," or ").concat(a[1]):"of ".concat(c," ").concat(a[0])}return"of ".concat(c," ").concat(String(a))}var m={};g("ERR_INVALID_OPT_VALUE",function(a,c){return'The value "'+c+'" is invalid for option "'+a+'"'},TypeError);g("ERR_INVALID_ARG_TYPE",function(e,c,b){var g;if(g="string"===typeof c)g="not "===c.substr(0,4);g?(g="must not be",c=c.replace(/^not /,"")):g="must be";var q=void 0;
if(void 0===q||q>e.length)q=e.length;" argument"===e.substring(q-9,q)?e="The ".concat(e," ").concat(g," ").concat(a(c,"type")):(q=void 0,"number"!==typeof q&&(q=0),q=q+1>e.length?!1:-1!==e.indexOf(".",q),q=q?"property":"argument",e='The "'.concat(e,'" ').concat(q," ").concat(g," ").concat(a(c,"type")));return e+=". Received type ".concat(typeof b)},TypeError);g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");g("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"});
g("ERR_STREAM_PREMATURE_CLOSE","Premature close");g("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"});g("ERR_MULTIPLE_CALLBACK","Callback called multiple times");g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");g("ERR_STREAM_WRITE_AFTER_END","write after end");g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);g("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError);g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT",
"stream.unshift() after end event");u.exports.codes=m},{}],7:[function(c,u,r){(function(p){(function(){function g(k){if(!(this instanceof g))return new g(k);z.call(this,k);b.call(this,k);this.allowHalfOpen=!0;k&&(!1===k.readable&&(this.readable=!1),!1===k.writable&&(this.writable=!1),!1===k.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||p.nextTick(m,this)}function m(a){a.end()}var e=Object.keys||function(a){var b=[],k;for(k in a)b.push(k);return b};
u.exports=g;var z=c("./_stream_readable"),b=c("./_stream_writable");c("inherits")(g,z);e=e(b.prototype);for(var n=0;n<e.length;n++){var q=e[n];g.prototype[q]||(g.prototype[q]=b.prototype[q])}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(g.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}})}).call(this)}).call(this,c("_process"))},{"./_stream_readable":9,
"./_stream_writable":11,_process:22,inherits:21}],8:[function(c,u,r){function p(a){if(!(this instanceof p))return new p(a);g.call(this,a)}u.exports=p;var g=c("./_stream_transform");c("inherits")(p,g);p.prototype._transform=function(a,c,e){e(null,a)}},{"./_stream_transform":10,inherits:21}],9:[function(c,u,r){(function(p,g){(function(){function a(a,b,d){if("function"===typeof a.prependListener)return a.prependListener(b,d);if(a._events&&a._events[b])Array.isArray(a._events[b])?a._events[b].unshift(d):
a._events[b]=[d,a._events[b]];else a.on(b,d)}function m(a,b,d){y=y||c("./_stream_duplex");a=a||{};"boolean"!==typeof d&&(d=b instanceof y);this.objectMode=!!a.objectMode;d&&(this.objectMode=this.objectMode||!!a.readableObjectMode);this.highWaterMark=J(this,a,"readableHighWaterMark",d);this.buffer=new L;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=
!1;this.paused=!0;this.emitClose=!1!==a.emitClose;this.autoDestroy=!!a.autoDestroy;this.destroyed=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;a.encoding&&(S||(S=c("string_decoder/").StringDecoder),this.decoder=new S(a.encoding),this.encoding=a.encoding)}function e(a){y=y||c("./_stream_duplex");if(!(this instanceof e))return new e(a);this._readableState=new m(a,this,this instanceof y);this.readable=!0;a&&("function"===typeof a.read&&
(this._read=a.read),"function"===typeof a.destroy&&(this._destroy=a.destroy));M.call(this)}function z(a,h,l,e,c){E("readableAddChunk",h);var g=a._readableState;if(null===h)g.reading=!1,E("onEofChunk"),g.ended||(g.decoder&&(h=g.decoder.end())&&h.length&&(g.buffer.push(h),g.length+=g.objectMode?1:h.length),g.ended=!0,g.sync?q(a):(g.needReadable=!1,g.emittedReadable||(g.emittedReadable=!0,k(a))));else{if(!c){c=h;var n;A.isBuffer(c)||c instanceof K||"string"===typeof c||void 0===c||g.objectMode||(n=new f("chunk",
["string","Buffer","Uint8Array"],c));var y=n}if(y)T(a,y);else if(g.objectMode||h&&0<h.length)if("string"===typeof h||g.objectMode||Object.getPrototypeOf(h)===A.prototype||(h=A.from(h)),e)g.endEmitted?T(a,new t):b(a,g,h,!0);else if(g.ended)T(a,new d);else{if(g.destroyed)return!1;g.reading=!1;g.decoder&&!l?(h=g.decoder.write(h),g.objectMode||0!==h.length?b(a,g,h,!1):x(a,g)):b(a,g,h,!1)}else e||(g.reading=!1,x(a,g))}return!g.ended&&(g.length<g.highWaterMark||0===g.length)}function b(a,b,d,f){b.flowing&&
0===b.length&&!b.sync?(b.awaitDrain=0,a.emit("data",d)):(b.length+=b.objectMode?1:d.length,f?b.buffer.unshift(d):b.buffer.push(d),b.needReadable&&q(a));x(a,b)}function n(a,b){if(0>=a||0===b.length&&b.ended)return 0;if(b.objectMode)return 1;if(a!==a)return b.flowing&&b.length?b.buffer.head.data.length:b.length;if(a>b.highWaterMark){var d=a;1073741824<=d?d=1073741824:(d--,d|=d>>>1,d|=d>>>2,d|=d>>>4,d|=d>>>8,d|=d>>>16,d++);b.highWaterMark=d}return a<=b.length?a:b.ended?b.length:(b.needReadable=!0,0)}
function q(a){var b=a._readableState;E("emitReadable",b.needReadable,b.emittedReadable);b.needReadable=!1;b.emittedReadable||(E("emitReadable",b.flowing),b.emittedReadable=!0,p.nextTick(k,a))}function k(a){var b=a._readableState;E("emitReadable_",b.destroyed,b.length,b.ended);b.destroyed||!b.length&&!b.ended||(a.emit("readable"),b.emittedReadable=!1);b.needReadable=!b.flowing&&!b.ended&&b.length<=b.highWaterMark;D(a)}function x(a,b){b.readingMore||(b.readingMore=!0,p.nextTick(w,a,b))}function w(a,
b){for(;!b.reading&&!b.ended&&(b.length<b.highWaterMark||b.flowing&&0===b.length);){var d=b.length;E("maybeReadMore read 0");a.read(0);if(d===b.length)break}b.readingMore=!1}function v(a){return function(){var b=a._readableState;E("pipeOnDrain",b.awaitDrain);b.awaitDrain&&b.awaitDrain--;0===b.awaitDrain&&a.listeners("data").length&&(b.flowing=!0,D(a))}}function H(a){var b=a._readableState;b.readableListening=0<a.listenerCount("readable");b.resumeScheduled&&!b.paused?b.flowing=!0:0<a.listenerCount("data")&&
a.resume()}function G(a){E("readable nexttick read 0");a.read(0)}function r(a,b){E("resume",b.reading);b.reading||a.read(0);b.resumeScheduled=!1;a.emit("resume");D(a);b.flowing&&!b.reading&&a.read(0)}function D(a){var b=a._readableState;for(E("flow",b.flowing);b.flowing&&null!==a.read(););}function F(a,b){if(0===b.length)return null;b.objectMode?a=b.buffer.shift():!a||a>=b.length?(a=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.first():b.buffer.concat(b.length),b.buffer.clear()):a=b.buffer.consume(a,
b.decoder);return a}function h(a){var b=a._readableState;E("endReadable",b.endEmitted);b.endEmitted||(b.ended=!0,p.nextTick(C,b,a))}function C(a,b){E("endReadableNT",a.endEmitted,a.length);a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"),a.autoDestroy&&(a=b._writableState,(!a||a.autoDestroy&&a.finished)&&b.destroy()))}function l(a,b){for(var d=0,f=a.length;d<f;d++)if(a[d]===b)return d;return-1}u.exports=e;var y;e.ReadableState=m;c("events");var M=c("./internal/streams/stream"),
A=c("buffer").Buffer,K=g.Uint8Array||function(){},I=c("util");var E=I&&I.debuglog?I.debuglog("stream"):function(){};var L=c("./internal/streams/buffer_list");I=c("./internal/streams/destroy");var J=c("./internal/streams/state").getHighWaterMark,O=c("../errors").codes,f=O.ERR_INVALID_ARG_TYPE,d=O.ERR_STREAM_PUSH_AFTER_EOF,R=O.ERR_METHOD_NOT_IMPLEMENTED,t=O.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,S,U,W;c("inherits")(e,M);var T=I.errorOrDestroy,V=["error","close","destroy","pause","resume"];Object.defineProperty(e.prototype,
"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}});e.prototype.destroy=I.destroy;e.prototype._undestroy=I.undestroy;e.prototype._destroy=function(a,b){b(a)};e.prototype.push=function(a,b){var d=this._readableState;if(d.objectMode)var f=!0;else"string"===typeof a&&(b=b||d.defaultEncoding,b!==d.encoding&&(a=A.from(a,b),b=""),f=!0);return z(this,a,b,!1,f)};e.prototype.unshift=
function(a){return z(this,a,null,!0,!1)};e.prototype.isPaused=function(){return!1===this._readableState.flowing};e.prototype.setEncoding=function(a){S||(S=c("string_decoder/").StringDecoder);a=new S(a);this._readableState.decoder=a;this._readableState.encoding=this._readableState.decoder.encoding;for(var b=this._readableState.buffer.head,d="";null!==b;)d+=a.write(b.data),b=b.next;this._readableState.buffer.clear();""!==d&&this._readableState.buffer.push(d);this._readableState.length=d.length;return this};
e.prototype.read=function(a){E("read",a);a=parseInt(a,10);var b=this._readableState,d=a;0!==a&&(b.emittedReadable=!1);if(0===a&&b.needReadable&&((0!==b.highWaterMark?b.length>=b.highWaterMark:0<b.length)||b.ended))return E("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?h(this):q(this),null;a=n(a,b);if(0===a&&b.ended)return 0===b.length&&h(this),null;var f=b.needReadable;E("need readable",f);if(0===b.length||b.length-a<b.highWaterMark)f=!0,E("length less than watermark",f);b.ended||b.reading?
E("reading or ended",!1):f&&(E("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=n(d,b)));f=0<a?F(a,b):null;null===f?(b.needReadable=b.length<=b.highWaterMark,a=0):(b.length-=a,b.awaitDrain=0);0===b.length&&(b.ended||(b.needReadable=!0),d!==a&&b.ended&&h(this));null!==f&&this.emit("data",f);return f};e.prototype._read=function(a){T(this,new R("_read()"))};e.prototype.pipe=function(b,d){function f(a,d){E("onunpipe");a===q&&d&&!1===
d.hasUnpiped&&(d.hasUnpiped=!0,E("cleanup"),b.removeListener("close",e),b.removeListener("finish",g),b.removeListener("drain",y),b.removeListener("error",t),b.removeListener("unpipe",f),q.removeListener("end",h),q.removeListener("end",c),q.removeListener("data",k),w=!0,!n.awaitDrain||b._writableState&&!b._writableState.needDrain||y())}function h(){E("onend");b.end()}function k(a){E("ondata");a=b.write(a);E("dest.write",a);!1===a&&((1===n.pipesCount&&n.pipes===b||1<n.pipesCount&&-1!==l(n.pipes,b))&&
!w&&(E("false write response, pause",n.awaitDrain),n.awaitDrain++),q.pause())}function t(a){E("onerror",a);c();b.removeListener("error",t);0===b.listeners("error").length&&T(b,a)}function e(){b.removeListener("finish",g);c()}function g(){E("onfinish");b.removeListener("close",e);c()}function c(){E("unpipe");q.unpipe(b)}var q=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=b;break;case 1:n.pipes=[n.pipes,b];break;default:n.pipes.push(b)}n.pipesCount+=1;E("pipe count=%d opts=%j",n.pipesCount,
d);d=d&&!1===d.end||b===p.stdout||b===p.stderr?c:h;if(n.endEmitted)p.nextTick(d);else q.once("end",d);b.on("unpipe",f);var y=v(q);b.on("drain",y);var w=!1;q.on("data",k);a(b,"error",t);b.once("close",e);b.once("finish",g);b.emit("pipe",q);n.flowing||(E("pipe resume"),q.resume());return b};e.prototype.unpipe=function(a){var b=this._readableState,d={hasUnpiped:!1};if(0===b.pipesCount)return this;if(1===b.pipesCount){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=
!1;a&&a.emit("unpipe",this,d);return this}if(!a){a=b.pipes;d=b.pipesCount;b.pipes=null;b.pipesCount=0;b.flowing=!1;for(b=0;b<d;b++)a[b].emit("unpipe",this,{hasUnpiped:!1});return this}var f=l(b.pipes,a);if(-1===f)return this;b.pipes.splice(f,1);--b.pipesCount;1===b.pipesCount&&(b.pipes=b.pipes[0]);a.emit("unpipe",this,d);return this};e.prototype.on=function(a,b){b=M.prototype.on.call(this,a,b);var d=this._readableState;"data"===a?(d.readableListening=0<this.listenerCount("readable"),!1!==d.flowing&&
this.resume()):"readable"!==a||d.endEmitted||d.readableListening||(d.readableListening=d.needReadable=!0,d.flowing=!1,d.emittedReadable=!1,E("on readable",d.length,d.reading),d.length?q(this):d.reading||p.nextTick(G,this));return b};e.prototype.addListener=e.prototype.on;e.prototype.removeListener=function(a,b){b=M.prototype.removeListener.call(this,a,b);"readable"===a&&p.nextTick(H,this);return b};e.prototype.removeAllListeners=function(a){var b=M.prototype.removeAllListeners.apply(this,arguments);
"readable"!==a&&void 0!==a||p.nextTick(H,this);return b};e.prototype.resume=function(){var a=this._readableState;a.flowing||(E("resume"),a.flowing=!a.readableListening,a.resumeScheduled||(a.resumeScheduled=!0,p.nextTick(r,this,a)));a.paused=!1;return this};e.prototype.pause=function(){E("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(E("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};e.prototype.wrap=function(a){var b=
this,d=this._readableState,f=!1;a.on("end",function(){E("wrapped end");if(d.decoder&&!d.ended){var a=d.decoder.end();a&&a.length&&b.push(a)}b.push(null)});a.on("data",function(h){E("wrapped data");d.decoder&&(h=d.decoder.write(h));d.objectMode&&(null===h||void 0===h)||!(d.objectMode||h&&h.length)||b.push(h)||(f=!0,a.pause())});for(var h in a)void 0===this[h]&&"function"===typeof a[h]&&(this[h]=function(b){return function(){return a[b].apply(a,arguments)}}(h));for(h=0;h<V.length;h++)a.on(V[h],this.emit.bind(this,
V[h]));this._read=function(b){E("wrapped _read",b);f&&(f=!1,a.resume())};return this};"function"===typeof Symbol&&(e.prototype[Symbol.asyncIterator]=function(){void 0===U&&(U=c("./internal/streams/async_iterator"));return U(this)});Object.defineProperty(e.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(e.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});
Object.defineProperty(e.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(a){this._readableState&&(this._readableState.flowing=a)}});e._fromList=F;Object.defineProperty(e.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(e.from=function(a,b){void 0===W&&(W=c("./internal/streams/from"));return W(e,a,b)})}).call(this)}).call(this,c("_process"),"undefined"!==typeof global?
global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":6,"./_stream_duplex":7,"./internal/streams/async_iterator":12,"./internal/streams/buffer_list":13,"./internal/streams/destroy":14,"./internal/streams/from":16,"./internal/streams/state":18,"./internal/streams/stream":19,_process:22,buffer:3,events:4,inherits:21,"string_decoder/":25,util:2}],10:[function(c,u,r){function p(a,b){var k=this._transformState;k.transforming=!1;var e=k.writecb;if(null===e)return this.emit("error",
new z);k.writechunk=null;k.writecb=null;null!=b&&this.push(b);e(a);a=this._readableState;a.reading=!1;(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function g(b){if(!(this instanceof g))return new g(b);q.call(this,b);this._transformState={afterTransform:p.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;b&&("function"===typeof b.transform&&(this._transform=b.transform),
"function"===typeof b.flush&&(this._flush=b.flush));this.on("prefinish",a)}function a(){var a=this;"function"!==typeof this._flush||this._readableState.destroyed?m(this,null,null):this._flush(function(b,k){m(a,b,k)})}function m(a,e,q){if(e)return a.emit("error",e);null!=q&&a.push(q);if(a._writableState.length)throw new n;if(a._transformState.transforming)throw new b;return a.push(null)}u.exports=g;u=c("../errors").codes;var e=u.ERR_METHOD_NOT_IMPLEMENTED,z=u.ERR_MULTIPLE_CALLBACK,b=u.ERR_TRANSFORM_ALREADY_TRANSFORMING,
n=u.ERR_TRANSFORM_WITH_LENGTH_0,q=c("./_stream_duplex");c("inherits")(g,q);g.prototype.push=function(a,b){this._transformState.needTransform=!1;return q.prototype.push.call(this,a,b)};g.prototype._transform=function(a,b,q){q(new e("_transform()"))};g.prototype._write=function(a,b,e){var k=this._transformState;k.writecb=e;k.writechunk=a;k.writeencoding=b;k.transforming||(a=this._readableState,(k.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark))};g.prototype._read=
function(a){a=this._transformState;null===a.writechunk||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))};g.prototype._destroy=function(a,b){q.prototype._destroy.call(this,a,function(a){b(a)})}},{"../errors":6,"./_stream_duplex":7,inherits:21}],11:[function(c,u,r){(function(p,g){(function(){function a(a){var b=this;this.entry=this.next=null;this.finish=function(){var d=b.entry;for(b.entry=null;d;){var f=d.callback;a.pendingcb--;f(void 0);
d=d.next}a.corkedRequestsFree.next=b}}function m(){}function e(b,d,l){v=v||c("./_stream_duplex");b=b||{};"boolean"!==typeof l&&(l=d instanceof v);this.objectMode=!!b.objectMode;l&&(this.objectMode=this.objectMode||!!b.writableObjectMode);this.highWaterMark=h(this,b,"writableHighWaterMark",l);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==b.decodeStrings;this.defaultEncoding=b.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=
0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){var b=d._writableState,f=b.sync,h=b.writecb;if("function"!==typeof h)throw new M;b.writing=!1;b.writecb=null;b.length-=b.writelen;b.writelen=0;a?(--b.pendingcb,f?(p.nextTick(h,a),p.nextTick(w,d,b),d._writableState.errorEmitted=!0,J(d,a)):(h(a),d._writableState.errorEmitted=!0,J(d,a),w(d,b))):((a=k(b)||d.destroyed)||b.corked||b.bufferProcessing||!b.bufferedRequest||q(d,b),f?p.nextTick(n,d,b,a,h):n(d,b,a,h))};this.writecb=null;this.writelen=
0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==b.emitClose;this.autoDestroy=!!b.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new a(this)}function z(a){v=v||c("./_stream_duplex");var b=this instanceof v;if(!b&&!O.call(z,this))return new z(a);this._writableState=new e(a,this,b);this.writable=!0;a&&("function"===typeof a.write&&(this._write=a.write),"function"===typeof a.writev&&(this._writev=a.writev),
"function"===typeof a.destroy&&(this._destroy=a.destroy),"function"===typeof a.final&&(this._final=a.final));r.call(this)}function b(a,b,h,t,k,l,e){b.writelen=t;b.writecb=e;b.writing=!0;b.sync=!0;if(b.destroyed)b.onwrite(new K("write"));else h?a._writev(k,b.onwrite):a._write(k,l,b.onwrite);b.sync=!1}function n(a,b,h,t){!h&&0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"));b.pendingcb--;t();w(a,b)}function q(f,d){d.bufferProcessing=!0;var h=d.bufferedRequest;if(f._writev&&h&&h.next){var t=
Array(d.bufferedRequestCount),k=d.corkedRequestsFree;k.entry=h;for(var l=0,e=!0;h;)t[l]=h,h.isBuf||(e=!1),h=h.next,l+=1;t.allBuffers=e;b(f,d,!0,d.length,t,"",k.finish);d.pendingcb++;d.lastBufferedRequest=null;k.next?(d.corkedRequestsFree=k.next,k.next=null):d.corkedRequestsFree=new a(d);d.bufferedRequestCount=0}else{for(;h&&(t=h.chunk,b(f,d,!1,d.objectMode?1:t.length,t,h.encoding,h.callback),h=h.next,d.bufferedRequestCount--,!d.writing););null===h&&(d.lastBufferedRequest=null)}d.bufferedRequest=h;
d.bufferProcessing=!1}function k(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function x(a,b){a._final(function(d){b.pendingcb--;d&&J(a,d);b.prefinished=!0;a.emit("prefinish");w(a,b)})}function w(a,b){var d=k(b);d&&(b.prefinished||b.finalCalled||("function"!==typeof a._final||b.destroyed?(b.prefinished=!0,a.emit("prefinish")):(b.pendingcb++,b.finalCalled=!0,p.nextTick(x,a,b))),0===b.pendingcb&&(b.finished=!0,a.emit("finish"),b.autoDestroy&&(b=a._readableState,
(!b||b.autoDestroy&&b.endEmitted)&&a.destroy())));return d}u.exports=z;var v;z.WritableState=e;var H={deprecate:c("util-deprecate")},r=c("./internal/streams/stream"),B=c("buffer").Buffer,D=g.Uint8Array||function(){},F=c("./internal/streams/destroy"),h=c("./internal/streams/state").getHighWaterMark,C=c("../errors").codes,l=C.ERR_INVALID_ARG_TYPE,y=C.ERR_METHOD_NOT_IMPLEMENTED,M=C.ERR_MULTIPLE_CALLBACK,A=C.ERR_STREAM_CANNOT_PIPE,K=C.ERR_STREAM_DESTROYED,I=C.ERR_STREAM_NULL_VALUES,E=C.ERR_STREAM_WRITE_AFTER_END,
L=C.ERR_UNKNOWN_ENCODING,J=F.errorOrDestroy;c("inherits")(z,r);e.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b};(function(){try{Object.defineProperty(e.prototype,"buffer",{get:H.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(f){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var O=Function.prototype[Symbol.hasInstance];
Object.defineProperty(z,Symbol.hasInstance,{value:function(a){return O.call(this,a)?!0:this!==z?!1:a&&a._writableState instanceof e}})}else O=function(a){return a instanceof this};z.prototype.pipe=function(){J(this,new A)};z.prototype.write=function(a,d,h){var f=this._writableState,k=!1,e;if(e=!f.objectMode)e=a,e=B.isBuffer(e)||e instanceof D;e&&!B.isBuffer(a)&&(a=B.from(a));"function"===typeof d&&(h=d,d=null);e?d="buffer":d||(d=f.defaultEncoding);"function"!==typeof h&&(h=m);if(f.ending)f=h,h=new E,
J(this,h),p.nextTick(f,h);else{var q;if(!(q=e)){q=a;var g=h,c;null===q?c=new I:"string"===typeof q||f.objectMode||(c=new l("chunk",["string","Buffer"],q));c?(J(this,c),p.nextTick(g,c),q=!1):q=!0}q&&(f.pendingcb++,k=e,k||(c=a,f.objectMode||!1===f.decodeStrings||"string"!==typeof c||(c=B.from(c,d)),a!==c&&(k=!0,d="buffer",a=c)),e=f.objectMode?1:a.length,f.length+=e,c=f.length<f.highWaterMark,c||(f.needDrain=!0),f.writing||f.corked?(e=f.lastBufferedRequest,f.lastBufferedRequest={chunk:a,encoding:d,isBuf:k,
callback:h,next:null},e?e.next=f.lastBufferedRequest:f.bufferedRequest=f.lastBufferedRequest,f.bufferedRequestCount+=1):b(this,f,!1,e,a,d,h),k=c)}return k};z.prototype.cork=function(){this._writableState.corked++};z.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.bufferProcessing||!a.bufferedRequest||q(this,a))};z.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+
"").toLowerCase())))throw new L(a);this._writableState.defaultEncoding=a;return this};Object.defineProperty(z.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(z.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});z.prototype._write=function(a,b,h){h(new y("_write()"))};z.prototype._writev=null;z.prototype.end=function(a,b,h){var d=this._writableState;
"function"===typeof a?(h=a,b=a=null):"function"===typeof b&&(h=b,b=null);null!==a&&void 0!==a&&this.write(a,b);d.corked&&(d.corked=1,this.uncork());if(!d.ending){a=h;d.ending=!0;w(this,d);if(a)if(d.finished)p.nextTick(a);else this.once("finish",a);d.ended=!0;this.writable=!1}return this};Object.defineProperty(z.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(z.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?
!1:this._writableState.destroyed},set:function(a){this._writableState&&(this._writableState.destroyed=a)}});z.prototype.destroy=F.destroy;z.prototype._undestroy=F.undestroy;z.prototype._destroy=function(a,b){b(a)}}).call(this)}).call(this,c("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":6,"./_stream_duplex":7,"./internal/streams/destroy":14,"./internal/streams/state":18,"./internal/streams/stream":19,_process:22,buffer:3,
inherits:21,"util-deprecate":26}],12:[function(c,u,r){(function(p){(function(){function g(a,b,k){b in a?Object.defineProperty(a,b,{value:k,enumerable:!0,configurable:!0,writable:!0}):a[b]=k;return a}function a(a,b){return{value:a,done:b}}function m(b){var h=b[q];if(null!==h){var e=b[r].read();null!==e&&(b[v]=null,b[q]=null,b[k]=null,h(a(e,!1)))}}function e(a){p.nextTick(m,a)}function z(b,h){return function(k,l){b.then(function(){if(h[w])k(a(void 0,!0));else h[H](k,l)},l)}}var b,n=c("./end-of-stream"),
q=Symbol("lastResolve"),k=Symbol("lastReject"),x=Symbol("error"),w=Symbol("ended"),v=Symbol("lastPromise"),H=Symbol("handlePromise"),r=Symbol("stream"),B=Object.getPrototypeOf(function(){}),D=Object.setPrototypeOf((b={get stream(){return this[r]},next:function(){var b=this,h=this[x];if(null!==h)return Promise.reject(h);if(this[w])return Promise.resolve(a(void 0,!0));if(this[r].destroyed)return new Promise(function(h,k){p.nextTick(function(){b[x]?k(b[x]):h(a(void 0,!0))})});if(h=this[v])h=new Promise(z(h,
this));else{h=this[r].read();if(null!==h)return Promise.resolve(a(h,!1));h=new Promise(this[H])}return this[v]=h}},g(b,Symbol.asyncIterator,function(){return this}),g(b,"return",function(){var b=this;return new Promise(function(h,k){b[r].destroy(null,function(b){b?k(b):h(a(void 0,!0))})})}),b),B);u.exports=function(b){var h,c=Object.create(D,(h={},g(h,r,{value:b,writable:!0}),g(h,q,{value:null,writable:!0}),g(h,k,{value:null,writable:!0}),g(h,x,{value:null,writable:!0}),g(h,w,{value:b._readableState.endEmitted,
writable:!0}),g(h,H,{value:function(b,h){var l=c[r].read();l?(c[v]=null,c[q]=null,c[k]=null,b(a(l,!1))):(c[q]=b,c[k]=h)},writable:!0}),h));c[v]=null;n(b,function(b){if(b&&"ERR_STREAM_PREMATURE_CLOSE"!==b.code){var h=c[k];null!==h&&(c[v]=null,c[q]=null,c[k]=null,h(b));c[x]=b}else b=c[q],null!==b&&(c[v]=null,c[q]=null,c[k]=null,b(a(void 0,!0))),c[w]=!0});b.on("readable",e.bind(null,c));return c}}).call(this)}).call(this,c("_process"))},{"./end-of-stream":15,_process:22}],13:[function(c,u,r){function p(a,
b){var k=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);b&&(e=e.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));k.push.apply(k,e)}return k}function g(a){for(var b=1;b<arguments.length;b++){var k=null!=arguments[b]?arguments[b]:{};b%2?p(Object(k),!0).forEach(function(b){var e=k[b];b in a?Object.defineProperty(a,b,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[b]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,
Object.getOwnPropertyDescriptors(k)):p(Object(k)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(k,b))})}return a}function a(a,b){for(var k=0;k<b.length;k++){var e=b[k];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}function m(b,e,k){e&&a(b.prototype,e);k&&a(b,k);return b}var e=c("buffer").Buffer,z=c("util").inspect,b=z&&z.custom||"inspect";u.exports=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.tail=this.head=null;this.length=0}m(a,[{key:"push",value:function(a){a={data:a,next:null};0<this.length?this.tail.next=a:this.head=a;this.tail=a;++this.length}},{key:"unshift",value:function(a){a={data:a,next:this.head};0===this.length&&(this.tail=a);this.head=a;++this.length}},{key:"shift",value:function(){if(0!==this.length){var a=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return a}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=
0}},{key:"join",value:function(a){if(0===this.length)return"";for(var b=this.head,e=""+b.data;b=b.next;)e+=a+b.data;return e}},{key:"concat",value:function(a){if(0===this.length)return e.alloc(0);a=e.allocUnsafe(a>>>0);for(var b=this.head,c=0;b;)e.prototype.copy.call(b.data,a,c),c+=b.data.length,b=b.next;return a}},{key:"consume",value:function(a,b){a<this.head.data.length?(b=this.head.data.slice(0,a),this.head.data=this.head.data.slice(a)):b=a===this.head.data.length?this.shift():b?this._getString(a):
this._getBuffer(a);return b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(a){var b=this.head,e=1,c=b.data;for(a-=c.length;b=b.next;){var g=b.data,q=a>g.length?g.length:a;c=q===g.length?c+g:c+g.slice(0,a);a-=q;if(0===a){q===g.length?(++e,this.head=b.next?b.next:this.tail=null):(this.head=b,b.data=g.slice(q));break}++e}this.length-=e;return c}},{key:"_getBuffer",value:function(a){var b=e.allocUnsafe(a),c=this.head,g=1;c.data.copy(b);for(a-=c.data.length;c=
c.next;){var q=c.data,n=a>q.length?q.length:a;q.copy(b,b.length-a,0,n);a-=n;if(0===a){n===q.length?(++g,this.head=c.next?c.next:this.tail=null):(this.head=c,c.data=q.slice(n));break}++g}this.length-=g;return b}},{key:b,value:function(a,b){return z(this,g({},b,{depth:0,customInspect:!1}))}}]);return a}()},{buffer:3,util:2}],14:[function(c,u,r){(function(c){(function(){function g(e,c){p(e,c);a(e)}function a(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||
a.emit("close")}function p(a,c){a.emit("error",c)}u.exports={destroy:function(e,m){var b=this,n=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||n)return m?m(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,c.nextTick(p,this,e)):c.nextTick(p,this,e)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(e||null,function(e){!m&&
e?b._writableState?b._writableState.errorEmitted?c.nextTick(a,b):(b._writableState.errorEmitted=!0,c.nextTick(g,b,e)):c.nextTick(g,b,e):m?(c.nextTick(a,b),m(e)):c.nextTick(a,b)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=
!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(a,c){var b=a._readableState,e=a._writableState;b&&b.autoDestroy||e&&e.autoDestroy?a.destroy(c):a.emit("error",c)}}}).call(this)}).call(this,c("_process"))},{_process:22}],15:[function(c,u,r){function p(a){var c=!1;return function(){if(!c){c=!0;for(var b=arguments.length,e=Array(b),g=0;g<b;g++)e[g]=arguments[g];a.apply(this,e)}}}function g(){}function a(c,r,b){if("function"===
typeof r)return a(c,null,r);r||(r={});b=p(b||g);var e=r.readable||!1!==r.readable&&c.readable,q=r.writable||!1!==r.writable&&c.writable,k=function(){c.writable||w()},x=c._writableState&&c._writableState.finished,w=function(){q=!1;x=!0;e||b.call(c)},v=c._readableState&&c._readableState.endEmitted,H=function(){e=!1;v=!0;q||b.call(c)},G=function(a){b.call(c,a)},B=function(){var a;if(e&&!v)return c._readableState&&c._readableState.ended||(a=new m),b.call(c,a);if(q&&!x)return c._writableState&&c._writableState.ended||
(a=new m),b.call(c,a)},z=function(){c.req.on("finish",w)};if(c.setHeader&&"function"===typeof c.abort)if(c.on("complete",w),c.on("abort",B),c.req)z();else c.on("request",z);else q&&!c._writableState&&(c.on("end",k),c.on("close",k));c.on("end",H);c.on("finish",w);if(!1!==r.error)c.on("error",G);c.on("close",B);return function(){c.removeListener("complete",w);c.removeListener("abort",B);c.removeListener("request",z);c.req&&c.req.removeListener("finish",w);c.removeListener("end",k);c.removeListener("close",
k);c.removeListener("finish",w);c.removeListener("end",H);c.removeListener("error",G);c.removeListener("close",B)}}var m=c("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;u.exports=a},{"../../../errors":6}],16:[function(c,u,r){u.exports=function(){throw Error("Readable.from is not available in the browser");}},{}],17:[function(c,u,r){function p(a){var b=!1;return function(){b||(b=!0,a.apply(void 0,arguments))}}function g(a){if(a)throw a;}function a(a,b,e,g){g=p(g);var k=!1;a.on("close",function(){k=
!0});void 0===z&&(z=c("./end-of-stream"));z(a,{readable:b,writable:e},function(a){if(a)return g(a);k=!0;g()});var q=!1;return function(b){if(!k&&!q){q=!0;if(a.setHeader&&"function"===typeof a.abort)return a.abort();if("function"===typeof a.destroy)return a.destroy();g(b||new n("pipe"))}}}function m(a){a()}function e(a,b){return a.pipe(b)}var z;r=c("../../../errors").codes;var b=r.ERR_MISSING_ARGS,n=r.ERR_STREAM_DESTROYED;u.exports=function(){for(var c=arguments.length,k=Array(c),n=0;n<c;n++)k[n]=
arguments[n];var p=k.length?"function"!==typeof k[k.length-1]?g:k.pop():g;Array.isArray(k[0])&&(k=k[0]);if(2>k.length)throw new b("streams");var r,H=k.map(function(b,c){var e=c<k.length-1;return a(b,e,0<c,function(a){r||(r=a);a&&H.forEach(m);e||(H.forEach(m),p(r))})});return k.reduce(e)}},{"../../../errors":6,"./end-of-stream":15}],18:[function(c,u,r){var p=c("../../../errors").codes.ERR_INVALID_OPT_VALUE;u.exports={getHighWaterMark:function(c,a,m,e){a=null!=a.highWaterMark?a.highWaterMark:e?a[m]:
null;if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||0>a)throw new p(e?m:"highWaterMark",a);return Math.floor(a)}return c.objectMode?16:16384}}},{"../../../errors":6}],19:[function(c,u,r){u.exports=c("events").EventEmitter},{events:4}],20:[function(c,u,r){r.read=function(c,g,a,m,e){var p=8*e-m-1;var b=(1<<p)-1,n=b>>1,q=-7;e=a?e-1:0;var k=a?-1:1,r=c[g+e];e+=k;a=r&(1<<-q)-1;r>>=-q;for(q+=p;0<q;a=256*a+c[g+e],e+=k,q-=8);p=a&(1<<-q)-1;a>>=-q;for(q+=m;0<q;p=256*p+c[g+e],e+=k,q-=8);if(0===a)a=1-n;else{if(a===
b)return p?NaN:Infinity*(r?-1:1);p+=Math.pow(2,m);a-=n}return(r?-1:1)*p*Math.pow(2,a-m)};r.write=function(c,g,a,m,e,r){var b,n=8*r-e-1,q=(1<<n)-1,k=q>>1,p=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;r=m?0:r-1;var w=m?1:-1,v=0>g||0===g&&0>1/g?1:0;g=Math.abs(g);isNaN(g)||Infinity===g?(g=isNaN(g)?1:0,m=q):(m=Math.floor(Math.log(g)/Math.LN2),1>g*(b=Math.pow(2,-m))&&(m--,b*=2),g=1<=m+k?g+p/b:g+p*Math.pow(2,1-k),2<=g*b&&(m++,b/=2),m+k>=q?(g=0,m=q):1<=m+k?(g=(g*b-1)*Math.pow(2,e),m+=k):(g=g*Math.pow(2,k-1)*
Math.pow(2,e),m=0));for(;8<=e;c[a+r]=g&255,r+=w,g/=256,e-=8);m=m<<e|g;for(n+=e;0<n;c[a+r]=m&255,r+=w,m/=256,n-=8);c[a+r-w]|=128*v}},{}],21:[function(c,u,r){u.exports="function"===typeof Object.create?function(c,g){g&&(c.super_=g,c.prototype=Object.create(g.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:function(c,g){if(g){c.super_=g;var a=function(){};a.prototype=g.prototype;c.prototype=new a;c.prototype.constructor=c}}},{}],22:[function(c,u,r){function p(){throw Error("setTimeout has not been defined");
}function g(){throw Error("clearTimeout has not been defined");}function a(a){if(q===setTimeout)return setTimeout(a,0);if((q===p||!q)&&setTimeout)return q=setTimeout,setTimeout(a,0);try{return q(a,0)}catch(B){try{return q.call(null,a,0)}catch(D){return q.call(this,a,0)}}}function m(a){if(k===clearTimeout)return clearTimeout(a);if((k===g||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(a);try{return k(a)}catch(B){try{return k.call(null,a)}catch(D){return k.call(this,a)}}}function e(){w&&v&&(w=
!1,v.length?x=v.concat(x):H=-1,x.length&&z())}function z(){if(!w){var b=a(e);w=!0;for(var c=x.length;c;){v=x;for(x=[];++H<c;)v&&v[H].run();H=-1;c=x.length}v=null;w=!1;m(b)}}function b(a,b){this.fun=a;this.array=b}function n(){}c=u.exports={};try{var q="function"===typeof setTimeout?setTimeout:p}catch(G){q=p}try{var k="function"===typeof clearTimeout?clearTimeout:g}catch(G){k=g}var x=[],w=!1,v,H=-1;c.nextTick=function(c){var k=Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)k[e-
1]=arguments[e];x.push(new b(c,k));1!==x.length||w||a(z)};b.prototype.run=function(){this.fun.apply(null,this.array)};c.title="browser";c.browser=!0;c.env={};c.argv=[];c.version="";c.versions={};c.on=n;c.addListener=n;c.once=n;c.off=n;c.removeListener=n;c.removeAllListeners=n;c.emit=n;c.prependListener=n;c.prependOnceListener=n;c.listeners=function(a){return[]};c.binding=function(a){throw Error("process.binding is not supported");};c.cwd=function(){return"/"};c.chdir=function(a){throw Error("process.chdir is not supported");
};c.umask=function(){return 0}},{}],23:[function(c,u,r){function p(a,c){for(var b in a)c[b]=a[b]}function g(a,c,b){return m(a,c,b)}var a=c("buffer"),m=a.Buffer;m.from&&m.alloc&&m.allocUnsafe&&m.allocUnsafeSlow?u.exports=a:(p(a,r),r.Buffer=g);g.prototype=Object.create(m.prototype);p(m,g);g.from=function(a,c,b){if("number"===typeof a)throw new TypeError("Argument must not be a number");return m(a,c,b)};g.alloc=function(a,c,b){if("number"!==typeof a)throw new TypeError("Argument must be a number");a=
m(a);void 0!==c?"string"===typeof b?a.fill(c,b):a.fill(c):a.fill(0);return a};g.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return m(a)};g.allocUnsafeSlow=function(c){if("number"!==typeof c)throw new TypeError("Argument must be a number");return a.SlowBuffer(c)}},{buffer:3}],24:[function(c,u,r){(function(p){(function(){(function(g){function a(b,h){if(!(this instanceof a))return new a(b,h);for(var f=0,c=C.length;f<c;f++)this[C[f]]="";this.q=this.c=
"";this.bufferCheckPosition=g.MAX_BUFFER_LENGTH;this.opt=h||{};this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags;this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase";this.tags=[];this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.strict=!!b;this.noscript=!(!b&&!this.opt.noscript);this.state=d.BEGIN;this.ENTITIES=(this.strictEntities=this.opt.strictEntities)?Object.create(g.XML_ENTITIES):Object.create(g.ENTITIES);this.attribList=[];this.opt.xmlns&&(this.ns=
Object.create(E));if(this.trackPosition=!1!==this.opt.position)this.position=this.line=this.column=0;this.onready&&this.onready(void 0)}function m(b,d){if(!(this instanceof m))return new m(b,d);l.apply(this);this._parser=new a(b,d);this.readable=this.writable=!0;var h=this;this._parser.onend=function(){h.emit("end")};this._parser.onerror=function(a){h.emit("error",a);h._parser.error=null};this._decoder=null;y.forEach(function(a){Object.defineProperty(h,"on"+a,{get:function(){return h._parser["on"+
a]},set:function(b){if(!b)return h.removeAllListeners(a),h._parser["on"+a]=b;h.on(a,b)},enumerable:!0,configurable:!1})})}function e(a){return" "===a||"\n"===a||"\r"===a||"\t"===a}function r(a){return'"'===a||"'"===a}function b(a,b,d){a.textNode&&n(a);a[b]&&a[b](d)}function n(a){a.textNode=q(a.opt,a.textNode);a.textNode&&a.ontext&&a.ontext(a.textNode);a.textNode=""}function q(a,b){a.trim&&(b=b.trim());a.normalize&&(b=b.replace(/\s+/g," "));return b}function k(a,b){n(a);a.trackPosition&&(b+="\nLine: "+
a.line+"\nColumn: "+a.column+"\nChar: "+a.c);b=Error(b);a.error=b;a.onerror&&a.onerror(b);return a}function x(b){b.sawRoot&&!b.closedRoot&&w(b,"Unclosed root tag");b.state!==d.BEGIN&&b.state!==d.BEGIN_WHITESPACE&&b.state!==d.TEXT&&k(b,"Unexpected end");n(b);b.c="";b.closed=!0;b.onend&&b.onend(void 0);a.call(b,b.strict,b.opt);return b}function w(b,d){if("object"!==typeof b||!(b instanceof a))throw Error("bad call to strictFail");b.strict&&k(b,d)}function v(a,b){var d=0>a.indexOf(":")?["",a]:a.split(":"),
h=d[0];d=d[1];b&&"xmlns"===a&&(h="xmlns",d="");return{prefix:h,local:d}}function H(a){a.strict||(a.attribName=a.attribName[a.looseCase]());if(-1===a.attribList.indexOf(a.attribName)&&!a.tag.attributes.hasOwnProperty(a.attribName))if(a.opt.xmlns){var d=v(a.attribName,!0),h=d.local;if("xmlns"===d.prefix)if("xml"===h&&a.attribValue!==K)w(a,"xml: prefix must be bound to "+K+"\nActual: "+a.attribValue);else if("xmlns"===h&&a.attribValue!==I)w(a,"xmlns: prefix must be bound to "+I+"\nActual: "+a.attribValue);
else{d=a.tag;var f=a.tags[a.tags.length-1]||a;d.ns===f.ns&&(d.ns=Object.create(f.ns));d.ns[h]=a.attribValue}a.attribList.push([a.attribName,a.attribValue])}else a.tag.attributes[a.attribName]=a.attribValue,b(a,"onattribute",{name:a.attribName,value:a.attribValue});a.attribName=a.attribValue=""}function u(a,h){if(a.opt.xmlns){var f=a.tag,c=v(a.tagName);f.prefix=c.prefix;f.local=c.local;f.uri=f.ns[c.prefix]||"";f.prefix&&!f.uri&&(w(a,"Unbound namespace prefix: "+JSON.stringify(a.tagName)),f.uri=c.prefix);
c=a.tags[a.tags.length-1]||a;f.ns&&c.ns!==f.ns&&Object.keys(f.ns).forEach(function(d){b(a,"onopennamespace",{prefix:d,uri:f.ns[d]})});c=0;for(var k=a.attribList.length;c<k;c++){var l=a.attribList[c],g=l[0],e=l[1],n=v(g,!0);l=n.prefix;var q=""===l?"":f.ns[l]||"";e={name:g,value:e,prefix:l,local:n.local,uri:q};l&&"xmlns"!==l&&!q&&(w(a,"Unbound namespace prefix: "+JSON.stringify(l)),e.uri=l);a.tag.attributes[g]=e;b(a,"onattribute",e)}a.attribList.length=0}a.tag.isSelfClosing=!!h;a.sawRoot=!0;a.tags.push(a.tag);
b(a,"onopentag",a.tag);h||(a.noscript||"script"!==a.tagName.toLowerCase()?a.state=d.TEXT:a.state=d.SCRIPT,a.tag=null,a.tagName="");a.attribName=a.attribValue="";a.attribList.length=0}function B(a){if(a.tagName){if(a.script){if("script"!==a.tagName){a.script+="</"+a.tagName+">";a.tagName="";a.state=d.SCRIPT;return}b(a,"onscript",a.script);a.script=""}var h=a.tags.length,f=a.tagName;a.strict||(f=f[a.looseCase]());for(var c=f;h--;)if(a.tags[h].name!==c)w(a,"Unexpected close tag");else break;if(0>h)w(a,
"Unmatched closing tag: "+a.tagName),a.textNode+="</"+a.tagName+">";else{a.tagName=f;for(f=a.tags.length;f-- >h;){var k=a.tag=a.tags.pop();a.tagName=a.tag.name;b(a,"onclosetag",a.tagName);for(var l in k.ns);c=a.tags[a.tags.length-1]||a;a.opt.xmlns&&k.ns!==c.ns&&Object.keys(k.ns).forEach(function(d){b(a,"onclosenamespace",{prefix:d,uri:k.ns[d]})})}0===h&&(a.closedRoot=!0);a.tagName=a.attribValue=a.attribName="";a.attribList.length=0}}else w(a,"Weird empty close tag."),a.textNode+="</>";a.state=d.TEXT}
function D(a){var b=a.entity,d=b.toLowerCase(),h="";if(a.ENTITIES[b])return a.ENTITIES[b];if(a.ENTITIES[d])return a.ENTITIES[d];b=d;if("#"===b.charAt(0))if("x"===b.charAt(1)){b=b.slice(2);var f=parseInt(b,16);h=f.toString(16)}else b=b.slice(1),f=parseInt(b,10),h=f.toString(10);b=b.replace(/^0+/,"");return isNaN(f)||h.toLowerCase()!==b?(w(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(f)}function F(a,b){"<"===b?(a.state=d.OPEN_WAKA,a.startTagPosition=a.position):e(b)||(w(a,"Non-whitespace before first tag."),
a.textNode=b,a.state=d.TEXT)}function h(a,b){var d="";b<a.length&&(d=a.charAt(b));return d}g.parser=function(b,d){return new a(b,d)};g.SAXParser=a;g.SAXStream=m;g.createStream=function(a,b){return new m(a,b)};g.MAX_BUFFER_LENGTH=65536;var C="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" ");g.EVENTS="text processinginstruction sgmldeclaration doctype comment opentagstart attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" ");
Object.create||(Object.create=function(a){function b(){}b.prototype=a;return new b});Object.keys||(Object.keys=function(a){var b=[],d;for(d in a)a.hasOwnProperty(d)&&b.push(d);return b});a.prototype={end:function(){x(this)},write:function(a){if(this.error)throw this.error;if(this.closed)return k(this,"Cannot write after close. Assign an onready handler.");if(null===a)return x(this);"object"===typeof a&&(a=a.toString());for(var c=0,l;;){this.c=l=h(a,c++);if(!l)break;this.trackPosition&&(this.position++,
"\n"===l?(this.line++,this.column=0):this.column++);switch(this.state){case d.BEGIN:this.state=d.BEGIN_WHITESPACE;if("\ufeff"===l)continue;F(this,l);continue;case d.BEGIN_WHITESPACE:F(this,l);continue;case d.TEXT:if(this.sawRoot&&!this.closedRoot){for(var y=c-1;l&&"<"!==l&&"&"!==l;)(l=h(a,c++))&&this.trackPosition&&(this.position++,"\n"===l?(this.line++,this.column=0):this.column++);this.textNode+=a.substring(y,c-1)}"<"!==l||this.sawRoot&&this.closedRoot&&!this.strict?(e(l)||this.sawRoot&&!this.closedRoot||
w(this,"Text data outside of root node."),"&"===l?this.state=d.TEXT_ENTITY:this.textNode+=l):(this.state=d.OPEN_WAKA,this.startTagPosition=this.position);continue;case d.SCRIPT:"<"===l?this.state=d.SCRIPT_ENDING:this.script+=l;continue;case d.SCRIPT_ENDING:"/"===l?this.state=d.CLOSE_TAG:(this.script+="<"+l,this.state=d.SCRIPT);continue;case d.OPEN_WAKA:"!"===l?(this.state=d.SGML_DECL,this.sgmlDecl=""):e(l)||(L.test(l)?(this.state=d.OPEN_TAG,this.tagName=l):"/"===l?(this.state=d.CLOSE_TAG,this.tagName=
""):"?"===l?(this.state=d.PROC_INST,this.procInstName=this.procInstBody=""):(w(this,"Unencoded <"),this.startTagPosition+1<this.position&&(l=Array(this.position-this.startTagPosition).join(" ")+l),this.textNode+="<"+l,this.state=d.TEXT));continue;case d.SGML_DECL:(this.sgmlDecl+l).toUpperCase()===M?(b(this,"onopencdata"),this.state=d.CDATA,this.cdata=this.sgmlDecl=""):"--"===this.sgmlDecl+l?(this.state=d.COMMENT,this.sgmlDecl=this.comment=""):(this.sgmlDecl+l).toUpperCase()===A?(this.state=d.DOCTYPE,
(this.doctype||this.sawRoot)&&w(this,"Inappropriately located doctype declaration"),this.sgmlDecl=this.doctype=""):">"===l?(b(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=d.TEXT):(r(l)&&(this.state=d.SGML_DECL_QUOTED),this.sgmlDecl+=l);continue;case d.SGML_DECL_QUOTED:l===this.q&&(this.state=d.SGML_DECL,this.q="");this.sgmlDecl+=l;continue;case d.DOCTYPE:">"===l?(this.state=d.TEXT,b(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=l,"["===l?this.state=d.DOCTYPE_DTD:
r(l)&&(this.state=d.DOCTYPE_QUOTED,this.q=l));continue;case d.DOCTYPE_QUOTED:this.doctype+=l;l===this.q&&(this.q="",this.state=d.DOCTYPE);continue;case d.DOCTYPE_DTD:this.doctype+=l;"]"===l?this.state=d.DOCTYPE:r(l)&&(this.state=d.DOCTYPE_DTD_QUOTED,this.q=l);continue;case d.DOCTYPE_DTD_QUOTED:this.doctype+=l;l===this.q&&(this.state=d.DOCTYPE_DTD,this.q="");continue;case d.COMMENT:"-"===l?this.state=d.COMMENT_ENDING:this.comment+=l;continue;case d.COMMENT_ENDING:"-"===l?(this.state=d.COMMENT_ENDED,
(this.comment=q(this.opt,this.comment))&&b(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+l,this.state=d.COMMENT);continue;case d.COMMENT_ENDED:">"!==l?(w(this,"Malformed comment"),this.comment+="--"+l,this.state=d.COMMENT):this.state=d.TEXT;continue;case d.CDATA:"]"===l?this.state=d.CDATA_ENDING:this.cdata+=l;continue;case d.CDATA_ENDING:"]"===l?this.state=d.CDATA_ENDING_2:(this.cdata+="]"+l,this.state=d.CDATA);continue;case d.CDATA_ENDING_2:">"===l?(this.cdata&&b(this,"oncdata",
this.cdata),b(this,"onclosecdata"),this.cdata="",this.state=d.TEXT):"]"===l?this.cdata+="]":(this.cdata+="]]"+l,this.state=d.CDATA);continue;case d.PROC_INST:"?"===l?this.state=d.PROC_INST_ENDING:e(l)?this.state=d.PROC_INST_BODY:this.procInstName+=l;continue;case d.PROC_INST_BODY:if(!this.procInstBody&&e(l))continue;else"?"===l?this.state=d.PROC_INST_ENDING:this.procInstBody+=l;continue;case d.PROC_INST_ENDING:">"===l?(b(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),
this.procInstName=this.procInstBody="",this.state=d.TEXT):(this.procInstBody+="?"+l,this.state=d.PROC_INST_BODY);continue;case d.OPEN_TAG:if(J.test(l))this.tagName+=l;else{this.strict||(this.tagName=this.tagName[this.looseCase]());y=this.tags[this.tags.length-1]||this;var p=this.tag={name:this.tagName,attributes:{}};this.opt.xmlns&&(p.ns=y.ns);this.attribList.length=0;b(this,"onopentagstart",p);">"===l?u(this):"/"===l?this.state=d.OPEN_TAG_SLASH:(e(l)||w(this,"Invalid character in tag name"),this.state=
d.ATTRIB)}continue;case d.OPEN_TAG_SLASH:">"===l?(u(this,!0),B(this)):(w(this,"Forward-slash in opening tag not followed by >"),this.state=d.ATTRIB);continue;case d.ATTRIB:if(e(l))continue;else">"===l?u(this):"/"===l?this.state=d.OPEN_TAG_SLASH:L.test(l)?(this.attribName=l,this.attribValue="",this.state=d.ATTRIB_NAME):w(this,"Invalid attribute name");continue;case d.ATTRIB_NAME:"="===l?this.state=d.ATTRIB_VALUE:">"===l?(w(this,"Attribute without value"),this.attribValue=this.attribName,H(this),u(this)):
e(l)?this.state=d.ATTRIB_NAME_SAW_WHITE:J.test(l)?this.attribName+=l:w(this,"Invalid attribute name");continue;case d.ATTRIB_NAME_SAW_WHITE:if("="===l)this.state=d.ATTRIB_VALUE;else if(e(l))continue;else w(this,"Attribute without value"),this.attribValue=this.tag.attributes[this.attribName]="",b(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===l?u(this):L.test(l)?(this.attribName=l,this.state=d.ATTRIB_NAME):(w(this,"Invalid attribute name"),this.state=d.ATTRIB);continue;
case d.ATTRIB_VALUE:if(e(l))continue;else r(l)?(this.q=l,this.state=d.ATTRIB_VALUE_QUOTED):(w(this,"Unquoted attribute value"),this.state=d.ATTRIB_VALUE_UNQUOTED,this.attribValue=l);continue;case d.ATTRIB_VALUE_QUOTED:if(l!==this.q){"&"===l?this.state=d.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=l;continue}H(this);this.q="";this.state=d.ATTRIB_VALUE_CLOSED;continue;case d.ATTRIB_VALUE_CLOSED:e(l)?this.state=d.ATTRIB:">"===l?u(this):"/"===l?this.state=d.OPEN_TAG_SLASH:L.test(l)?(w(this,"No whitespace between attributes"),
this.attribName=l,this.attribValue="",this.state=d.ATTRIB_NAME):w(this,"Invalid attribute name");continue;case d.ATTRIB_VALUE_UNQUOTED:if(">"!==l&&!e(l)){"&"===l?this.state=d.ATTRIB_VALUE_ENTITY_U:this.attribValue+=l;continue}H(this);">"===l?u(this):this.state=d.ATTRIB;continue;case d.CLOSE_TAG:if(this.tagName)">"===l?B(this):J.test(l)?this.tagName+=l:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=d.SCRIPT):(e(l)||w(this,"Invalid tagname in closing tag"),this.state=d.CLOSE_TAG_SAW_WHITE);
else if(e(l))continue;else L.test(l)?this.tagName=l:this.script?(this.script+="</"+l,this.state=d.SCRIPT):w(this,"Invalid tagname in closing tag.");continue;case d.CLOSE_TAG_SAW_WHITE:if(e(l))continue;">"===l?B(this):w(this,"Invalid characters in closing tag");continue;case d.TEXT_ENTITY:case d.ATTRIB_VALUE_ENTITY_Q:case d.ATTRIB_VALUE_ENTITY_U:switch(this.state){case d.TEXT_ENTITY:var t=d.TEXT;var m="textNode";break;case d.ATTRIB_VALUE_ENTITY_Q:t=d.ATTRIB_VALUE_QUOTED;m="attribValue";break;case d.ATTRIB_VALUE_ENTITY_U:t=
d.ATTRIB_VALUE_UNQUOTED,m="attribValue"}";"===l?(this[m]+=D(this),this.entity="",this.state=t):(this.entity.length?f:O).test(l)?this.entity+=l:(w(this,"Invalid character in entity name"),this[m]+="&"+this.entity+l,this.entity="",this.state=t);continue;default:throw Error(this,"Unknown state: "+this.state);}}if(this.position>=this.bufferCheckPosition){a=Math.max(g.MAX_BUFFER_LENGTH,10);l=c=0;for(t=C.length;l<t;l++){m=this[C[l]].length;if(m>a)switch(C[l]){case "textNode":n(this);break;case "cdata":b(this,
"oncdata",this.cdata);this.cdata="";break;case "script":b(this,"onscript",this.script);this.script="";break;default:k(this,"Max buffer length exceeded: "+C[l])}c=Math.max(c,m)}this.bufferCheckPosition=g.MAX_BUFFER_LENGTH-c+this.position}return this},resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){n(this);""!==this.cdata&&(b(this,"oncdata",this.cdata),this.cdata="");""!==this.script&&(b(this,"onscript",this.script),this.script="")}};try{var l=
c("stream").Stream}catch(t){l=function(){}}var y=g.EVENTS.filter(function(a){return"error"!==a&&"end"!==a});m.prototype=Object.create(l.prototype,{constructor:{value:m}});m.prototype.write=function(a){"function"===typeof p&&"function"===typeof p.isBuffer&&p.isBuffer(a)&&(this._decoder||(this._decoder=new (c("string_decoder").StringDecoder)("utf8")),a=this._decoder.write(a));this._parser.write(a.toString());this.emit("data",a);return!0};m.prototype.end=function(a){a&&a.length&&this.write(a);this._parser.end();
return!0};m.prototype.on=function(a,b){var d=this;d._parser["on"+a]||-1===y.indexOf(a)||(d._parser["on"+a]=function(){var b=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);b.splice(0,0,a);d.emit.apply(d,b)});return l.prototype.on.call(d,a,b)};var M="[CDATA[",A="DOCTYPE",K="http://www.w3.org/XML/1998/namespace",I="http://www.w3.org/2000/xmlns/",E={xml:K,xmlns:I},L=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
J=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,
d=0;g.STATE={BEGIN:d++,BEGIN_WHITESPACE:d++,TEXT:d++,TEXT_ENTITY:d++,OPEN_WAKA:d++,SGML_DECL:d++,SGML_DECL_QUOTED:d++,DOCTYPE:d++,DOCTYPE_QUOTED:d++,DOCTYPE_DTD:d++,DOCTYPE_DTD_QUOTED:d++,COMMENT_STARTING:d++,COMMENT:d++,COMMENT_ENDING:d++,COMMENT_ENDED:d++,CDATA:d++,CDATA_ENDING:d++,CDATA_ENDING_2:d++,PROC_INST:d++,PROC_INST_BODY:d++,PROC_INST_ENDING:d++,OPEN_TAG:d++,OPEN_TAG_SLASH:d++,ATTRIB:d++,ATTRIB_NAME:d++,ATTRIB_NAME_SAW_WHITE:d++,ATTRIB_VALUE:d++,ATTRIB_VALUE_QUOTED:d++,ATTRIB_VALUE_CLOSED:d++,
ATTRIB_VALUE_UNQUOTED:d++,ATTRIB_VALUE_ENTITY_Q:d++,ATTRIB_VALUE_ENTITY_U:d++,CLOSE_TAG:d++,CLOSE_TAG_SAW_WHITE:d++,SCRIPT:d++,SCRIPT_ENDING:d++};g.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};g.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,
THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,
laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,
Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,
lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,
ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(g.ENTITIES).forEach(function(a){var b=g.ENTITIES[a];b="number"===typeof b?String.fromCharCode(b):b;g.ENTITIES[a]=b});for(var R in g.STATE)g.STATE[g.STATE[R]]=R;d=g.STATE;String.fromCodePoint||function(){var a=String.fromCharCode,b=Math.floor,d=function(){var d=[],h=-1,
f=arguments.length;if(!f)return"";for(var l="";++h<f;){var c=Number(arguments[h]);if(!isFinite(c)||0>c||1114111<c||b(c)!==c)throw RangeError("Invalid code point: "+c);if(65535>=c)d.push(c);else{c-=65536;var k=(c>>10)+55296;c=c%1024+56320;d.push(k,c)}if(h+1===f||16384<d.length)l+=a.apply(null,d),d.length=0}return l};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:d,configurable:!0,writable:!0}):String.fromCodePoint=d}()})("undefined"===typeof r?this.sax={}:r)}).call(this)}).call(this,
c("buffer").Buffer)},{buffer:3,stream:5,string_decoder:25}],25:[function(c,u,r){function p(a){if(!a)return"utf8";for(var b;;)switch(a){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return a;default:if(b)return;a=(""+a).toLowerCase();b=!0}}function g(a){var c=p(a);if("string"!==typeof c&&(w.isEncoding===v||!v(a)))throw Error("Unknown encoding: "+a);this.encoding=
c||a;switch(this.encoding){case "utf16le":this.text=z;this.end=b;a=4;break;case "utf8":this.fillLast=e;a=4;break;case "base64":this.text=n;this.end=q;a=3;break;default:this.write=k;this.end=x;return}this.lastTotal=this.lastNeed=0;this.lastChar=w.allocUnsafe(a)}function a(a){return 127>=a?0:6===a>>5?2:14===a>>4?3:30===a>>3?4:2===a>>6?-1:-2}function m(b,c,k){var g=c.length-1;if(g<k)return 0;var e=a(c[g]);if(0<=e)return 0<e&&(b.lastNeed=e-1),e;if(--g<k||-2===e)return 0;e=a(c[g]);if(0<=e)return 0<e&&
(b.lastNeed=e-2),e;if(--g<k||-2===e)return 0;e=a(c[g]);return 0<=e?(0<e&&(2===e?e=0:b.lastNeed=e-3),e):0}function e(a){var b=this.lastTotal-this.lastNeed;a:if(128!==(a[0]&192)){this.lastNeed=0;var c="\ufffd"}else{if(1<this.lastNeed&&1<a.length){if(128!==(a[1]&192)){this.lastNeed=1;c="\ufffd";break a}if(2<this.lastNeed&&2<a.length&&128!==(a[2]&192)){this.lastNeed=2;c="\ufffd";break a}}c=void 0}if(void 0!==c)return c;if(this.lastNeed<=a.length)return a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,
0,this.lastTotal);a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function z(a,b){if(0===(a.length-b)%2){if(b=a.toString("utf16le",b)){var c=b.charCodeAt(b.length-1);if(55296<=c&&56319>=c)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],b.slice(0,-1)}return b}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function b(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("utf16le",
0,this.lastTotal-this.lastNeed):a}function n(a,b){var c=(a.length-b)%3;if(0===c)return a.toString("base64",b);this.lastNeed=3-c;this.lastTotal=3;1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",b,a.length-c)}function q(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function k(a){return a.toString(this.encoding)}function x(a){return a&&a.length?this.write(a):
""}var w=c("safe-buffer").Buffer,v=w.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};r.StringDecoder=g;g.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var b=this.fillLast(a);if(void 0===b)return"";var c=this.lastNeed;this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):
b||""};g.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};g.prototype.text=function(a,b){var c=m(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;c=a.length-(c-this.lastNeed);a.copy(this.lastChar,0,c);return a.toString("utf8",b,c)};g.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length}},{"safe-buffer":23}],26:[function(c,u,r){(function(c){(function(){function g(a){try{if(!c.localStorage)return!1}catch(m){return!1}a=c.localStorage[a];return null==a?!1:"true"===String(a).toLowerCase()}u.exports=function(a,c){if(g("noDeprecation"))return a;var e=!1;return function(){if(!e){if(g("throwDeprecation"))throw Error(c);g("traceDeprecation")?console.trace(c):console.warn(c);e=!0}return a.apply(this,arguments)}}}).call(this)}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],27:[function(c,u,r){(function(c,g,a,m,e){function p(a,b){var d=a.styleAttrs&&a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===a.kind)!d&&b&&(a.styleAttrs||(a.styleAttrs={}),a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=b);else if(d&&delete a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],a.contents)for(var h=0;h<a.contents.length;h++)p(a.contents[h],
d||b)}function b(a){if("contents"in a){var d="styleAttrs"in a?a.styleAttrs[m.byName.ruby.qname]:null;d="span"===a.kind&&("container"===d||"textContainer"===d||"baseContainer"===d);for(var h=a.contents.length-1;0<=h;h--)!d||"styleAttrs"in a.contents[h]&&m.byName.ruby.qname in a.contents[h].styleAttrs?b(a.contents[h]):delete a.contents[h]}}function n(a,b,d,h){var f=h&&"seq"===h.timeContainer,c=0;h&&(c=f&&d?d.end:h.begin);b.begin=b.explicit_begin?b.explicit_begin+c:c;d=b.begin;h=null;if("sets"in b)for(var l=
0;l<b.sets.length;l++)n(a,b.sets[l],h,b),d="seq"===b.timeContainer?b.sets[l].end:Math.max(d,b.sets[l].end),h=b.sets[l];if(!("contents"in b))d=f?b.begin:Number.POSITIVE_INFINITY;else if("contents"in b)for(f=0;f<b.contents.length;f++)n(a,b.contents[f],h,b),d="seq"===b.timeContainer?b.contents[f].end:Math.max(d,b.contents[f].end),h=b.contents[f];b.end=null!==b.explicit_end&&null!==b.explicit_dur?Math.min(b.begin+b.explicit_dur,c+b.explicit_end):null===b.explicit_end&&null!==b.explicit_dur?b.begin+b.explicit_dur:
null!==b.explicit_end&&null===b.explicit_dur?c+b.explicit_end:d;delete b.explicit_begin;delete b.explicit_dur;delete b.explicit_end;a._registerEvent(b)}function q(a){this.node=a}function k(){this.events=[];this.head=new r;this.body=null}function r(){this.styling=new w;this.layout=new G}function w(){this.styles={};this.initials={}}function v(){this.styleRefs=this.styleAttrs=this.id=null}function u(){this.styleAttrs=null}function G(){this.regions={}}function B(a,b){this.kind="image";this.src=a;this.type=
b}function D(a){this.id=a}function F(a){this.regionID=a}function h(a){this.styleAttrs=a}function C(a){this.sets=a}function l(a){this.contents=a}function y(a,b,d){this.explicit_begin=a;this.explicit_end=b;this.explicit_dur=d}function M(){this.kind="body"}function A(){this.kind="div"}function K(){this.kind="p"}function I(){this.kind="span"}function E(){this.kind="span"}function L(){this.kind="br"}function J(){}function O(){}function f(a){var b=null;a&&(a=a.attributes["xml:id"]||a.attributes.id)&&(b=
a.value||null);return b}function d(a){return a&&"style"in a.attributes?a.attributes.style.value.split(" "):[]}function R(a,b){var d={};if(null!==a)for(var h in a.attributes)if(a.attributes.hasOwnProperty(h)){var f=a.attributes[h].uri+" "+a.attributes[h].local,c=m.byQName[f];if(void 0!==c){var l=c.parse(a.attributes[h].value);null!==l?(d[f]=l,c===m.byName.zIndex&&Q(b,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):P(b,"Cannot parse styling attribute "+f+" --\x3e "+a.attributes[h].value)}}return d}
function t(a,b,d){for(var h in a.attributes)if(a.attributes.hasOwnProperty(h)&&a.attributes[h].uri===b&&a.attributes[h].local===d)return a.attributes[h].value;return null}function S(b,d){b=t(b,a.ns_tts,"extent");if(null===b)return null;var h=b.split(" ");if(2!==h.length)return Q(d,"Malformed extent (ignoring)"),null;b=e.parseLength(h[0]);h=e.parseLength(h[1]);return h&&b?{h:h,w:b}:(Q(d,"Malformed extent values (ignoring)"),null)}function U(a,b,d){var h=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,f=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,
c=/^(\d+(?:\.\d+)?)t$/,l=/^(\d+(?:\.\d+)?)ms$/,k=/^(\d+(?:\.\d+)?)s$/,e=/^(\d+(?:\.\d+)?)h$/,g=/^(\d+(?:\.\d+)?)m$/,n,q=null;null!==(n=/^(\d+(?:\.\d+)?)f$/.exec(d))?null!==b&&(q=parseFloat(n[1])/b):null!==(n=c.exec(d))?null!==a&&(q=parseFloat(n[1])/a):null!==(n=l.exec(d))?q=parseFloat(n[1])/1E3:null!==(n=k.exec(d))?q=parseFloat(n[1]):null!==(n=e.exec(d))?q=3600*parseFloat(n[1]):null!==(n=g.exec(d))?q=60*parseFloat(n[1]):null!==(n=h.exec(d))?q=3600*parseInt(n[1])+60*parseInt(n[2])+parseFloat(n[3]):
null!==(n=f.exec(d))&&null!==b&&(q=3600*parseInt(n[1])+60*parseInt(n[2])+parseInt(n[3])+(null===n[4]?0:parseInt(n[4])/b));return q}function W(a,b,d){for(;0<b.styleRefs.length;){var h=b.styleRefs.pop();h in a.styles?(W(a,a.styles[h],d),V(a.styles[h].styleAttrs,b.styleAttrs)):P(d,"Non-existant style id referenced")}}function T(a,b,d,h){for(var f=b.length-1;0<=f;f--){var c=b[f];c in a.styles?V(a.styles[c].styleAttrs,d):P(h,"Non-existant style id referenced")}}function V(a,b){for(var d in a)a.hasOwnProperty(d)&&
(d in b||(b[d]=a[d]))}function Q(a,b){if(a&&a.warn&&a.warn(b))throw b;}function P(a,b){if(a&&a.error&&a.error(b))throw b;}function N(a,b){a&&a.fatal&&a.fatal(b);throw b;}function Y(a,b){for(var d=0,h=a.length-1,f;d<=h;){f=Math.floor((d+h)/2);var c=a[f];if(c<b)d=f+1;else if(c>b)h=f-1;else return{found:!0,index:f}}return{found:!1,index:d}}c.fromXML=function(d,h,f,c){var l=g.parser(!0,{xmlns:!0}),e=[],y=[],t=[],C=0,x=null;l.onclosetag=function(b){if(c&&"function"===typeof c.onclosetag)c.onclosetag(b);
if(e[0]instanceof J)null!==x.head&&null!==x.head.styling&&T(x.head.styling,e[0].styleRefs,e[0].styleAttrs,h),delete e[0].styleRefs;else if(e[0]instanceof w)for(var d in e[0].styles)e[0].styles.hasOwnProperty(d)&&W(e[0],e[0].styles[d],h);else if(e[0]instanceof K||e[0]instanceof I){if(1<e[0].contents.length){b=[e[0].contents[0]];for(d=1;d<e[0].contents.length;d++)e[0].contents[d]instanceof E&&b[b.length-1]instanceof E?b[b.length-1].text+=e[0].contents[d].text:b.push(e[0].contents[d]);e[0].contents=
b}e[0]instanceof I&&1===e[0].contents.length&&e[0].contents[0]instanceof E&&(e[0].text=e[0].contents[0].text,delete e[0].contents)}else if(e[0]instanceof q)if(e[0].node.uri===a.ns_tt&&"metadata"===e[0].node.local)C--;else if(0<C&&f&&"onCloseTag"in f)f.onCloseTag();t.shift();y.shift();e.shift()};l.ontext=function(a){if(c&&"function"===typeof c.ontext)c.ontext(a);if(void 0!==e[0])if(e[0]instanceof I||e[0]instanceof K){if(e[0]instanceof I){var b=e[0].styleAttrs[m.byName.ruby.qname];if("container"===
b||"textContainer"===b||"baseContainer"===b)return}b=new E;b.initFromText(x,e[0],a,y[0],t[0],h);e[0].contents.push(b)}else if(e[0]instanceof q&&0<C&&f&&"onText"in f)f.onText(a)};l.onopentag=function(b){function d(b){a.ttaf_map[b.uri]&&(b.uri=a.ttaf_map[b.uri])}if(c&&"function"===typeof c.onopentag)c.onopentag(b);var l=b.attributes["xml:space"];l?t.unshift(l.value):0===t.length?t.unshift("default"):t.unshift(t[0]);(l=b.attributes["xml:lang"])?y.unshift(l.value):0===y.length?y.unshift(""):y.unshift(y[0]);
d(b);if(b.attributes)for(var g in b.attributes)b.attributes.hasOwnProperty(g)&&d(b.attributes[g]);if(b.uri===a.ns_tt)if("tt"===b.local)null!==x&&N(h,"Two <tt> elements at ("+this.line+","+this.column+")"),x=new k,x.initFromNode(b,y[0],h),e.unshift(x);else if("head"===b.local)e[0]instanceof k||N(h,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),e.unshift(x.head);else if("styling"===b.local)e[0]instanceof r||N(h,"Parent of <styling> element is not <head> at ("+this.line+","+
this.column+")"),e.unshift(x.head.styling);else if("style"===b.local)if(e[0]instanceof w){var n=new v;n.initFromNode(b,h);n.id?x.head.styling.styles[n.id]=n:P(h,"<style> element missing @id attribute");e.unshift(n)}else e[0]instanceof J?(n=new v,n.initFromNode(b,h),V(n.styleAttrs,e[0].styleAttrs),e.unshift(n)):N(h,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===b.local)if(e[0]instanceof w){g=new u;g.initFromNode(b,h);for(n in g.styleAttrs)g.styleAttrs.hasOwnProperty(n)&&
(x.head.styling.initials[n]=g.styleAttrs[n]);e.unshift(g)}else N(h,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===b.local)e[0]instanceof r||N(h,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),e.unshift(x.head.layout);else if("region"===b.local)e[0]instanceof G||N(h,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),n=new J,n.initFromNode(x,b,y[0],h),!n.id||n.id in x.head.layout.regions?
P(h,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):x.head.layout.regions[n.id]=n,e.unshift(n);else if("body"===b.local)e[0]instanceof k||N(h,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==x.body&&N(h,"Second <body> element at "+this.line+","+this.column+")"),n=new M,n.initFromNode(x,b,y[0],h),x.body=n,e.unshift(n);else if("div"===b.local){e[0]instanceof A||e[0]instanceof M||N(h,"Parent of <div> element is not <body> or <div> at "+
this.line+","+this.column+")");n=new A;n.initFromNode(x,e[0],b,y[0],h);if(g=n.styleAttrs[m.byName.backgroundImage.qname])n.contents.push(new B(g)),delete n.styleAttrs[m.byName.backgroundImage.qname];e[0].contents.push(n);e.unshift(n)}else"image"===b.local?(e[0]instanceof A||N(h,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),n=new B,n.initFromNode(x,e[0],b,y[0],h),e[0].contents.push(n),e.unshift(n)):"p"===b.local?(e[0]instanceof A||N(h,"Parent of <p> element is not <div> at "+
this.line+","+this.column+")"),n=new K,n.initFromNode(x,e[0],b,y[0],h),e[0].contents.push(n),e.unshift(n)):"span"===b.local?(e[0]instanceof I||e[0]instanceof K||N(h,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),n=new I,n.initFromNode(x,e[0],b,y[0],t[0],h),e[0].contents.push(n),e.unshift(n)):"br"===b.local?(e[0]instanceof I||e[0]instanceof K||N(h,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),n=new L,n.initFromNode(x,e[0],b,y[0],
h),e[0].contents.push(n),e.unshift(n)):"set"===b.local?(e[0]instanceof I||e[0]instanceof K||e[0]instanceof A||e[0]instanceof M||e[0]instanceof J||e[0]instanceof L||N(h,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),n=new O,n.initFromNode(x,e[0],b,h),e[0].sets.push(n),e.unshift(n)):e.unshift(new q(b));else e.unshift(new q(b));if(e[0]instanceof q)if(b.uri===a.ns_tt&&"metadata"===b.local)C++;else if(0<C&&f&&"onOpenTag"in f){n=[];for(var p in b.attributes)b.attributes.hasOwnProperty(p)&&
(n[b.attributes[p].uri+" "+b.attributes[p].local]={uri:b.attributes[p].uri,local:b.attributes[p].local,value:b.attributes[p].value});f.onOpenTag(b.uri,b.local,n)}};l.write(d).close();delete x.head.styling.styles;d=!1;for(var X in x.head.layout.regions)if(x.head.layout.regions.hasOwnProperty(X)){d=!0;break}d||(X=J.prototype.createDefaultRegion(x,h),x.head.layout.regions[X.id]=X);for(var Z in x.head.layout.regions)x.head.layout.regions.hasOwnProperty(Z)&&n(x,x.head.layout.regions[Z],null,null);x.body&&
n(x,x.body,null,null);x.body&&b(x.body);x.body&&p(x.body);return x};k.prototype.initFromNode=function(b,d,h){var f=t(b,a.ns_ttp,"cellResolution"),c=15;var l=32;null!==f&&(f=/(\d+) (\d+)/.exec(f),null!==f?(l=parseInt(f[1]),c=parseInt(f[2])):Q(h,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new e.ComputedLength(0,1/c),w:new e.ComputedLength(1/l,0)};c=t(b,a.ns_ttp,"frameRate");f=30;null!==c&&(l=/(\d+)/.exec(c),null!==l?f=parseInt(l[1]):Q(h,"Malformed frame rate attribute (using initial value instead)"));
l=t(b,a.ns_ttp,"frameRateMultiplier");var k=1;null!==l&&(l=/(\d+) (\d+)/.exec(l),null!==l?k=parseInt(l[1])/parseInt(l[2]):Q(h,"Malformed frame rate multiplier attribute (using initial value instead)"));f*=k;k=1;l=t(b,a.ns_ttp,"tickRate");null===l?null!==c&&(k=f):(l=/(\d+)/.exec(l),null!==l?k=parseInt(l[1]):Q(h,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=f;this.tickRate=k;l=t(b,a.ns_ittp,"aspectRatio");null===l&&(l=t(b,a.ns_ttp,"displayAspectRatio"));c=null;
null!==l&&(f=/(\d+)\s+(\d+)/.exec(l),null!==f?(l=parseInt(f[1]),f=parseInt(f[2]),0!==l&&0!==f?c=l/f:P(h,"Illegal aspectRatio values (ignoring)")):P(h,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=c;c=t(b,a.ns_ttp,"timeBase");null!==c&&"media"!==c&&N(h,"Unsupported time base");b=S(b,h);null===b?this.pxLength={h:null,w:null}:("px"===b.h.unit&&"px"===b.w.unit||N(h,"Extent on TT must be in px or absent"),this.pxLength={h:new e.ComputedLength(0,1/b.h.value),w:new e.ComputedLength(1/b.w.value,
0)});this.dimensions={h:new e.ComputedLength(0,1),w:new e.ComputedLength(1,0)};this.lang=d};k.prototype._registerEvent=function(a){if(!(a.end<=a.begin)){var b=Y(this.events,a.begin);b.found||this.events.splice(b.index,0,a.begin);a.end!==Number.POSITIVE_INFINITY&&(b=Y(this.events,a.end),b.found||this.events.splice(b.index,0,a.end))}};k.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]};k.prototype.getMediaTimeEvents=function(){return this.events};v.prototype.initFromNode=
function(a,b){this.id=f(a);this.styleAttrs=R(a,b);this.styleRefs=d(a)};u.prototype.initFromNode=function(b,d){this.styleAttrs={};for(var h in b.attributes)!b.attributes.hasOwnProperty(h)||b.attributes[h].uri!==a.ns_itts&&b.attributes[h].uri!==a.ns_ebutts&&b.attributes[h].uri!==a.ns_tts||(this.styleAttrs[b.attributes[h].uri+" "+b.attributes[h].local]=b.attributes[h].value)};B.prototype.initFromNode=function(a,b,d,f,c){(this.src="src"in d.attributes?d.attributes.src.value:null)||P(c,"Invalid image@src attribute");
(this.type="type"in d.attributes?d.attributes.type.value:null)||P(c,"Invalid image@type attribute");h.prototype.initFromNode.call(this,a,b,d,c);y.prototype.initFromNode.call(this,a,b,d,c);C.prototype.initFromNode.call(this,a,b,d,c);F.prototype.initFromNode.call(this,a,b,d,c);this.lang=f};D.prototype.initFromNode=function(a,b,d,h){this.id=f(d)};F.prototype.initFromNode=function(a,b,d,h){if(b=d&&"region"in d.attributes?d.attributes.region.value:"")if(a.head.layout.regions[b])this.regionID=b;else{var f;
for(f in a.head.layout.regions)if(a.head.layout.regions.hasOwnProperty(f)&&a.head.layout.regions[f].isDefaultRegion){var c=a.head.layout.regions[f];break}c||(c=J.prototype.createDefaultRegion(a,h),a.head.layout.regions[c.id]=c);P(h,"Cannot find specified region: "+b)}};h.prototype.initFromNode=function(a,b,h,f){this.styleAttrs=R(h,f);null!==a.head&&null!==a.head.styling&&T(a.head.styling,d(h),this.styleAttrs,f)};C.prototype.initFromNode=function(a,b,d,h){this.sets=[]};l.prototype.initFromNode=function(a,
b,d,h){this.contents=[]};y.prototype.initFromNode=function(a,b,d,h){b=null;d&&"begin"in d.attributes&&(b=U(a.tickRate,a.effectiveFrameRate,d.attributes.begin.value),null===b&&Q(h,"Malformed begin value "+d.attributes.begin.value+" (using 0)"));var f=null;d&&"dur"in d.attributes&&(f=U(a.tickRate,a.effectiveFrameRate,d.attributes.dur.value),null===f&&Q(h,"Malformed dur value "+d.attributes.dur.value+" (ignoring)"));var c=null;d&&"end"in d.attributes&&(c=U(a.tickRate,a.effectiveFrameRate,d.attributes.end.value),
null===c&&Q(h,"Malformed end value (ignoring)"));this.explicit_begin=b;this.explicit_end=c;this.explicit_dur=f;(a=d&&"timeContainer"in d.attributes?d.attributes.timeContainer.value:null)&&"par"!==a?"seq"===a?h="seq":(P(h,"Illegal value of timeContainer (assuming 'par')"),h="par"):h="par";this.timeContainer=h};M.prototype.initFromNode=function(a,b,d,f){h.prototype.initFromNode.call(this,a,null,b,f);y.prototype.initFromNode.call(this,a,null,b,f);C.prototype.initFromNode.call(this,a,null,b,f);F.prototype.initFromNode.call(this,
a,null,b,f);l.prototype.initFromNode.call(this,a,null,b,f);this.lang=d};A.prototype.initFromNode=function(a,b,d,f,c){h.prototype.initFromNode.call(this,a,b,d,c);y.prototype.initFromNode.call(this,a,b,d,c);C.prototype.initFromNode.call(this,a,b,d,c);F.prototype.initFromNode.call(this,a,b,d,c);l.prototype.initFromNode.call(this,a,b,d,c);this.lang=f};K.prototype.initFromNode=function(a,b,d,f,c){h.prototype.initFromNode.call(this,a,b,d,c);y.prototype.initFromNode.call(this,a,b,d,c);C.prototype.initFromNode.call(this,
a,b,d,c);F.prototype.initFromNode.call(this,a,b,d,c);l.prototype.initFromNode.call(this,a,b,d,c);this.lang=f};I.prototype.initFromNode=function(a,b,d,f,c,e){h.prototype.initFromNode.call(this,a,b,d,e);y.prototype.initFromNode.call(this,a,b,d,e);C.prototype.initFromNode.call(this,a,b,d,e);F.prototype.initFromNode.call(this,a,b,d,e);l.prototype.initFromNode.call(this,a,b,d,e);this.space=c;this.lang=f};E.prototype.initFromText=function(a,b,d,h,f,c){y.prototype.initFromNode.call(this,a,b,null,c);this.text=
d;this.space=f;this.lang=h};L.prototype.initFromNode=function(a,b,d,h,f){F.prototype.initFromNode.call(this,a,b,d,f);y.prototype.initFromNode.call(this,a,b,d,f);this.lang=h};J.prototype.createDefaultRegion=function(a,b){var d=new J;d.id="";h.prototype.initFromNode.call(d,a,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",value:"after",prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",
uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",ebutts:"urn:ebu:tt:style",ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",
ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},b);d.sets=[];y.call(d,0,Number.POSITIVE_INFINITY,null);this.lang=a.xmllang;d.isDefaultRegion=!0;return d};J.prototype.initFromNode=function(a,b,h,f){D.prototype.initFromNode.call(this,a,null,b,f);y.prototype.initFromNode.call(this,a,null,b,f);C.prototype.initFromNode.call(this,a,null,b,f);this.styleAttrs=
R(b,f);this.styleRefs=d(b);this.lang=h};O.prototype.initFromNode=function(a,b,d,h){y.prototype.initFromNode.call(this,a,b,d,h);a=R(d,h);this.value=this.qname=null;for(var f in a)if(a.hasOwnProperty(f)){if(this.qname){P(h,"More than one style specified on set");break}this.qname=f;this.value=a[f]}}})("undefined"===typeof r?this.imscDoc={}:r,"undefined"===typeof sax?c("sax"):sax,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===
typeof imscUtils?c("./utils"):imscUtils)},{"./names":31,"./styles":32,"./utils":33,sax:24}],28:[function(c,u,r){var p=/firefox/i.test(navigator.userAgent);(function(c,a,r,e){function g(a){var b={};a=Object.entries(a);for(var h in a)if(a.hasOwnProperty(h)){var c=e.parseColor(a[h][0]),k=e.parseColor(a[h][1]);c&&k&&(b[c.toString()]=k)}return b}function b(a,c,l,e){if("region"===l.kind){var h=document.createElement("div");h.style.position="absolute"}else if("body"===l.kind)h=document.createElement("div");
else if("div"===l.kind)h=document.createElement("div");else if("image"===l.kind){if(h=document.createElement("img"),null!==a.imgResolver&&null!==l.src){var g=a.imgResolver(l.src,h);g&&(h.src=g);h.height=a.regionH;h.width=a.regionW}}else if("p"===l.kind)h=document.createElement("p");else if("span"===l.kind)if("container"===l.styleAttrs[r.byName.ruby.qname])h=document.createElement("ruby"),a.ruby=!0;else if("base"===l.styleAttrs[r.byName.ruby.qname])h=document.createElement("rb");else if("text"===l.styleAttrs[r.byName.ruby.qname])h=
document.createElement("rt");else if("baseContainer"===l.styleAttrs[r.byName.ruby.qname])h=document.createElement("rbc");else if("textContainer"===l.styleAttrs[r.byName.ruby.qname])h=document.createElement("rtc");else{if("delimiter"===l.styleAttrs[r.byName.ruby.qname])return;h=document.createElement("span")}else"br"===l.kind&&(h=document.createElement("br"));if(h){!l.lang||"region"!==l.kind&&l.lang===e.lang||(h.lang=l.lang);c.appendChild(h);h.style.margin="0";if("region"===l.kind)if(c=l.styleAttrs[r.byName.writingMode.qname],
"lrtb"===c||"lr"===c)a.ipd="lr",a.bpd="tb";else if("rltb"===c||"rl"===c)a.ipd="rl",a.bpd="tb";else if("tblr"===c)a.ipd="tb",a.bpd="lr";else{if("tbrl"===c||"tb"===c)a.ipd="tb",a.bpd="rl"}else"p"===l.kind&&"tb"===a.bpd&&(a.ipd="ltr"===l.styleAttrs[r.byName.direction.qname]?"lr":"rl");for(c=0;c<u.length;c++)e=u[c],g=l.styleAttrs[e.qname],void 0!==g&&null!==e.map&&e.map(a,h,l,g);c=h;(e=l.styleAttrs[r.byName.linePadding.qname])&&!e.isZero()&&(g=e.multiply(e.toUsedLength(a.w,a.h),a.options.sizeAdjust),
0<g&&(g=Math.ceil(g)+"px","tb"===a.bpd?(c.style.paddingLeft=g,c.style.paddingRight=g):(c.style.paddingTop=g,c.style.paddingBottom=g),a.removePaddingElement=c,a.lp=e));(e=l.styleAttrs[r.byName.multiRowAlign.qname])&&"auto"!==e&&(c=document.createElement("span"),c.style.display="inline-block",c.style.textAlign=e,h.appendChild(c),a.mra=e);(e=l.styleAttrs[r.byName.rubyReserve.qname])&&"none"!==e[0]&&(a.rubyReserve=e);l.styleAttrs[r.byName.fillLineGap.qname]&&(a.flg=!0);if("span"===l.kind&&l.text)if((e=
l.styleAttrs[r.byName.textEmphasis.qname])&&"none"!==e.style&&(a.textEmphasis=!0),r.byName.textCombine.qname in l.styleAttrs&&"all"===l.styleAttrs[r.byName.textCombine.qname])h.textContent=l.text,e&&w(a,h,l,e);else{g="";for(var y=0;y<l.text.length;y++){g+=l.text.charAt(y);var m=l.text.charCodeAt(y);if(55296>m||56319<m||y===l.text.length-1)m=document.createElement("span"),m.textContent=g,e&&w(a,m,l,e),h.appendChild(m),g="",m._isd_element=l}}if("contents"in l)for(e=0;e<l.contents.length;e++)b(a,c,l.contents[e],
l);e=[];if("p"===l.kind){x(a,c,e,null);if(a.rubyReserve){for(g=0;g<e.length;g++){y=document.createElement("ruby");m=document.createElement("rb");m.textContent="\u200b";y.appendChild(m);var C=a.rubyReserve[1].toUsedLength(a.w,a.h)+"px";if("both"===a.rubyReserve[0]||"outside"===a.rubyReserve[0]&&1==e.length){m=document.createElement("rtc");m.style[B]=G?"after":"under";m.textContent="\u200b";m.style.fontSize=C;var v=document.createElement("rtc");v.style[B]=G?"before":"over";v.textContent="\u200b";v.style.fontSize=
C;y.appendChild(m);y.appendChild(v)}else m=document.createElement("rtc"),m.textContent="\u200b",m.style.fontSize=C,m.style[B]="after"===a.rubyReserve[0]||"outside"===a.rubyReserve[0]&&0<g?G?"after":"tb"===a.bpd||"rl"===a.bpd?"under":"over":G?"before":"tb"===a.bpd||"rl"===a.bpd?"over":"under",y.appendChild(m);m=null;for(v=0;v<e[g].rbc.length;v++)if("ruby"===e[g].rbc[v].localName){m=e[g].rbc[v];for(v=0;v<m.style.length;v++)y.style.setProperty(m.style.item(v),m.style.getPropertyValue(m.style.item(v)));
break}m=m||e[g].elements[0].node;m.parentElement.insertBefore(y,m)}a.rubyReserve=null}if(a.ruby||a.rubyReserve){for(g=0;g<e.length;g++)for(y=0;y<e[g].rbc.length;y++)e[g].rbc[y].style[B]||(e[g].rbc[y].style[B]=G?0===g?"before":"after":"tb"===a.bpd?0===g?"over":"under":"rl"===a.bpd?0===g?"over":"under":0===g?"under":"over");a.ruby=null}if(a.textEmphasis){for(g=0;g<e.length;g++)for(y=0;y<e[g].te.length;y++)e[g].te[y].style[F]&&"none"!==e[g].te[y].style[F]||(e[g].te[y].style[F]="tb"===a.bpd?0===g?"left over":
"left under":"rl"===a.bpd?0===g?"right under":"left under":0===g?"left under":"right under");a.textEmphasis=null}if(a.mra){for(g=0;g<e.length-1;g++)m=e[g].elements.length,0!==m&&!1===e[g].br&&(y=document.createElement("br"),m=e[g].elements[m-1].node,m.parentElement.insertBefore(y,m.nextSibling));a.mra=null}if(a.lp){g=a.lp.multiply(a.lp.toUsedLength(a.w,a.h),a.options.sizeAdjust);if(null!==e)for(y=0;y<e.length;y++)if(m=Math.ceil(g)+"px",v="-"+Math.ceil(g)+"px",0!==e[y].elements.length){C=e[y].elements[e[y].start_elem];
var z=e[y].elements[e[y].end_elem];if(C===z){var D=C.node.getBoundingClientRect();if(0==D.width||0==D.height)continue}"lr"===a.ipd?(C.node.style.marginLeft=v,C.node.style.paddingLeft=m):"rl"===a.ipd?(C.node.style.marginRight=v,C.node.style.paddingRight=m):"tb"===a.ipd&&(C.node.style.marginTop=v,C.node.style.paddingTop=m);"lr"===a.ipd?(p||(z.node.style.marginRight=v),z.node.style.paddingRight=m):"rl"===a.ipd?(p||(z.node.style.marginLeft=v),z.node.style.paddingLeft=m):"tb"===a.ipd&&(z.node.style.marginBottom=
v,z.node.style.paddingBottom=m)}"tb"===a.bpd?(a.removePaddingElement.style.paddingLeft=0,a.removePaddingElement.style.paddingRight=0):(a.removePaddingElement.style.paddingTop=0,a.removePaddingElement.style.paddingBottom=0);a.lp=null}for(g=0;g<e.length;g++)for(y=e[g],m=1;m<y.elements.length;){v=y.elements[m-1].node;C=y.elements[m].node;if("SPAN"===v.tagName&&"SPAN"===C.tagName&&v._isd_element===C._isd_element){v.textContent+=C.textContent;for(z=0;z<C.style.length;z++)if(D=C.style[z],0<=D.indexOf("border")||
0<=D.indexOf("padding")||0<=D.indexOf("margin"))v.style[D]=C.style[D];C.parentElement.removeChild(C);v=!0}else v=!1;v?y.elements.splice(m,1):m++}g=[];for(v=0;v<e.length;v++)for(C=0;C<e[v].elements.length;C++)if(y=e[v].elements[C].node,m=n(y,g,!1))y.style.backgroundColor=m;for(y=0;y<g.length;y++)g[y].style.backgroundColor="";if(a.flg){y=k(c.getBoundingClientRect(),a);g=y.before;y=y.after;m=Math.sign(y-g);for(v=0;v<=e.length;v++){C=0===v?Math.round(g):v===e.length?Math.round(y):Math.round((e[v-1].after+
e[v].before)/2);if(0<v&&e[v-1])for(D=0;D<e[v-1].elements.length;D++){var f=e[v-1].elements[D];z=m*(C-f.after)+"px";"lr"===a.bpd?f.node.style.paddingRight=z:"rl"===a.bpd?f.node.style.paddingLeft=z:"tb"===a.bpd&&(f.node.style.paddingBottom=z)}if(v<e.length)for(D=0;D<e[v].elements.length;D++)f=e[v].elements[D],z=m*(f.before-C)+"px","lr"===a.bpd?f.node.style.paddingLeft=z:"rl"===a.bpd?f.node.style.paddingRight=z:"tb"===a.bpd&&(f.node.style.paddingTop=z)}a.flg=null}}"region"===l.kind&&"tb"===a.bpd&&a.enableRollUp&&
0<l.contents.length&&"after"===l.styleAttrs[r.byName.displayAlign.qname]&&(x(a,c,e,null),l=new q(""===l.id?"_":l.id,e),a.currentISDState[l.id]=l,a.previousISDState&&l.id in a.previousISDState&&0<a.previousISDState[l.id].plist.length&&1<l.plist.length&&l.plist[l.plist.length-2].text===a.previousISDState[l.id].plist[a.previousISDState[l.id].plist.length-1].text&&(a=h.firstElementChild,l=l.plist[l.plist.length-1].after-l.plist[l.plist.length-1].before,a.style.bottom="-"+l+"px",a.style.transition="transform 0.4s",
a.style.position="relative",a.style.transform="translateY(-"+l+"px)"))}else if(a=a.errorHandler,l="Error processing ISD element kind: "+l.kind,a&&a.error&&a.error(l))throw l;}function n(a,b,c){if(a.style.backgroundColor)return c&&!b.includes(a)&&b.push(a),a.style.backgroundColor;if("SPAN"===a.parentElement.nodeName)return n(a.parentElement,b,!0)}function q(a,b){this.id=a;this.plist=b}function k(a,b){var c={before:null,after:null,start:null,end:null};"tb"===b.bpd?(c.before=a.top,c.after=a.bottom,"lr"===
b.ipd?(c.start=a.left,c.end=a.right):(c.start=a.right,c.end=a.left)):"lr"===b.bpd?(c.before=a.left,c.after=a.right,c.start=a.top,c.end=a.bottom):"rl"===b.bpd&&(c.before=a.right,c.after=a.left,c.start=a.top,c.end=a.bottom);return c}function x(a,b,c,e){if("rt"!==b.localName&&"rtc"!==b.localName)if(e=b.style.backgroundColor||e,0===b.childElementCount)if("span"===b.localName||"rb"===b.localName){var h=b.getBoundingClientRect();a=k(h,a);if(!(h=0===c.length)){h=a.before;var l=a.after,g=c[c.length-1].before,
n=c[c.length-1].after;h=!(l<n&&h>g||n<=l&&g>=h)}h?c.push({before:a.before,after:a.after,start:a.start,end:a.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(h=Math.sign(a.after-a.before),l=Math.sign(a.end-a.start),0>h*(a.before-c[c.length-1].before)&&(c[c.length-1].before=a.before),0<h*(a.after-c[c.length-1].after)&&(c[c.length-1].after=a.after),0>l*(a.start-c[c.length-1].start)&&(c[c.length-1].start=a.start,c[c.length-1].start_elem=c[c.length-1].elements.length),0<l*(a.end-c[c.length-
1].end)&&(c[c.length-1].end=a.end,c[c.length-1].end_elem=c[c.length-1].elements.length));c[c.length-1].text+=b.textContent;c[c.length-1].elements.push({node:b,bgcolor:e,before:a.before,after:a.after})}else"br"===b.localName&&0!==c.length&&(c[c.length-1].br=!0);else for(b=b.firstChild;b;)b.nodeType===Node.ELEMENT_NODE&&(x(a,b,c,e),"ruby"===b.localName||"rtc"===b.localName?0<c.length&&c[c.length-1].rbc.push(b):"span"===b.localName&&b.style[D]&&"none"!==b.style[D]&&0<c.length&&c[c.length-1].te.push(b)),
b=b.nextSibling}function w(a,b,c,e){"none"!==e.style&&(b.style[D]="auto"===e.style?"filled":e.style+" "+e.symbol,"before"===e.position||"after"===e.position)&&(b.style[F]="tb"===a.bpd?"before"===e.position?"left over":"left under":"rl"===a.bpd?"before"===e.position?"right under":"left under":"before"===e.position?"left under":"right under")}function m(a,b){this.qname=a;this.map=b}c.render=function(a,c,e,k,n,q,p,m,r,w){k=k||c.clientHeight;var h=n||c.clientWidth;null!==a.aspectRatio&&(n=k*a.aspectRatio,
n>h?k=Math.round(h/a.aspectRatio):h=n);n=document.createElement("div");n.style.position="relative";n.style.width=h+"px";n.style.height=k+"px";n.style.margin="auto";n.style.top=0;n.style.bottom=0;n.style.left=0;n.style.right=0;n.style.zIndex=0;e={h:k,w:h,regionH:null,regionW:null,imgResolver:e,displayForcedOnlyMode:q||!1,isd:a,errorHandler:p,previousISDState:m,enableRollUp:r||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null,options:Object.assign({},
w)||{}};e.options.colorAdjust&&(e.options.colorAdjust=g(e.options.colorAdjust));q=["region","body","div","p","span"];for(var l in q)q.hasOwnProperty(l)&&(p=q[l]+"BackgroundColorAdjust",e.options[p]&&(e.options[p]=g(e.options[p])));c.appendChild(n);if("contents"in a)for(c=0;c<a.contents.length;c++)b(e,n,a.contents[c],a);return e.currentISDState};var u=[new m("http://www.w3.org/ns/ttml#styling backgroundColor",function(a,b,c,e){(c=(c=a.options[c.kind+"BackgroundColorAdjust"])&&c[e.toString()])&&(e=
c);c=e[3];0!==c&&(void 0!=a.options.backgroundOpacityScale&&(c*=a.options.backgroundOpacityScale),b.style.backgroundColor="rgba("+e[0].toString()+","+e[1].toString()+","+e[2].toString()+","+(c/255).toString()+")")}),new m("http://www.w3.org/ns/ttml#styling color",function(a,b,c,e){c=a.options.colorOpacityScale||1;a=a.options.colorAdjust;void 0!=a&&(a=a[e.toString()])&&(e=a);b.style.color="rgba("+e[0].toString()+","+e[1].toString()+","+e[2].toString()+","+(c*e[3]/255).toString()+")"}),new m("http://www.w3.org/ns/ttml#styling direction",
function(a,b,c,e){b.style.direction=e}),new m("http://www.w3.org/ns/ttml#styling display",function(a,b,c,e){}),new m("http://www.w3.org/ns/ttml#styling displayAlign",function(a,b,c,e){b.style.display="flex";b.style.flexDirection="column";"before"===e?b.style.justifyContent="flex-start":"center"===e?b.style.justifyContent="center":"after"===e&&(b.style.justifyContent="flex-end")}),new m("http://www.w3.org/ns/ttml#styling extent",function(a,b,c,e){a.regionH=e.h.toUsedLength(a.w,a.h);a.regionW=e.w.toUsedLength(a.w,
a.h);var h=e=0;if(c=c.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])e=c[0].toUsedLength(a.w,a.h)+c[2].toUsedLength(a.w,a.h),h=c[1].toUsedLength(a.w,a.h)+c[3].toUsedLength(a.w,a.h);b.style.height=a.regionH-e+"px";b.style.width=a.regionW-h+"px"}),new m("http://www.w3.org/ns/ttml#styling fontFamily",function(a,b,c,e){c=[];a.options.fontFamily&&(e=a.options.fontFamily.split(","));for(a=0;a<e.length;a++)e[a]=e[a].trim(),"monospaceSerif"===e[a]?(c.push("Courier New"),c.push('"Liberation Mono"'),
c.push("Courier"),c.push("monospace")):"proportionalSansSerif"===e[a]||"default"===e[a]?(c.push("Arial"),c.push("Helvetica"),c.push('"Liberation Sans"'),c.push("sans-serif")):"monospace"===e[a]?c.push("monospace"):"sansSerif"===e[a]?c.push("sans-serif"):"serif"===e[a]?c.push("serif"):"monospaceSansSerif"===e[a]?(c.push("Consolas"),c.push("monospace")):"proportionalSerif"===e[a]?c.push("serif"):c.push(e[a]);if(0<c.length){e=[c[0]];for(a=1;a<c.length;a++)-1==e.indexOf(c[a])&&e.push(c[a]);c=e}b.style.fontFamily=
c.join(",")}),new m("http://www.w3.org/ns/ttml#styling shear",function(a,b,c,e){0!==e&&(c=-.9*e,b.style.transform="tb"===a.bpd?"skewX("+c+"deg)":"skewY("+c+"deg)")}),new m("http://www.w3.org/ns/ttml#styling fontSize",function(a,b,c,e){b.style.fontSize=e.multiply(e.toUsedLength(a.w,a.h),a.options.sizeAdjust)+"px"}),new m("http://www.w3.org/ns/ttml#styling fontStyle",function(a,b,c,e){b.style.fontStyle=e}),new m("http://www.w3.org/ns/ttml#styling fontWeight",function(a,b,c,e){b.style.fontWeight=e}),
new m("http://www.w3.org/ns/ttml#styling lineHeight",function(a,b,c,e){b.style.lineHeight="normal"===e?"normal":e.multiply(e.multiply(e.toUsedLength(a.w,a.h),a.options.sizeAdjust),a.options.lineHeightAdjust)+"px"}),new m("http://www.w3.org/ns/ttml#styling opacity",function(a,b,c,e){c=e;void 0!=a.options.regionOpacityScale&&(c*=a.options.regionOpacityScale);b.style.opacity=c}),new m("http://www.w3.org/ns/ttml#styling origin",function(a,b,c,e){b.style.top=e.h.toUsedLength(a.w,a.h)+"px";b.style.left=
e.w.toUsedLength(a.w,a.h)+"px"}),new m("http://www.w3.org/ns/ttml#styling overflow",function(a,b,c,e){b.style.overflow=e}),new m("http://www.w3.org/ns/ttml#styling padding",function(a,b,c,e){c=[];c[0]=e[0].toUsedLength(a.w,a.h)+"px";c[1]=e[3].toUsedLength(a.w,a.h)+"px";c[2]=e[2].toUsedLength(a.w,a.h)+"px";c[3]=e[1].toUsedLength(a.w,a.h)+"px";b.style.padding=c.join(" ")}),new m("http://www.w3.org/ns/ttml#styling position",function(a,b,c,e){b.style.top=e.h.toUsedLength(a.w,a.h)+"px";b.style.left=e.w.toUsedLength(a.w,
a.h)+"px"}),new m("http://www.w3.org/ns/ttml#styling rubyAlign",function(a,b,c,e){b.style.rubyAlign="spaceAround"===e?"space-around":"center"}),new m("http://www.w3.org/ns/ttml#styling rubyPosition",function(a,b,c,e){if("before"===e||"after"===e)b.parentElement.style[B]=G?e:"tb"===a.bpd?"before"===e?"over":"under":"rl"===a.bpd?"before"===e?"over":"under":"before"===e?"under":"over"}),new m("http://www.w3.org/ns/ttml#styling showBackground",null),new m("http://www.w3.org/ns/ttml#styling textAlign",
function(a,b,c,e){b.style.textAlign="start"===e?"rl"===a.ipd?"right":"left":"end"===e?"rl"===a.ipd?"left":"right":e}),new m("http://www.w3.org/ns/ttml#styling textDecoration",function(a,b,c,e){b.style.textDecoration=e.join(" ").replace("lineThrough","line-through")}),new m("http://www.w3.org/ns/ttml#styling textOutline",function(a,b,c,e){}),new m("http://www.w3.org/ns/ttml#styling textShadow",function(a,b,c,k){c=c.styleAttrs[r.byName.textOutline.qname];var h=a.options.textOutline;if(h)if("none"===
h)c=h;else{var g={};h=h.split(" ");if(0!==h.length&&2>=h.length){var l=e.parseColor(h[0]);g.color=l;null!==l&&h.shift();1===h.length&&(h=e.parseLength(h[0]))&&(g.thickness=h,c=g)}}if("none"===k&&"none"===c)b.style.textShadow="";else{g=[];"none"!==c&&(c="rgba("+c.color[0].toString()+","+c.color[1].toString()+","+c.color[2].toString()+","+(c.color[3]/255).toString()+")",g.push("1px 1px 1px "+c),g.push("-1px 1px 1px "+c),g.push("1px -1px 1px "+c),g.push("-1px -1px 1px "+c));if("none"!==k)for(c=0;c<k.length;c++)g.push(k[c].x_off.toUsedLength(a.w,
a.h)+"px "+k[c].y_off.toUsedLength(a.w,a.h)+"px "+k[c].b_radius.toUsedLength(a.w,a.h)+"px rgba("+k[c].color[0].toString()+","+k[c].color[1].toString()+","+k[c].color[2].toString()+","+(k[c].color[3]/255).toString()+")");b.style.textShadow=g.join(",")}}),new m("http://www.w3.org/ns/ttml#styling textCombine",function(a,b,c,e){b.style.textCombineUpright=e}),new m("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,b,c,e){}),new m("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,b,c,
e){b.style.unicodeBidi="bidiOverride"===e?"bidi-override":e}),new m("http://www.w3.org/ns/ttml#styling visibility",function(a,b,c,e){b.style.visibility=e}),new m("http://www.w3.org/ns/ttml#styling wrapOption",function(a,b,c,e){b.style.whiteSpace="wrap"===e?"preserve"===c.space?"pre-wrap":"normal":"preserve"===c.space?"pre":"noWrap"}),new m("http://www.w3.org/ns/ttml#styling writingMode",function(a,b,c,e){if("lrtb"===e||"lr"===e)b.style.writingMode="horizontal-tb";else if("rltb"===e||"rl"===e)b.style.writingMode=
"horizontal-tb";else if("tblr"===e)b.style.writingMode="vertical-lr";else if("tbrl"===e||"tb"===e)b.style.writingMode="vertical-rl"}),new m("http://www.w3.org/ns/ttml#styling zIndex",function(a,b,c,e){b.style.zIndex=e}),new m("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(a,b,c,e){a.displayForcedOnlyMode&&!1===e&&(b.style.visibility="hidden")})];for(c=0;c<u.length;c++);var G="webkitRubyPosition"in window.getComputedStyle(document.documentElement),B=G?"webkitRubyPosition":
"rubyPosition",D="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",F="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof r?this.imscHTML={}:r,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":31,
"./styles":32,"./utils":33}],29:[function(c,u,r){(function(c,g,a,m){function e(c,g,q,x,u,z,F,h,C){if(g<F.begin||g>=F.end)return null;z="regionID"in F&&""!==F.regionID?F.regionID:z;if(null!==u&&z!==q.id&&(!("contents"in F)||"contents"in F&&0===F.contents.length||""!==z))return null;var l=new k(F);if("sets"in F)for(var w=0;w<F.sets.length;w++)g<F.sets[w].begin||g>=F.sets[w].end||(l.styleAttrs[F.sets[w].qname]=F.sets[w].value);w={};for(var v in l.styleAttrs)if(l.styleAttrs.hasOwnProperty(v)&&(w[v]=!0,
"region"===l.kind&&v===a.byName.writingMode.qname&&!(a.byName.direction.qname in l.styleAttrs))){var A=l.styleAttrs[v];if("lrtb"===A||"lr"===A)l.styleAttrs[a.byName.direction.qname]="ltr";else if("rltb"===A||"rl"===A)l.styleAttrs[a.byName.direction.qname]="rtl"}if(null!==u)for(v=0;v<a.all.length;v++)if(A=a.all[v],A.qname===a.byName.textDecoration.qname){var B=u.styleAttrs[A.qname],D=l.styleAttrs[A.qname],E=[];void 0===D?E=B:-1===D.indexOf("none")?((-1===D.indexOf("noUnderline")&&-1!==B.indexOf("underline")||
-1!==D.indexOf("underline"))&&E.push("underline"),(-1===D.indexOf("noLineThrough")&&-1!==B.indexOf("lineThrough")||-1!==D.indexOf("lineThrough"))&&E.push("lineThrough"),(-1===D.indexOf("noOverline")&&-1!==B.indexOf("overline")||-1!==D.indexOf("overline"))&&E.push("overline")):E.push("none");l.styleAttrs[A.qname]=E}else A.qname!==a.byName.fontSize.qname||A.qname in l.styleAttrs||"span"!==l.kind||"textContainer"!==l.styleAttrs[a.byName.ruby.qname]?A.qname!==a.byName.fontSize.qname||A.qname in l.styleAttrs||
"span"!==l.kind||"text"!==l.styleAttrs[a.byName.ruby.qname]?A.inherit&&A.qname in u.styleAttrs&&!(A.qname in l.styleAttrs)&&(l.styleAttrs[A.qname]=u.styleAttrs[A.qname]):(B=u.styleAttrs[a.byName.fontSize.qname],l.styleAttrs[A.qname]="textContainer"===u.styleAttrs[a.byName.ruby.qname]?B:new m.ComputedLength(.5*B.rw,.5*B.rh)):(B=u.styleAttrs[a.byName.fontSize.qname],l.styleAttrs[A.qname]=new m.ComputedLength(.5*B.rw,.5*B.rh));for(v=0;v<a.all.length;v++)if(A=a.all[v],!(A.qname in l.styleAttrs||A.qname===
a.byName.position.qname&&a.byName.origin.qname in l.styleAttrs||A.qname===a.byName.origin.qname&&a.byName.position.qname in l.styleAttrs)&&(B=c.head.styling.initials[A.qname]||A.initial,null!==B&&("region"===l.kind||!1===A.inherit&&null!==B)))if(B=A.parse(B),null!==B)l.styleAttrs[A.qname]=B,w[A.qname]=!0;else if(A="Invalid initial value for '"+A.qname+"' on element '"+l.kind,h&&h.error&&h.error(A))throw A;for(v=0;v<a.all.length;v++)if(A=a.all[v],A.qname in w&&null!==A.compute)if(B=A.compute(c,u,l,
l.styleAttrs[A.qname],C),null!==B)l.styleAttrs[A.qname]=B;else if(l.styleAttrs[A.qname]=A.compute(c,u,l,A.parse(A.initial),C),A="Style '"+A.qname+"' on element '"+l.kind+"' cannot be computed",h&&h.error&&h.error(A))throw A;if("none"===l.styleAttrs[a.byName.display.qname])return null;w=null;null===u?w=null===x?[]:[x]:"contents"in F&&(w=F.contents);for(u=0;null!==w&&u<w.length;u++)F=e(c,g,q,x,l,z,w[u],h,C),null!==F&&l.contents.push(F.element);for(var G in l.styleAttrs)l.styleAttrs.hasOwnProperty(G)&&
(c=!1,"span"===l.kind&&(g=l.styleAttrs[a.byName.ruby.qname],(c=("container"===g||"textContainer"===g||"baseContainer"===g)&&-1!==r.indexOf(G))||(c="container"!==g&&G===a.byName.rubyAlign.qname),c||(c=!("textContainer"===g||"text"===g)&&G===a.byName.rubyPosition.qname)),c||(g=a.byQName[G],"applies"in g&&(c=-1===g.applies.indexOf(l.kind))),c&&delete l.styleAttrs[G]);G=l.styleAttrs[a.byName.ruby.qname];if("p"===l.kind||"span"===l.kind&&("textContainer"===G||"text"===G))G=[],b(l,G),p(G),n(l);return"div"===
l.kind&&a.byName.backgroundImage.qname in l.styleAttrs||"br"===l.kind||"image"===l.kind||"contents"in l&&0<l.contents.length||"span"===l.kind&&null!==l.text||"region"===l.kind&&"always"===l.styleAttrs[a.byName.showBackground.qname]?{region_id:z,element:l}:null}function p(a){function b(a){return"br"===a.kind||/[\r\n\t ]$/.test(a.text)}function c(a){return"br"===a.kind||"preserve"===a.space&&/^[\r\n]/.test(a.text)}for(var e,g=0;g<a.length;)if(e=a[g],"br"===e.kind||"preserve"===e.space)g++;else{var k=
e.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(k)&&(0===g||b(a[g-1]))&&(k=k.substring(1));e.text=k;0===k.length?a.splice(g,1):g++}for(g=0;g<a.length;g++)e=a[g],"br"===e.kind||"preserve"===e.space?g++:/[ ]$/.test(e.text)&&(g===a.length-1||c(a[g+1]))&&(e.text=e.text.slice(0,-1))}function b(c,e){if("contents"in c)for(var g=0;g<c.contents.length;g++){var k=c.contents[g],n=k.styleAttrs[a.byName.ruby.qname];if("span"!==k.kind||"textContainer"!==n&&"text"!==n)"contents"in k?b(k,e):("span"===k.kind&&0!==k.text.length||
"br"===k.kind)&&e.push(k)}}function n(a){if("br"===a.kind)return!1;if("text"in a)return 0===a.text.length;if("contents"in a){for(var b=a.contents.length;b--;)n(a.contents[b])&&a.contents.splice(b,1);return 0===a.contents.length}}function q(a){this.contents=[];this.aspectRatio=a.aspectRatio;this.lang=a.lang}function k(a){this.kind=a.kind||"region";this.lang=a.lang;a.id&&(this.id=a.id);this.styleAttrs={};for(var b in a.styleAttrs)a.styleAttrs.hasOwnProperty(b)&&(this.styleAttrs[b]=a.styleAttrs[b]);
"src"in a&&(this.src=a.src);"type"in a&&(this.type=a.type);if("text"in a)this.text=a.text;else if("region"===this.kind||"contents"in a)this.contents=[];"space"in a&&(this.space=a.space)}c.generateISD=function(b,c,g){function k(a,b){function c(b){return!(a<b.begin||a>=b.end)}if(b.contents){var e={},g;for(g in b)b.hasOwnProperty(g)&&(e[g]=b[g]);e.contents=[];b.contents.filter(c).forEach(function(b){b=k(a,b);b.regionID&&(h[b.regionID]=!0);null!==b&&e.contents.push(b)});return e}return b}var n=new q(b),
p={},m={},h={};m=b.head.styling.initials[a.byName.showBackground.qname];var r=b.head.styling.initials[a.byName.backgroundColor.qname];for(v in b.head.layout.regions)if(b.head.layout.regions.hasOwnProperty(v)){var l=b.head.layout.regions[v],x=l.styleAttrs[a.byName.showBackground.qname]||m,w=l.styleAttrs[a.byName.backgroundColor.qname]||r;h[l.id]=("always"===x||void 0===x)&&void 0!==w&&!(c<l.begin||c>=l.end)}b.body&&b.body.regionID&&(h[b.body.regionID]=!0);m=null!==b.body?k(c,b.body):null;void 0!==
h[""]&&(h[""]=!0);for(var u in h)if(h[u]){var v=e(b,c,b.head.layout.regions[u],m,null,"",b.head.layout.regions[u],g,p);null!==v&&n.contents.push(v.element)}return n};var r=[a.byName.color.qname,a.byName.textCombine.qname,a.byName.textDecoration.qname,a.byName.textEmphasis.qname,a.byName.textOutline.qname,a.byName.textShadow.qname]})("undefined"===typeof r?this.imscISD={}:r,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===
typeof imscUtils?c("./utils"):imscUtils)},{"./names":31,"./styles":32,"./utils":33}],30:[function(c,u,r){r.generateISD=c("./isd").generateISD;r.fromXML=c("./doc").fromXML;r.renderHTML=c("./html").render},{"./doc":27,"./html":28,"./isd":29}],31:[function(c,u,r){c="undefined"===typeof r?this.imscNames={}:r;c.ns_tt="http://www.w3.org/ns/ttml";c.ns_tts="http://www.w3.org/ns/ttml#styling";c.ns_ttp="http://www.w3.org/ns/ttml#parameter";c.ns_xml="http://www.w3.org/XML/1998/namespace";c.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";
c.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";c.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";c.ns_ebutts="urn:ebu:tt:style";c.ttaf_map={"http://www.w3.org/2006/10/ttaf1":c.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":c.ns_tts,"http://www.w3.org/2006/10/ttaf1#parameter":c.ns_ttp}},{}],32:[function(c,u,r){(function(c,g,a){function m(a,c,e,g,m,p,r,u){this.name=c;this.ns=a;this.qname=a+" "+c;this.inherit=m;this.animatable=p;this.initial=e;this.applies=g;this.parse=
r;this.compute=u}c.all=[new m(g.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,a.parseColor,null),new m(g.ns_tts,"color","white",["span"],!0,!0,a.parseColor,null),new m(g.ns_tts,"direction","ltr",["p","span"],!0,!0,function(a){return a},null),new m(g.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(a){return a},null),new m(g.ns_tts,"displayAlign","before",["region"],!1,!0,function(a){return a},null),new m(g.ns_tts,"extent","auto",["tt","region"],
!1,!0,function(b){if("auto"===b)return b;var c=b.split(" ");if(2!==c.length)return null;b=a.parseLength(c[0]);return(c=a.parseLength(c[1]))&&b?{h:c,w:b}:null},function(b,c,e,g,m){if("auto"===g)c=new a.ComputedLength(0,1);else if(c=a.toComputedLength(g.h.value,g.h.unit,null,b.dimensions.h,null,b.pxLength.h),null===c)return null;if("auto"===g)b=new a.ComputedLength(1,0);else if(b=a.toComputedLength(g.w.value,g.w.unit,null,b.dimensions.w,null,b.pxLength.w),null===b)return null;return{h:c,w:b}}),new m(g.ns_tts,
"fontFamily","default",["span","p"],!0,!0,function(a){a=a.split(",");for(var b=[],c=0;c<a.length;c++)"'"!==a[c].charAt(0)&&'"'!==a[c].charAt(0)?"default"===a[c]?b.push("monospaceSerif"):b.push(a[c]):b.push(a[c]);return b},null),new m(g.ns_tts,"shear","0%",["p"],!0,!0,a.parseLength,function(a,c,e,g){if("%"===g.unit)a=100<Math.abs(g.value)?100*Math.sign(g.value):g.value;else return null;return a}),new m(g.ns_tts,"fontSize","1c",["span","p"],!0,!0,a.parseLength,function(b,e,g,k,m){return a.toComputedLength(k.value,
k.unit,null!==e?e.styleAttrs[c.byName.fontSize.qname]:b.cellLength.h,null!==e?e.styleAttrs[c.byName.fontSize.qname]:b.cellLength.h,b.cellLength.h,b.pxLength.h)}),new m(g.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(a){return a},null),new m(g.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(a){return a},null),new m(g.ns_tts,"lineHeight","normal",["p"],!0,!0,function(b){return"normal"===b?b:a.parseLength(b)},function(b,e,g,k,m){if("normal"===k)b=k;else if(b=a.toComputedLength(k.value,
k.unit,g.styleAttrs[c.byName.fontSize.qname],g.styleAttrs[c.byName.fontSize.qname],b.cellLength.h,b.pxLength.h),null===b)return null;return b}),new m(g.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new m(g.ns_tts,"origin","auto",["region"],!1,!0,function(b){if("auto"===b)return b;var c=b.split(" ");if(2!==c.length)return null;b=a.parseLength(c[0]);return(c=a.parseLength(c[1]))&&b?{h:c,w:b}:null},function(b,c,e,g,m){if("auto"===g)c=new a.ComputedLength(0,0);else if(c=a.toComputedLength(g.h.value,
g.h.unit,null,b.dimensions.h,null,b.pxLength.h),null===c)return null;if("auto"===g)b=new a.ComputedLength(0,0);else if(b=a.toComputedLength(g.w.value,g.w.unit,null,b.dimensions.w,null,b.pxLength.w),null===b)return null;return{h:c,w:b}}),new m(g.ns_tts,"overflow","hidden",["region"],!1,!0,function(a){return a},null),new m(g.ns_tts,"padding","0px",["region"],!1,!0,function(b){b=b.split(" ");if(4<b.length)return null;for(var c=[],e=0;e<b.length;e++){var g=a.parseLength(b[e]);if(!g)return null;c.push(g)}return c},
function(b,e,g,k,m){if(1===k.length)e=[k[0],k[0],k[0],k[0]];else if(2===k.length)e=[k[0],k[1],k[0],k[1]];else if(3===k.length)e=[k[0],k[1],k[2],k[1]];else if(4===k.length)e=[k[0],k[1],k[2],k[3]];else return null;k=g.styleAttrs[c.byName.writingMode.qname];if("lrtb"===k||"lr"===k)e=[e[0],e[3],e[2],e[1]];else if("rltb"===k||"rl"===k)e=[e[0],e[1],e[2],e[3]];else if("tblr"===k)e=[e[3],e[0],e[1],e[2]];else if("tbrl"===k||"tb"===k)e=[e[3],e[2],e[1],e[0]];else return null;k=[];for(m=0;m<e.length;m++)if(0===
e[m].value)k[m]=new a.ComputedLength(0,0);else if(k[m]=a.toComputedLength(e[m].value,e[m].unit,g.styleAttrs[c.byName.fontSize.qname],0===m||2===m?g.styleAttrs[c.byName.extent.qname].h:g.styleAttrs[c.byName.extent.qname].w,0===m||2===m?b.cellLength.h:b.cellLength.w,0===m||2===m?b.pxLength.h:b.pxLength.w),null===k[m])return null;return k}),new m(g.ns_tts,"position","top left",["region"],!1,!0,function(b){return a.parsePosition(b)},function(b,e,g,k){e=a.toComputedLength(k.v.offset.value,k.v.offset.unit,
null,new a.ComputedLength(-g.styleAttrs[c.byName.extent.qname].h.rw,b.dimensions.h.rh-g.styleAttrs[c.byName.extent.qname].h.rh),null,b.pxLength.h);if(null===e)return null;"bottom"===k.v.edge&&(e=new a.ComputedLength(-e.rw-g.styleAttrs[c.byName.extent.qname].h.rw,b.dimensions.h.rh-e.rh-g.styleAttrs[c.byName.extent.qname].h.rh));var n=a.toComputedLength(k.h.offset.value,k.h.offset.unit,null,new a.ComputedLength(b.dimensions.w.rw-g.styleAttrs[c.byName.extent.qname].w.rw,-g.styleAttrs[c.byName.extent.qname].w.rh),
null,b.pxLength.w);if(null===e)return null;"right"===k.h.edge&&(n=new a.ComputedLength(b.dimensions.w.rw-n.rw-g.styleAttrs[c.byName.extent.qname].w.rw,-n.rh-g.styleAttrs[c.byName.extent.qname].w.rh));return{h:e,w:n}}),new m(g.ns_tts,"ruby","none",["span"],!1,!0,function(a){return a},null),new m(g.ns_tts,"rubyAlign","center",["span"],!0,!0,function(a){return"center"!==a&&"spaceAround"!==a?null:a},null),new m(g.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(a){return a},null),new m(g.ns_tts,
"rubyReserve","none",["p"],!0,!0,function(b){var c=b.split(" ");b=[null,null];if(0===c.length||2<c.length||"none"!==c[0]&&"both"!==c[0]&&"after"!==c[0]&&"before"!==c[0]&&"outside"!==c[0])return null;b[0]=c[0];if(2===c.length&&"none"!==c[0])if(c=a.parseLength(c[1]))b[1]=c;else return null;return b},function(b,e,g,k,m){if("none"===k[0])return k;b=null===k[1]?new a.ComputedLength(.5*g.styleAttrs[c.byName.fontSize.qname].rw,.5*g.styleAttrs[c.byName.fontSize.qname].rh):a.toComputedLength(k[1].value,k[1].unit,
g.styleAttrs[c.byName.fontSize.qname],g.styleAttrs[c.byName.fontSize.qname],b.cellLength.h,b.pxLength.h);return null===b?null:[k[0],b]}),new m(g.ns_tts,"showBackground","whenActive",["region"],!1,!0,function(a){return a},null),new m(g.ns_tts,"textAlign","start",["p"],!0,!0,function(a){return a},function(a,c,e,g,m){return"left"===g?"start":"right"===g?"end":g}),new m(g.ns_tts,"textCombine","none",["span"],!0,!0,function(a){return"none"===a||"all"===a?a:null},null),new m(g.ns_tts,"textDecoration","none",
["span"],!0,!0,function(a){return a.split(" ")},null),new m(g.ns_tts,"textEmphasis","none",["span"],!0,!0,function(b){b=b.split(" ");for(var c={style:null,symbol:null,color:null,position:null},e=0;e<b.length;e++)if("none"===b[e]||"auto"===b[e])c.style=b[e];else if("filled"===b[e]||"open"===b[e])c.style=b[e];else if("circle"===b[e]||"dot"===b[e]||"sesame"===b[e])c.symbol=b[e];else if("current"===b[e])c.color=b[e];else if("outside"===b[e]||"before"===b[e]||"after"===b[e])c.position=b[e];else if(c.color=
a.parseColor(b[e]),null===c.color)return null;null==c.style&&null==c.symbol?c.style="auto":(c.symbol=c.symbol||"circle",c.style=c.style||"filled");c.position=c.position||"outside";c.color=c.color||"current";return c},null),new m(g.ns_tts,"textOutline","none",["span"],!0,!0,function(b){if("none"===b)return b;var c={};b=b.split(" ");if(0===b.length||2<b.length)return null;var e=a.parseColor(b[0]);c.color=e;null!==e&&b.shift();if(1!==b.length)return null;b=a.parseLength(b[0]);if(!b)return null;c.thickness=
b;return c},function(b,e,g,k,m){if("none"===k)return k;e={};e.color=null===k.color?g.styleAttrs[c.byName.color.qname]:k.color;e.thickness=a.toComputedLength(k.thickness.value,k.thickness.unit,g.styleAttrs[c.byName.fontSize.qname],g.styleAttrs[c.byName.fontSize.qname],b.cellLength.h,b.pxLength.h);return null===e.thickness?null:e}),new m(g.ns_tts,"textShadow","none",["span"],!0,!0,a.parseTextShadow,function(b,e,g,k){if("none"===k)return k;e=[];for(var m=0;m<k.length;m++){var n={};n.x_off=a.toComputedLength(k[m][0].value,
k[m][0].unit,null,g.styleAttrs[c.byName.fontSize.qname],null,b.pxLength.w);if(null===n.x_off)return null;n.y_off=a.toComputedLength(k[m][1].value,k[m][1].unit,null,g.styleAttrs[c.byName.fontSize.qname],null,b.pxLength.h);if(null===n.y_off)return null;if(null===k[m][2])n.b_radius=0;else if(n.b_radius=a.toComputedLength(k[m][2].value,k[m][2].unit,null,g.styleAttrs[c.byName.fontSize.qname],null,b.pxLength.h),null===n.b_radius)return null;n.color=null===k[m][3]?g.styleAttrs[c.byName.color.qname]:k[m][3];
e.push(n)}return e}),new m(g.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(a){return a},null),new m(g.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(a){return a},null),new m(g.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(a){return a},null),new m(g.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(a){return a},null),new m(g.ns_tts,"zIndex","auto",["region"],!1,!0,function(a){"auto"!==a&&(a=parseInt(a),isNaN(a)&&(a=null));return a},null),new m(g.ns_ebutts,
"linePadding","0c",["p"],!0,!1,a.parseLength,function(b,c,e,g,m){return a.toComputedLength(g.value,g.unit,null,null,b.cellLength.w,null)}),new m(g.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(a){return a},null),new m(g.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(a){return a},null),new m(g.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(a){return"true"===a?!0:!1},null),new m(g.ns_itts,"fillLineGap","true",["p"],!0,!0,function(a){return"true"===
a?!0:!1},null)];c.byQName={};for(var e in c.all)c.all.hasOwnProperty(e)&&(c.byQName[c.all[e].qname]=c.all[e]);c.byName={};for(var p in c.all)c.all.hasOwnProperty(p)&&(c.byName[c.all[p].name]=c.all[p])})("undefined"===typeof r?this.imscStyles={}:r,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":31,"./utils":33}],33:[function(c,u,r){(function(c){var g=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,a=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,
m=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,e={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};c.parseColor=function(b){var c,q=
null,k=e[b.toLowerCase()];void 0!==k?q=k:null!==(c=g.exec(b))?q=[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16),void 0!==c[4]?parseInt(c[4],16):255]:null!==(c=a.exec(b))?q=[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),255]:null!==(c=m.exec(b))&&(q=[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),parseInt(c[4])]);return q};var p=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;c.parseLength=function(a){var b,c=null;null!==(b=p.exec(a))&&(c={value:parseFloat(b[1]),unit:b[2]});return c};c.parseTextShadow=
function(a){a=a.match(/([^\(,\)]|\([^\)]+\))+/g);for(var b=[],e=0;e<a.length;e++){var g=a[e].split(" ");if(1===g.length&&"none"===g[0])return"none";if(1<g.length&&5>g.length){var m=[null,null,null,null],p=c.parseLength(g.shift());if(null===p)return null;m[0]=p;p=c.parseLength(g.shift());if(null===p)return null;m[1]=p;if(0!==g.length&&(p=c.parseLength(g[0]),null!==p&&(m[2]=p,g.shift()),0!==g.length)){g=c.parseColor(g[0]);if(null===g)return null;m[3]=g}b.push(m)}}return b};c.parsePosition=function(a){a=
a.split(" ");var b=function(a){return"center"===a||"left"===a||"top"===a||"bottom"===a||"right"===a};if(4<a.length)return null;for(var e=0;e<a.length;e++)if(!b(a[e])){var g=c.parseLength(a[e]);if(null===g)return null;a[e]=g}e={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(g=0;g<a.length;){var m=a[g++];if(b(m)){var p={value:0,unit:"%"};2!==a.length&&g<a.length&&!b(a[g])&&(p=a[g++]);"right"===m?(e.h.edge=m,e.h.offset=p):"bottom"===m?(e.v.edge=m,e.v.offset=
p):"left"===m?e.h.offset=p:"top"===m&&(e.v.offset=p)}else if(1===a.length||2===a.length)1===g?e.h.offset=m:e.v.offset=m;else return null}return e};c.ComputedLength=function(a,c){this.rw=a;this.rh=c};c.ComputedLength.prototype.toUsedLength=function(a,c){return a*this.rw+c*this.rh};c.ComputedLength.prototype.multiply=function(a,c){return c?a*c:a};c.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};c.toComputedLength=function(a,e,g,k,m,p){return"%"===e&&k?new c.ComputedLength(k.rw*
a/100,k.rh*a/100):"em"===e&&g?new c.ComputedLength(g.rw*a,g.rh*a):"c"===e&&m?new c.ComputedLength(a*m.rw,a*m.rh):"px"===e&&p?new c.ComputedLength(a*p.rw,a*p.rh):"rh"===e?new c.ComputedLength(0,a/100):"rw"===e?new c.ComputedLength(a/100,0):null}})("undefined"===typeof r?this.imscUtils={}:r)},{}]},{},[30])(30)});
